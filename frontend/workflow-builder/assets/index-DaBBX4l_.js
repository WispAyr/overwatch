(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function Nf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jf={exports:{}},yi={},Sf={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),Ix=Symbol.for("react.portal"),Px=Symbol.for("react.fragment"),Tx=Symbol.for("react.strict_mode"),$x=Symbol.for("react.profiler"),Dx=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),Rx=Symbol.for("react.forward_ref"),Lx=Symbol.for("react.suspense"),Fx=Symbol.for("react.memo"),zx=Symbol.for("react.lazy"),ou=Symbol.iterator;function Ox(e){return e===null||typeof e!="object"?null:(e=ou&&e[ou]||e["@@iterator"],typeof e=="function"?e:null)}var kf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Cf=Object.assign,_f={};function Mr(e,t,n){this.props=e,this.context=t,this.refs=_f,this.updater=n||kf}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ef(){}Ef.prototype=Mr.prototype;function za(e,t,n){this.props=e,this.context=t,this.refs=_f,this.updater=n||kf}var Oa=za.prototype=new Ef;Oa.constructor=za;Cf(Oa,Mr.prototype);Oa.isPureReactComponent=!0;var iu=Array.isArray,Mf=Object.prototype.hasOwnProperty,Va={current:null},If={key:!0,ref:!0,__self:!0,__source:!0};function Pf(e,t,n){var r,o={},i=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(i=""+t.key),t)Mf.call(t,r)&&!If.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:Ds,type:e,key:i,ref:l,props:o,_owner:Va.current}}function Vx(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ba(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function Bx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var lu=/\/+/g;function Qi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Bx(""+e.key):t.toString(36)}function wo(e,t,n,r,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Ds:case Ix:l=!0}}if(l)return l=e,o=o(l),e=r===""?"."+Qi(l,0):r,iu(o)?(n="",e!=null&&(n=e.replace(lu,"$&/")+"/"),wo(o,t,n,"",function(u){return u})):o!=null&&(Ba(o)&&(o=Vx(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(lu,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=r===""?".":r+":",iu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Qi(i,a);l+=wo(i,t,n,c,o)}else if(c=Ox(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Qi(i,a++),l+=wo(i,t,n,c,o);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Xs(e,t,n){if(e==null)return e;var r=[],o=0;return wo(e,r,"","",function(i){return t.call(n,i,o++)}),r}function Hx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},bo={transition:null},Wx={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:bo,ReactCurrentOwner:Va};function Tf(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Xs,forEach:function(e,t,n){Xs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Xs(e,function(){t++}),t},toArray:function(e){return Xs(e,function(t){return t})||[]},only:function(e){if(!Ba(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=Mr;ae.Fragment=Px;ae.Profiler=$x;ae.PureComponent=za;ae.StrictMode=Tx;ae.Suspense=Lx;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wx;ae.act=Tf;ae.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Cf({},e.props),o=e.key,i=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,l=Va.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Mf.call(t,c)&&!If.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ds,type:e.type,key:o,ref:i,props:r,_owner:l}};ae.createContext=function(e){return e={$$typeof:Ax,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Dx,_context:e},e.Consumer=e};ae.createElement=Pf;ae.createFactory=function(e){var t=Pf.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:Rx,render:e}};ae.isValidElement=Ba;ae.lazy=function(e){return{$$typeof:zx,_payload:{_status:-1,_result:e},_init:Hx}};ae.memo=function(e,t){return{$$typeof:Fx,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=bo.transition;bo.transition={};try{e()}finally{bo.transition=t}};ae.unstable_act=Tf;ae.useCallback=function(e,t){return Ve.current.useCallback(e,t)};ae.useContext=function(e){return Ve.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};ae.useEffect=function(e,t){return Ve.current.useEffect(e,t)};ae.useId=function(){return Ve.current.useId()};ae.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};ae.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return Ve.current.useMemo(e,t)};ae.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};ae.useRef=function(e){return Ve.current.useRef(e)};ae.useState=function(e){return Ve.current.useState(e)};ae.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};ae.useTransition=function(){return Ve.current.useTransition()};ae.version="18.3.1";Sf.exports=ae;var w=Sf.exports;const Ha=Nf(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ux=w,Yx=Symbol.for("react.element"),Xx=Symbol.for("react.fragment"),Qx=Object.prototype.hasOwnProperty,Gx=Ux.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kx={key:!0,ref:!0,__self:!0,__source:!0};function $f(e,t,n){var r,o={},i=null,l=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Qx.call(t,r)&&!Kx.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:Yx,type:e,key:i,ref:l,props:o,_owner:Gx.current}}yi.Fragment=Xx;yi.jsx=$f;yi.jsxs=$f;jf.exports=yi;var s=jf.exports,Tl={},Df={exports:{}},nt={},Af={exports:{}},Rf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,I){var E=M.length;M.push(I);e:for(;0<E;){var F=E-1>>>1,O=M[F];if(0<o(O,I))M[F]=I,M[E]=O,E=F;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var I=M[0],E=M.pop();if(E!==I){M[0]=E;e:for(var F=0,O=M.length,X=O>>>1;F<X;){var Y=2*(F+1)-1,V=M[Y],Q=Y+1,H=M[Q];if(0>o(V,E))Q<O&&0>o(H,V)?(M[F]=H,M[Q]=E,F=Q):(M[F]=V,M[Y]=E,F=Y);else if(Q<O&&0>o(H,E))M[F]=H,M[Q]=E,F=Q;else break e}}return I}function o(M,I){var E=M.sortIndex-I.sortIndex;return E!==0?E:M.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,a=l.now();e.unstable_now=function(){return l.now()-a}}var c=[],u=[],p=1,h=null,d=3,v=!1,y=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(M){for(var I=n(u);I!==null;){if(I.callback===null)r(u);else if(I.startTime<=M)r(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=n(u)}}function N(M){if(x=!1,g(M),!y)if(n(c)!==null)y=!0,T(S);else{var I=n(u);I!==null&&D(N,I.startTime-M)}}function S(M,I){y=!1,x&&(x=!1,f(C),C=-1),v=!0;var E=d;try{for(g(I),h=n(c);h!==null&&(!(h.expirationTime>I)||M&&!L());){var F=h.callback;if(typeof F=="function"){h.callback=null,d=h.priorityLevel;var O=F(h.expirationTime<=I);I=e.unstable_now(),typeof O=="function"?h.callback=O:h===n(c)&&r(c),g(I)}else r(c);h=n(c)}if(h!==null)var X=!0;else{var Y=n(u);Y!==null&&D(N,Y.startTime-I),X=!1}return X}finally{h=null,d=E,v=!1}}var j=!1,k=null,C=-1,P=5,z=-1;function L(){return!(e.unstable_now()-z<P)}function A(){if(k!==null){var M=e.unstable_now();z=M;var I=!0;try{I=k(!0,M)}finally{I?R():(j=!1,k=null)}}else j=!1}var R;if(typeof m=="function")R=function(){m(A)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,$=_.port2;_.port1.onmessage=A,R=function(){$.postMessage(null)}}else R=function(){b(A,0)};function T(M){k=M,j||(j=!0,R())}function D(M,I){C=b(function(){M(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,T(S))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(M){switch(d){case 1:case 2:case 3:var I=3;break;default:I=d}var E=d;d=I;try{return M()}finally{d=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,I){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var E=d;d=M;try{return I()}finally{d=E}},e.unstable_scheduleCallback=function(M,I,E){var F=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?F+E:F):E=F,M){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=E+O,M={id:p++,callback:I,priorityLevel:M,startTime:E,expirationTime:O,sortIndex:-1},E>F?(M.sortIndex=E,t(u,M),n(c)===null&&M===n(u)&&(x?(f(C),C=-1):x=!0,D(N,E-F))):(M.sortIndex=O,t(c,M),y||v||(y=!0,T(S))),M},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(M){var I=d;return function(){var E=d;d=I;try{return M.apply(this,arguments)}finally{d=E}}}})(Rf);Af.exports=Rf;var Zx=Af.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qx=w,et=Zx;function K(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lf=new Set,ls={};function On(e,t){hr(e,t),hr(e+"Capture",t)}function hr(e,t){for(ls[e]=t,e=0;e<t.length;e++)Lf.add(t[e])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$l=Object.prototype.hasOwnProperty,Jx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,au={},cu={};function em(e){return $l.call(cu,e)?!0:$l.call(au,e)?!1:Jx.test(e)?cu[e]=!0:(au[e]=!0,!1)}function tm(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nm(e,t,n,r){if(t===null||typeof t>"u"||tm(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Be(e,t,n,r,o,i,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=l}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new Be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new Be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new Be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new Be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new Be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new Be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new Be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new Be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new Be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Wa=/[\-:]([a-z])/g;function Ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Wa,Ua);De[t]=new Be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Wa,Ua);De[t]=new Be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Wa,Ua);De[t]=new Be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new Be(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new Be(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ya(e,t,n,r){var o=De.hasOwnProperty(t)?De[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nm(t,n,o,r)&&(n=null),r||o===null?em(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xt=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),Un=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Xa=Symbol.for("react.strict_mode"),Dl=Symbol.for("react.profiler"),Ff=Symbol.for("react.provider"),zf=Symbol.for("react.context"),Qa=Symbol.for("react.forward_ref"),Al=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Jt=Symbol.for("react.lazy"),Of=Symbol.for("react.offscreen"),uu=Symbol.iterator;function Dr(e){return e===null||typeof e!="object"?null:(e=uu&&e[uu]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,Gi;function Wr(e){if(Gi===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gi=t&&t[1]||""}return`
`+Gi+e}var Ki=!1;function Zi(e,t){if(!e||Ki)return"";Ki=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var o=u.stack.split(`
`),i=r.stack.split(`
`),l=o.length-1,a=i.length-1;1<=l&&0<=a&&o[l]!==i[a];)a--;for(;1<=l&&0<=a;l--,a--)if(o[l]!==i[a]){if(l!==1||a!==1)do if(l--,a--,0>a||o[l]!==i[a]){var c=`
`+o[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=a);break}}}finally{Ki=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wr(e):""}function rm(e){switch(e.tag){case 5:return Wr(e.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return e=Zi(e.type,!1),e;case 11:return e=Zi(e.type.render,!1),e;case 1:return e=Zi(e.type,!0),e;default:return""}}function Ll(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Un:return"Portal";case Dl:return"Profiler";case Xa:return"StrictMode";case Al:return"Suspense";case Rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zf:return(e.displayName||"Context")+".Consumer";case Ff:return(e._context.displayName||"Context")+".Provider";case Qa:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ga:return t=e.displayName||null,t!==null?t:Ll(e.type)||"Memo";case Jt:t=e._payload,e=e._init;try{return Ll(e(t))}catch{}}return null}function sm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ll(t);case 8:return t===Xa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function om(e){var t=Vf(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){r=""+l,i.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gs(e){e._valueTracker||(e._valueTracker=om(e))}function Bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vf(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Lo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fl(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function du(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=gn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Hf(e,t){t=t.checked,t!=null&&Ya(e,"checked",t,!1)}function zl(e,t){Hf(e,t);var n=gn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ol(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ol(e,t.type,gn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ol(e,t,n){(t!=="number"||Lo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ur=Array.isArray;function or(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Vl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(K(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(K(92));if(Ur(n)){if(1<n.length)throw Error(K(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gn(n)}}function Wf(e,t){var n=gn(t.value),r=gn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Uf(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Uf(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ks,Yf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ks=Ks||document.createElement("div"),Ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function as(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},im=["Webkit","ms","Moz","O"];Object.keys(Kr).forEach(function(e){im.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Kr[t]=Kr[e]})});function Xf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Kr.hasOwnProperty(e)&&Kr[e]?(""+t).trim():t+"px"}function Qf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Xf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var lm=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(e,t){if(t){if(lm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(K(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(K(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(K(61))}if(t.style!=null&&typeof t.style!="object")throw Error(K(62))}}function Wl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ul=null;function Ka(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yl=null,ir=null,lr=null;function gu(e){if(e=Ls(e)){if(typeof Yl!="function")throw Error(K(280));var t=e.stateNode;t&&(t=ji(t),Yl(e.stateNode,e.type,t))}}function Gf(e){ir?lr?lr.push(e):lr=[e]:ir=e}function Kf(){if(ir){var e=ir,t=lr;if(lr=ir=null,gu(e),t)for(e=0;e<t.length;e++)gu(t[e])}}function Zf(e,t){return e(t)}function qf(){}var qi=!1;function Jf(e,t,n){if(qi)return e(t,n);qi=!0;try{return Zf(e,t,n)}finally{qi=!1,(ir!==null||lr!==null)&&(qf(),Kf())}}function cs(e,t){var n=e.stateNode;if(n===null)return null;var r=ji(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(K(231,t,typeof n));return n}var Xl=!1;if(Bt)try{var Ar={};Object.defineProperty(Ar,"passive",{get:function(){Xl=!0}}),window.addEventListener("test",Ar,Ar),window.removeEventListener("test",Ar,Ar)}catch{Xl=!1}function am(e,t,n,r,o,i,l,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(p){this.onError(p)}}var Zr=!1,Fo=null,zo=!1,Ql=null,cm={onError:function(e){Zr=!0,Fo=e}};function um(e,t,n,r,o,i,l,a,c){Zr=!1,Fo=null,am.apply(cm,arguments)}function dm(e,t,n,r,o,i,l,a,c){if(um.apply(this,arguments),Zr){if(Zr){var u=Fo;Zr=!1,Fo=null}else throw Error(K(198));zo||(zo=!0,Ql=u)}}function Vn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function eh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function xu(e){if(Vn(e)!==e)throw Error(K(188))}function fm(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(K(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return xu(o),e;if(i===r)return xu(o),t;i=i.sibling}throw Error(K(188))}if(n.return!==r.return)n=o,r=i;else{for(var l=!1,a=o.child;a;){if(a===n){l=!0,n=o,r=i;break}if(a===r){l=!0,r=o,n=i;break}a=a.sibling}if(!l){for(a=i.child;a;){if(a===n){l=!0,n=i,r=o;break}if(a===r){l=!0,r=i,n=o;break}a=a.sibling}if(!l)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?e:t}function th(e){return e=fm(e),e!==null?nh(e):null}function nh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nh(e);if(t!==null)return t;e=e.sibling}return null}var rh=et.unstable_scheduleCallback,mu=et.unstable_cancelCallback,hm=et.unstable_shouldYield,pm=et.unstable_requestPaint,ke=et.unstable_now,gm=et.unstable_getCurrentPriorityLevel,Za=et.unstable_ImmediatePriority,sh=et.unstable_UserBlockingPriority,Oo=et.unstable_NormalPriority,xm=et.unstable_LowPriority,oh=et.unstable_IdlePriority,vi=null,_t=null;function mm(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(vi,e,void 0,(e.current.flags&128)===128)}catch{}}var vt=Math.clz32?Math.clz32:wm,ym=Math.log,vm=Math.LN2;function wm(e){return e>>>=0,e===0?32:31-(ym(e)/vm|0)|0}var Zs=64,qs=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,l=n&268435455;if(l!==0){var a=l&~o;a!==0?r=Yr(a):(i&=l,i!==0&&(r=Yr(i)))}else l=n&~o,l!==0?r=Yr(l):i!==0&&(r=Yr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,i=t&-t,o>=i||o===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vt(t),o=1<<n,r|=e[n],t&=~o;return r}function bm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var l=31-vt(i),a=1<<l,c=o[l];c===-1?(!(a&n)||a&r)&&(o[l]=bm(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Gl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ih(){var e=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),e}function Ji(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function As(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vt(t),e[t]=n}function jm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-vt(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}function qa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var he=0;function lh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ah,Ja,ch,uh,dh,Kl=!1,Js=[],ln=null,an=null,cn=null,us=new Map,ds=new Map,tn=[],Sm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yu(e,t){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":an=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ds.delete(t.pointerId)}}function Rr(e,t,n,r,o,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},t!==null&&(t=Ls(t),t!==null&&Ja(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function km(e,t,n,r,o){switch(t){case"focusin":return ln=Rr(ln,e,t,n,r,o),!0;case"dragenter":return an=Rr(an,e,t,n,r,o),!0;case"mouseover":return cn=Rr(cn,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return us.set(i,Rr(us.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,ds.set(i,Rr(ds.get(i)||null,e,t,n,r,o)),!0}return!1}function fh(e){var t=Sn(e.target);if(t!==null){var n=Vn(t);if(n!==null){if(t=n.tag,t===13){if(t=eh(n),t!==null){e.blockedOn=t,dh(e.priority,function(){ch(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function No(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ul=r,n.target.dispatchEvent(r),Ul=null}else return t=Ls(n),t!==null&&Ja(t),e.blockedOn=n,!1;t.shift()}return!0}function vu(e,t,n){No(e)&&n.delete(t)}function Cm(){Kl=!1,ln!==null&&No(ln)&&(ln=null),an!==null&&No(an)&&(an=null),cn!==null&&No(cn)&&(cn=null),us.forEach(vu),ds.forEach(vu)}function Lr(e,t){e.blockedOn===t&&(e.blockedOn=null,Kl||(Kl=!0,et.unstable_scheduleCallback(et.unstable_NormalPriority,Cm)))}function fs(e){function t(o){return Lr(o,e)}if(0<Js.length){Lr(Js[0],e);for(var n=1;n<Js.length;n++){var r=Js[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ln!==null&&Lr(ln,e),an!==null&&Lr(an,e),cn!==null&&Lr(cn,e),us.forEach(t),ds.forEach(t),n=0;n<tn.length;n++)r=tn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<tn.length&&(n=tn[0],n.blockedOn===null);)fh(n),n.blockedOn===null&&tn.shift()}var ar=Xt.ReactCurrentBatchConfig,Bo=!0;function _m(e,t,n,r){var o=he,i=ar.transition;ar.transition=null;try{he=1,ec(e,t,n,r)}finally{he=o,ar.transition=i}}function Em(e,t,n,r){var o=he,i=ar.transition;ar.transition=null;try{he=4,ec(e,t,n,r)}finally{he=o,ar.transition=i}}function ec(e,t,n,r){if(Bo){var o=Zl(e,t,n,r);if(o===null)cl(e,t,r,Ho,n),yu(e,r);else if(km(o,e,t,n,r))r.stopPropagation();else if(yu(e,r),t&4&&-1<Sm.indexOf(e)){for(;o!==null;){var i=Ls(o);if(i!==null&&ah(i),i=Zl(e,t,n,r),i===null&&cl(e,t,r,Ho,n),i===o)break;o=i}o!==null&&r.stopPropagation()}else cl(e,t,r,null,n)}}var Ho=null;function Zl(e,t,n,r){if(Ho=null,e=Ka(r),e=Sn(e),e!==null)if(t=Vn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=eh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ho=e,null}function hh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gm()){case Za:return 1;case sh:return 4;case Oo:case xm:return 16;case oh:return 536870912;default:return 16}default:return 16}}var sn=null,tc=null,jo=null;function ph(){if(jo)return jo;var e,t=tc,n=t.length,r,o="value"in sn?sn.value:sn.textContent,i=o.length;for(e=0;e<n&&t[e]===o[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===o[i-r];r++);return jo=o.slice(e,1<r?1-r:void 0)}function So(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eo(){return!0}function wu(){return!1}function rt(e){function t(n,r,o,i,l){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=l,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eo:wu,this.isPropagationStopped=wu,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eo)},persist:function(){},isPersistent:eo}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=rt(Ir),Rs=be({},Ir,{view:0,detail:0}),Mm=rt(Rs),el,tl,Fr,wi=be({},Rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fr&&(Fr&&e.type==="mousemove"?(el=e.screenX-Fr.screenX,tl=e.screenY-Fr.screenY):tl=el=0,Fr=e),el)},movementY:function(e){return"movementY"in e?e.movementY:tl}}),bu=rt(wi),Im=be({},wi,{dataTransfer:0}),Pm=rt(Im),Tm=be({},Rs,{relatedTarget:0}),nl=rt(Tm),$m=be({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Dm=rt($m),Am=be({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rm=rt(Am),Lm=be({},Ir,{data:0}),Nu=rt(Lm),Fm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Om={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Om[e])?!!t[e]:!1}function rc(){return Vm}var Bm=be({},Rs,{key:function(e){if(e.key){var t=Fm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=So(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(e){return e.type==="keypress"?So(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?So(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hm=rt(Bm),Wm=be({},wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ju=rt(Wm),Um=be({},Rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),Ym=rt(Um),Xm=be({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qm=rt(Xm),Gm=be({},wi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Km=rt(Gm),Zm=[9,13,27,32],sc=Bt&&"CompositionEvent"in window,qr=null;Bt&&"documentMode"in document&&(qr=document.documentMode);var qm=Bt&&"TextEvent"in window&&!qr,gh=Bt&&(!sc||qr&&8<qr&&11>=qr),Su=" ",ku=!1;function xh(e,t){switch(e){case"keyup":return Zm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xn=!1;function Jm(e,t){switch(e){case"compositionend":return mh(t);case"keypress":return t.which!==32?null:(ku=!0,Su);case"textInput":return e=t.data,e===Su&&ku?null:e;default:return null}}function ey(e,t){if(Xn)return e==="compositionend"||!sc&&xh(e,t)?(e=ph(),jo=tc=sn=null,Xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gh&&t.locale!=="ko"?null:t.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ty[e.type]:t==="textarea"}function yh(e,t,n,r){Gf(r),t=Wo(t,"onChange"),0<t.length&&(n=new nc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jr=null,hs=null;function ny(e){Mh(e,0)}function bi(e){var t=Kn(e);if(Bf(t))return e}function ry(e,t){if(e==="change")return t}var vh=!1;if(Bt){var rl;if(Bt){var sl="oninput"in document;if(!sl){var _u=document.createElement("div");_u.setAttribute("oninput","return;"),sl=typeof _u.oninput=="function"}rl=sl}else rl=!1;vh=rl&&(!document.documentMode||9<document.documentMode)}function Eu(){Jr&&(Jr.detachEvent("onpropertychange",wh),hs=Jr=null)}function wh(e){if(e.propertyName==="value"&&bi(hs)){var t=[];yh(t,hs,e,Ka(e)),Jf(ny,t)}}function sy(e,t,n){e==="focusin"?(Eu(),Jr=t,hs=n,Jr.attachEvent("onpropertychange",wh)):e==="focusout"&&Eu()}function oy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bi(hs)}function iy(e,t){if(e==="click")return bi(t)}function ly(e,t){if(e==="input"||e==="change")return bi(t)}function ay(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bt=typeof Object.is=="function"?Object.is:ay;function ps(e,t){if(bt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!$l.call(t,o)||!bt(e[o],t[o]))return!1}return!0}function Mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Iu(e,t){var n=Mu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mu(n)}}function bh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nh(){for(var e=window,t=Lo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Lo(e.document)}return t}function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cy(e){var t=Nh(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bh(n.ownerDocument.documentElement,n)){if(r!==null&&oc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=Iu(n,i);var l=Iu(n,r);o&&l&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uy=Bt&&"documentMode"in document&&11>=document.documentMode,Qn=null,ql=null,es=null,Jl=!1;function Pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jl||Qn==null||Qn!==Lo(r)||(r=Qn,"selectionStart"in r&&oc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),es&&ps(es,r)||(es=r,r=Wo(ql,"onSelect"),0<r.length&&(t=new nc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qn)))}function to(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Gn={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionend:to("Transition","TransitionEnd")},ol={},jh={};Bt&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Gn.animationend.animation,delete Gn.animationiteration.animation,delete Gn.animationstart.animation),"TransitionEvent"in window||delete Gn.transitionend.transition);function Ni(e){if(ol[e])return ol[e];if(!Gn[e])return e;var t=Gn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in jh)return ol[e]=t[n];return e}var Sh=Ni("animationend"),kh=Ni("animationiteration"),Ch=Ni("animationstart"),_h=Ni("transitionend"),Eh=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(e,t){Eh.set(e,t),On(t,[e])}for(var il=0;il<Tu.length;il++){var ll=Tu[il],dy=ll.toLowerCase(),fy=ll[0].toUpperCase()+ll.slice(1);mn(dy,"on"+fy)}mn(Sh,"onAnimationEnd");mn(kh,"onAnimationIteration");mn(Ch,"onAnimationStart");mn("dblclick","onDoubleClick");mn("focusin","onFocus");mn("focusout","onBlur");mn(_h,"onTransitionEnd");hr("onMouseEnter",["mouseout","mouseover"]);hr("onMouseLeave",["mouseout","mouseover"]);hr("onPointerEnter",["pointerout","pointerover"]);hr("onPointerLeave",["pointerout","pointerover"]);On("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));On("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));On("onBeforeInput",["compositionend","keypress","textInput","paste"]);On("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));On("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));On("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function $u(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,dm(r,t,void 0,e),e.currentTarget=null}function Mh(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var l=r.length-1;0<=l;l--){var a=r[l],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&o.isPropagationStopped())break e;$u(o,a,u),i=c}else for(l=0;l<r.length;l++){if(a=r[l],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&o.isPropagationStopped())break e;$u(o,a,u),i=c}}}if(zo)throw e=Ql,zo=!1,Ql=null,e}function ge(e,t){var n=t[sa];n===void 0&&(n=t[sa]=new Set);var r=e+"__bubble";n.has(r)||(Ih(t,e,2,!1),n.add(r))}function al(e,t,n){var r=0;t&&(r|=4),Ih(n,e,r,t)}var no="_reactListening"+Math.random().toString(36).slice(2);function gs(e){if(!e[no]){e[no]=!0,Lf.forEach(function(n){n!=="selectionchange"&&(hy.has(n)||al(n,!1,e),al(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[no]||(t[no]=!0,al("selectionchange",!1,t))}}function Ih(e,t,n,r){switch(hh(t)){case 1:var o=_m;break;case 4:o=Em;break;default:o=ec}n=o.bind(null,t,n,e),o=void 0,!Xl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function cl(e,t,n,r,o){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(l===4)for(l=r.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;l=l.return}for(;a!==null;){if(l=Sn(a),l===null)return;if(c=l.tag,c===5||c===6){r=i=l;continue e}a=a.parentNode}}r=r.return}Jf(function(){var u=i,p=Ka(n),h=[];e:{var d=Eh.get(e);if(d!==void 0){var v=nc,y=e;switch(e){case"keypress":if(So(n)===0)break e;case"keydown":case"keyup":v=Hm;break;case"focusin":y="focus",v=nl;break;case"focusout":y="blur",v=nl;break;case"beforeblur":case"afterblur":v=nl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ym;break;case Sh:case kh:case Ch:v=Dm;break;case _h:v=Qm;break;case"scroll":v=Mm;break;case"wheel":v=Km;break;case"copy":case"cut":case"paste":v=Rm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ju}var x=(t&4)!==0,b=!x&&e==="scroll",f=x?d!==null?d+"Capture":null:d;x=[];for(var m=u,g;m!==null;){g=m;var N=g.stateNode;if(g.tag===5&&N!==null&&(g=N,f!==null&&(N=cs(m,f),N!=null&&x.push(xs(m,N,g)))),b)break;m=m.return}0<x.length&&(d=new v(d,y,null,n,p),h.push({event:d,listeners:x}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",d&&n!==Ul&&(y=n.relatedTarget||n.fromElement)&&(Sn(y)||y[Ht]))break e;if((v||d)&&(d=p.window===p?p:(d=p.ownerDocument)?d.defaultView||d.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?Sn(y):null,y!==null&&(b=Vn(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(x=bu,N="onMouseLeave",f="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(x=ju,N="onPointerLeave",f="onPointerEnter",m="pointer"),b=v==null?d:Kn(v),g=y==null?d:Kn(y),d=new x(N,m+"leave",v,n,p),d.target=b,d.relatedTarget=g,N=null,Sn(p)===u&&(x=new x(f,m+"enter",y,n,p),x.target=g,x.relatedTarget=b,N=x),b=N,v&&y)t:{for(x=v,f=y,m=0,g=x;g;g=Hn(g))m++;for(g=0,N=f;N;N=Hn(N))g++;for(;0<m-g;)x=Hn(x),m--;for(;0<g-m;)f=Hn(f),g--;for(;m--;){if(x===f||f!==null&&x===f.alternate)break t;x=Hn(x),f=Hn(f)}x=null}else x=null;v!==null&&Du(h,d,v,x,!1),y!==null&&b!==null&&Du(h,b,y,x,!0)}}e:{if(d=u?Kn(u):window,v=d.nodeName&&d.nodeName.toLowerCase(),v==="select"||v==="input"&&d.type==="file")var S=ry;else if(Cu(d))if(vh)S=ly;else{S=oy;var j=sy}else(v=d.nodeName)&&v.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=iy);if(S&&(S=S(e,u))){yh(h,S,n,p);break e}j&&j(e,d,u),e==="focusout"&&(j=d._wrapperState)&&j.controlled&&d.type==="number"&&Ol(d,"number",d.value)}switch(j=u?Kn(u):window,e){case"focusin":(Cu(j)||j.contentEditable==="true")&&(Qn=j,ql=u,es=null);break;case"focusout":es=ql=Qn=null;break;case"mousedown":Jl=!0;break;case"contextmenu":case"mouseup":case"dragend":Jl=!1,Pu(h,n,p);break;case"selectionchange":if(uy)break;case"keydown":case"keyup":Pu(h,n,p)}var k;if(sc)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Xn?xh(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(gh&&n.locale!=="ko"&&(Xn||C!=="onCompositionStart"?C==="onCompositionEnd"&&Xn&&(k=ph()):(sn=p,tc="value"in sn?sn.value:sn.textContent,Xn=!0)),j=Wo(u,C),0<j.length&&(C=new Nu(C,e,null,n,p),h.push({event:C,listeners:j}),k?C.data=k:(k=mh(n),k!==null&&(C.data=k)))),(k=qm?Jm(e,n):ey(e,n))&&(u=Wo(u,"onBeforeInput"),0<u.length&&(p=new Nu("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:u}),p.data=k))}Mh(h,t)})}function xs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=cs(e,n),i!=null&&r.unshift(xs(e,i,o)),i=cs(e,t),i!=null&&r.push(xs(e,i,o))),e=e.return}return r}function Hn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Du(e,t,n,r,o){for(var i=t._reactName,l=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,o?(c=cs(n,i),c!=null&&l.unshift(xs(n,c,a))):o||(c=cs(n,i),c!=null&&l.push(xs(n,c,a)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var py=/\r\n?/g,gy=/\u0000|\uFFFD/g;function Au(e){return(typeof e=="string"?e:""+e).replace(py,`
`).replace(gy,"")}function ro(e,t,n){if(t=Au(t),Au(e)!==t&&n)throw Error(K(425))}function Uo(){}var ea=null,ta=null;function na(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ra=typeof setTimeout=="function"?setTimeout:void 0,xy=typeof clearTimeout=="function"?clearTimeout:void 0,Ru=typeof Promise=="function"?Promise:void 0,my=typeof queueMicrotask=="function"?queueMicrotask:typeof Ru<"u"?function(e){return Ru.resolve(null).then(e).catch(yy)}:ra;function yy(e){setTimeout(function(){throw e})}function ul(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),fs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);fs(t)}function un(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Pr,ms="__reactProps$"+Pr,Ht="__reactContainer$"+Pr,sa="__reactEvents$"+Pr,vy="__reactListeners$"+Pr,wy="__reactHandles$"+Pr;function Sn(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ht]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lu(e);e!==null;){if(n=e[Ct])return n;e=Lu(e)}return t}e=n,n=e.parentNode}return null}function Ls(e){return e=e[Ct]||e[Ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Kn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(K(33))}function ji(e){return e[ms]||null}var oa=[],Zn=-1;function yn(e){return{current:e}}function xe(e){0>Zn||(e.current=oa[Zn],oa[Zn]=null,Zn--)}function pe(e,t){Zn++,oa[Zn]=e.current,e.current=t}var xn={},Fe=yn(xn),Ye=yn(!1),Tn=xn;function pr(e,t){var n=e.type.contextTypes;if(!n)return xn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in n)o[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xe(e){return e=e.childContextTypes,e!=null}function Yo(){xe(Ye),xe(Fe)}function Fu(e,t,n){if(Fe.current!==xn)throw Error(K(168));pe(Fe,t),pe(Ye,n)}function Ph(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(K(108,sm(e)||"Unknown",o));return be({},n,r)}function Xo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xn,Tn=Fe.current,pe(Fe,e),pe(Ye,Ye.current),!0}function zu(e,t,n){var r=e.stateNode;if(!r)throw Error(K(169));n?(e=Ph(e,t,Tn),r.__reactInternalMemoizedMergedChildContext=e,xe(Ye),xe(Fe),pe(Fe,e)):xe(Ye),pe(Ye,n)}var Lt=null,Si=!1,dl=!1;function Th(e){Lt===null?Lt=[e]:Lt.push(e)}function by(e){Si=!0,Th(e)}function vn(){if(!dl&&Lt!==null){dl=!0;var e=0,t=he;try{var n=Lt;for(he=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Lt=null,Si=!1}catch(o){throw Lt!==null&&(Lt=Lt.slice(e+1)),rh(Za,vn),o}finally{he=t,dl=!1}}return null}var qn=[],Jn=0,Qo=null,Go=0,st=[],ot=0,$n=null,Ft=1,zt="";function bn(e,t){qn[Jn++]=Go,qn[Jn++]=Qo,Qo=e,Go=t}function $h(e,t,n){st[ot++]=Ft,st[ot++]=zt,st[ot++]=$n,$n=e;var r=Ft;e=zt;var o=32-vt(r)-1;r&=~(1<<o),n+=1;var i=32-vt(t)+o;if(30<i){var l=o-o%5;i=(r&(1<<l)-1).toString(32),r>>=l,o-=l,Ft=1<<32-vt(t)+o|n<<o|r,zt=i+e}else Ft=1<<i|n<<o|r,zt=e}function ic(e){e.return!==null&&(bn(e,1),$h(e,1,0))}function lc(e){for(;e===Qo;)Qo=qn[--Jn],qn[Jn]=null,Go=qn[--Jn],qn[Jn]=null;for(;e===$n;)$n=st[--ot],st[ot]=null,zt=st[--ot],st[ot]=null,Ft=st[--ot],st[ot]=null}var Je=null,qe=null,me=!1,gt=null;function Dh(e,t){var n=it(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ou(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,qe=un(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$n!==null?{id:Ft,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=it(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Je=e,qe=null,!0):!1;default:return!1}}function ia(e){return(e.mode&1)!==0&&(e.flags&128)===0}function la(e){if(me){var t=qe;if(t){var n=t;if(!Ou(e,t)){if(ia(e))throw Error(K(418));t=un(n.nextSibling);var r=Je;t&&Ou(e,t)?Dh(r,n):(e.flags=e.flags&-4097|2,me=!1,Je=e)}}else{if(ia(e))throw Error(K(418));e.flags=e.flags&-4097|2,me=!1,Je=e}}}function Vu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function so(e){if(e!==Je)return!1;if(!me)return Vu(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!na(e.type,e.memoizedProps)),t&&(t=qe)){if(ia(e))throw Ah(),Error(K(418));for(;t;)Dh(e,t),t=un(t.nextSibling)}if(Vu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(K(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){qe=un(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}qe=null}}else qe=Je?un(e.stateNode.nextSibling):null;return!0}function Ah(){for(var e=qe;e;)e=un(e.nextSibling)}function gr(){qe=Je=null,me=!1}function ac(e){gt===null?gt=[e]:gt.push(e)}var Ny=Xt.ReactCurrentBatchConfig;function zr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,e));var o=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(l){var a=o.refs;l===null?delete a[i]:a[i]=l},t._stringRef=i,t)}if(typeof e!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,e))}return e}function oo(e,t){throw e=Object.prototype.toString.call(t),Error(K(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bu(e){var t=e._init;return t(e._payload)}function Rh(e){function t(f,m){if(e){var g=f.deletions;g===null?(f.deletions=[m],f.flags|=16):g.push(m)}}function n(f,m){if(!e)return null;for(;m!==null;)t(f,m),m=m.sibling;return null}function r(f,m){for(f=new Map;m!==null;)m.key!==null?f.set(m.key,m):f.set(m.index,m),m=m.sibling;return f}function o(f,m){return f=pn(f,m),f.index=0,f.sibling=null,f}function i(f,m,g){return f.index=g,e?(g=f.alternate,g!==null?(g=g.index,g<m?(f.flags|=2,m):g):(f.flags|=2,m)):(f.flags|=1048576,m)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function a(f,m,g,N){return m===null||m.tag!==6?(m=yl(g,f.mode,N),m.return=f,m):(m=o(m,g),m.return=f,m)}function c(f,m,g,N){var S=g.type;return S===Yn?p(f,m,g.props.children,N,g.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jt&&Bu(S)===m.type)?(N=o(m,g.props),N.ref=zr(f,m,g),N.return=f,N):(N=Po(g.type,g.key,g.props,null,f.mode,N),N.ref=zr(f,m,g),N.return=f,N)}function u(f,m,g,N){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=vl(g,f.mode,N),m.return=f,m):(m=o(m,g.children||[]),m.return=f,m)}function p(f,m,g,N,S){return m===null||m.tag!==7?(m=Mn(g,f.mode,N,S),m.return=f,m):(m=o(m,g),m.return=f,m)}function h(f,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=yl(""+m,f.mode,g),m.return=f,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qs:return g=Po(m.type,m.key,m.props,null,f.mode,g),g.ref=zr(f,null,m),g.return=f,g;case Un:return m=vl(m,f.mode,g),m.return=f,m;case Jt:var N=m._init;return h(f,N(m._payload),g)}if(Ur(m)||Dr(m))return m=Mn(m,f.mode,g,null),m.return=f,m;oo(f,m)}return null}function d(f,m,g,N){var S=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return S!==null?null:a(f,m,""+g,N);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:return g.key===S?c(f,m,g,N):null;case Un:return g.key===S?u(f,m,g,N):null;case Jt:return S=g._init,d(f,m,S(g._payload),N)}if(Ur(g)||Dr(g))return S!==null?null:p(f,m,g,N,null);oo(f,g)}return null}function v(f,m,g,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return f=f.get(g)||null,a(m,f,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Qs:return f=f.get(N.key===null?g:N.key)||null,c(m,f,N,S);case Un:return f=f.get(N.key===null?g:N.key)||null,u(m,f,N,S);case Jt:var j=N._init;return v(f,m,g,j(N._payload),S)}if(Ur(N)||Dr(N))return f=f.get(g)||null,p(m,f,N,S,null);oo(m,N)}return null}function y(f,m,g,N){for(var S=null,j=null,k=m,C=m=0,P=null;k!==null&&C<g.length;C++){k.index>C?(P=k,k=null):P=k.sibling;var z=d(f,k,g[C],N);if(z===null){k===null&&(k=P);break}e&&k&&z.alternate===null&&t(f,k),m=i(z,m,C),j===null?S=z:j.sibling=z,j=z,k=P}if(C===g.length)return n(f,k),me&&bn(f,C),S;if(k===null){for(;C<g.length;C++)k=h(f,g[C],N),k!==null&&(m=i(k,m,C),j===null?S=k:j.sibling=k,j=k);return me&&bn(f,C),S}for(k=r(f,k);C<g.length;C++)P=v(k,f,C,g[C],N),P!==null&&(e&&P.alternate!==null&&k.delete(P.key===null?C:P.key),m=i(P,m,C),j===null?S=P:j.sibling=P,j=P);return e&&k.forEach(function(L){return t(f,L)}),me&&bn(f,C),S}function x(f,m,g,N){var S=Dr(g);if(typeof S!="function")throw Error(K(150));if(g=S.call(g),g==null)throw Error(K(151));for(var j=S=null,k=m,C=m=0,P=null,z=g.next();k!==null&&!z.done;C++,z=g.next()){k.index>C?(P=k,k=null):P=k.sibling;var L=d(f,k,z.value,N);if(L===null){k===null&&(k=P);break}e&&k&&L.alternate===null&&t(f,k),m=i(L,m,C),j===null?S=L:j.sibling=L,j=L,k=P}if(z.done)return n(f,k),me&&bn(f,C),S;if(k===null){for(;!z.done;C++,z=g.next())z=h(f,z.value,N),z!==null&&(m=i(z,m,C),j===null?S=z:j.sibling=z,j=z);return me&&bn(f,C),S}for(k=r(f,k);!z.done;C++,z=g.next())z=v(k,f,C,z.value,N),z!==null&&(e&&z.alternate!==null&&k.delete(z.key===null?C:z.key),m=i(z,m,C),j===null?S=z:j.sibling=z,j=z);return e&&k.forEach(function(A){return t(f,A)}),me&&bn(f,C),S}function b(f,m,g,N){if(typeof g=="object"&&g!==null&&g.type===Yn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:e:{for(var S=g.key,j=m;j!==null;){if(j.key===S){if(S=g.type,S===Yn){if(j.tag===7){n(f,j.sibling),m=o(j,g.props.children),m.return=f,f=m;break e}}else if(j.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Jt&&Bu(S)===j.type){n(f,j.sibling),m=o(j,g.props),m.ref=zr(f,j,g),m.return=f,f=m;break e}n(f,j);break}else t(f,j);j=j.sibling}g.type===Yn?(m=Mn(g.props.children,f.mode,N,g.key),m.return=f,f=m):(N=Po(g.type,g.key,g.props,null,f.mode,N),N.ref=zr(f,m,g),N.return=f,f=N)}return l(f);case Un:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(f,m.sibling),m=o(m,g.children||[]),m.return=f,f=m;break e}else{n(f,m);break}else t(f,m);m=m.sibling}m=vl(g,f.mode,N),m.return=f,f=m}return l(f);case Jt:return j=g._init,b(f,m,j(g._payload),N)}if(Ur(g))return y(f,m,g,N);if(Dr(g))return x(f,m,g,N);oo(f,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(f,m.sibling),m=o(m,g),m.return=f,f=m):(n(f,m),m=yl(g,f.mode,N),m.return=f,f=m),l(f)):n(f,m)}return b}var xr=Rh(!0),Lh=Rh(!1),Ko=yn(null),Zo=null,er=null,cc=null;function uc(){cc=er=Zo=null}function dc(e){var t=Ko.current;xe(Ko),e._currentValue=t}function aa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cr(e,t){Zo=e,cc=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function at(e){var t=e._currentValue;if(cc!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(Zo===null)throw Error(K(308));er=e,Zo.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var kn=null;function fc(e){kn===null?kn=[e]:kn.push(e)}function Fh(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,fc(t)):(n.next=o.next,o.next=n),t.interleaved=n,Wt(e,r)}function Wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var en=!1;function hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function dn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Wt(e,n)}return o=r.interleaved,o===null?(t.next=t,fc(r)):(t.next=o.next,o.next=t),r.interleaved=t,Wt(e,n)}function ko(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qa(e,n)}}function Hu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?o=i=l:i=i.next=l,n=n.next}while(n!==null);i===null?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qo(e,t,n,r){var o=e.updateQueue;en=!1;var i=o.firstBaseUpdate,l=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,u=c.next;c.next=null,l===null?i=u:l.next=u,l=c;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==l&&(a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=c))}if(i!==null){var h=o.baseState;l=0,p=u=c=null,a=i;do{var d=a.lane,v=a.eventTime;if((r&d)===d){p!==null&&(p=p.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,x=a;switch(d=t,v=n,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(v,h,d);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,d=typeof y=="function"?y.call(v,h,d):y,d==null)break e;h=be({},h,d);break e;case 2:en=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[a]:d.push(a))}else v={eventTime:v,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(u=p=v,c=h):p=p.next=v,l|=d;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;d=a,a=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(p===null&&(c=h),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do l|=o.lane,o=o.next;while(o!==t)}else i===null&&(o.shared.lanes=0);An|=l,e.lanes=l,e.memoizedState=h}}function Wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(K(191,o));o.call(r)}}}var Fs={},Et=yn(Fs),ys=yn(Fs),vs=yn(Fs);function Cn(e){if(e===Fs)throw Error(K(174));return e}function pc(e,t){switch(pe(vs,t),pe(ys,e),pe(Et,Fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Bl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Bl(t,e)}xe(Et),pe(Et,t)}function mr(){xe(Et),xe(ys),xe(vs)}function Oh(e){Cn(vs.current);var t=Cn(Et.current),n=Bl(t,e.type);t!==n&&(pe(ys,e),pe(Et,n))}function gc(e){ys.current===e&&(xe(Et),xe(ys))}var ve=yn(0);function Jo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var fl=[];function xc(){for(var e=0;e<fl.length;e++)fl[e]._workInProgressVersionPrimary=null;fl.length=0}var Co=Xt.ReactCurrentDispatcher,hl=Xt.ReactCurrentBatchConfig,Dn=0,we=null,Ee=null,Ie=null,ei=!1,ts=!1,ws=0,jy=0;function Ae(){throw Error(K(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bt(e[n],t[n]))return!1;return!0}function yc(e,t,n,r,o,i){if(Dn=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Co.current=e===null||e.memoizedState===null?_y:Ey,e=n(r,o),ts){i=0;do{if(ts=!1,ws=0,25<=i)throw Error(K(301));i+=1,Ie=Ee=null,t.updateQueue=null,Co.current=My,e=n(r,o)}while(ts)}if(Co.current=ti,t=Ee!==null&&Ee.next!==null,Dn=0,Ie=Ee=we=null,ei=!1,t)throw Error(K(300));return e}function vc(){var e=ws!==0;return ws=0,e}function St(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function ct(){if(Ee===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ie===null?we.memoizedState:Ie.next;if(t!==null)Ie=t,Ee=e;else{if(e===null)throw Error(K(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function bs(e,t){return typeof t=="function"?t(e):t}function pl(e){var t=ct(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=Ee,o=r.baseQueue,i=n.pending;if(i!==null){if(o!==null){var l=o.next;o.next=i.next,i.next=l}r.baseQueue=o=i,n.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=l=null,c=null,u=i;do{var p=u.lane;if((Dn&p)===p)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:p,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,l=r):c=c.next=h,we.lanes|=p,An|=p}u=u.next}while(u!==null&&u!==i);c===null?l=r:c.next=a,bt(r,t.memoizedState)||(We=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do i=o.lane,we.lanes|=i,An|=i,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function gl(e){var t=ct(),n=t.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(o!==null){n.pending=null;var l=o=o.next;do i=e(i,l.action),l=l.next;while(l!==o);bt(i,t.memoizedState)||(We=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Vh(){}function Bh(e,t){var n=we,r=ct(),o=t(),i=!bt(r.memoizedState,o);if(i&&(r.memoizedState=o,We=!0),r=r.queue,wc(Uh.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ie!==null&&Ie.memoizedState.tag&1){if(n.flags|=2048,Ns(9,Wh.bind(null,n,r,o,t),void 0,null),Pe===null)throw Error(K(349));Dn&30||Hh(n,t,o)}return o}function Hh(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Wh(e,t,n,r){t.value=n,t.getSnapshot=r,Yh(t)&&Xh(e)}function Uh(e,t,n){return n(function(){Yh(t)&&Xh(e)})}function Yh(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bt(e,n)}catch{return!0}}function Xh(e){var t=Wt(e,1);t!==null&&wt(t,e,1,-1)}function Uu(e){var t=St();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Cy.bind(null,we,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Qh(){return ct().memoizedState}function _o(e,t,n,r){var o=St();we.flags|=e,o.memoizedState=Ns(1|t,n,void 0,r===void 0?null:r)}function ki(e,t,n,r){var o=ct();r=r===void 0?null:r;var i=void 0;if(Ee!==null){var l=Ee.memoizedState;if(i=l.destroy,r!==null&&mc(r,l.deps)){o.memoizedState=Ns(t,n,i,r);return}}we.flags|=e,o.memoizedState=Ns(1|t,n,i,r)}function Yu(e,t){return _o(8390656,8,e,t)}function wc(e,t){return ki(2048,8,e,t)}function Gh(e,t){return ki(4,2,e,t)}function Kh(e,t){return ki(4,4,e,t)}function Zh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qh(e,t,n){return n=n!=null?n.concat([e]):null,ki(4,4,Zh.bind(null,t,e),n)}function bc(){}function Jh(e,t){var n=ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ep(e,t){var n=ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function tp(e,t,n){return Dn&21?(bt(n,t)||(n=ih(),we.lanes|=n,An|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=n)}function Sy(e,t){var n=he;he=n!==0&&4>n?n:4,e(!0);var r=hl.transition;hl.transition={};try{e(!1),t()}finally{he=n,hl.transition=r}}function np(){return ct().memoizedState}function ky(e,t,n){var r=hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rp(e))sp(t,n);else if(n=Fh(e,t,n,r),n!==null){var o=Oe();wt(n,e,r,o),op(n,t,r)}}function Cy(e,t,n){var r=hn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rp(e))sp(t,o);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var l=t.lastRenderedState,a=i(l,n);if(o.hasEagerState=!0,o.eagerState=a,bt(a,l)){var c=t.interleaved;c===null?(o.next=o,fc(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=Fh(e,t,o,r),n!==null&&(o=Oe(),wt(n,e,r,o),op(n,t,r))}}function rp(e){var t=e.alternate;return e===we||t!==null&&t===we}function sp(e,t){ts=ei=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function op(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qa(e,n)}}var ti={readContext:at,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},_y={readContext:at,useCallback:function(e,t){return St().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Yu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_o(4194308,4,Zh.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _o(4194308,4,e,t)},useInsertionEffect:function(e,t){return _o(4,2,e,t)},useMemo:function(e,t){var n=St();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=St();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ky.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=St();return e={current:e},t.memoizedState=e},useState:Uu,useDebugValue:bc,useDeferredValue:function(e){return St().memoizedState=e},useTransition:function(){var e=Uu(!1),t=e[0];return e=Sy.bind(null,e[1]),St().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,o=St();if(me){if(n===void 0)throw Error(K(407));n=n()}else{if(n=t(),Pe===null)throw Error(K(349));Dn&30||Hh(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Yu(Uh.bind(null,r,i,e),[e]),r.flags|=2048,Ns(9,Wh.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=St(),t=Pe.identifierPrefix;if(me){var n=zt,r=Ft;n=(r&~(1<<32-vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=ws++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=jy++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ey={readContext:at,useCallback:Jh,useContext:at,useEffect:wc,useImperativeHandle:qh,useInsertionEffect:Gh,useLayoutEffect:Kh,useMemo:ep,useReducer:pl,useRef:Qh,useState:function(){return pl(bs)},useDebugValue:bc,useDeferredValue:function(e){var t=ct();return tp(t,Ee.memoizedState,e)},useTransition:function(){var e=pl(bs)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Bh,useId:np,unstable_isNewReconciler:!1},My={readContext:at,useCallback:Jh,useContext:at,useEffect:wc,useImperativeHandle:qh,useInsertionEffect:Gh,useLayoutEffect:Kh,useMemo:ep,useReducer:gl,useRef:Qh,useState:function(){return gl(bs)},useDebugValue:bc,useDeferredValue:function(e){var t=ct();return Ee===null?t.memoizedState=e:tp(t,Ee.memoizedState,e)},useTransition:function(){var e=gl(bs)[0],t=ct().memoizedState;return[e,t]},useMutableSource:Vh,useSyncExternalStore:Bh,useId:np,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ca(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ci={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oe(),o=hn(e),i=Vt(r,o);i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,o),t!==null&&(wt(t,e,o,r),ko(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oe(),o=hn(e),i=Vt(r,o);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=dn(e,i,o),t!==null&&(wt(t,e,o,r),ko(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oe(),r=hn(e),o=Vt(n,r);o.tag=2,t!=null&&(o.callback=t),t=dn(e,o,r),t!==null&&(wt(t,e,r,n),ko(t,e,r))}};function Xu(e,t,n,r,o,i,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,l):t.prototype&&t.prototype.isPureReactComponent?!ps(n,r)||!ps(o,i):!0}function ip(e,t,n){var r=!1,o=xn,i=t.contextType;return typeof i=="object"&&i!==null?i=at(i):(o=Xe(t)?Tn:Fe.current,r=t.contextTypes,i=(r=r!=null)?pr(e,o):xn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ci,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function Qu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ci.enqueueReplaceState(t,t.state,null)}function ua(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},hc(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=at(i):(i=Xe(t)?Tn:Fe.current,o.context=pr(e,i)),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ca(e,t,i,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ci.enqueueReplaceState(o,o.state,null),qo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=rm(r),r=r.return;while(r);var o=n}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o,digest:null}}function xl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Iy=typeof WeakMap=="function"?WeakMap:Map;function lp(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ri||(ri=!0,ba=r),da(e,t)},n}function ap(e,t,n){n=Vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){da(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){da(e,t),typeof r!="function"&&(fn===null?fn=new Set([this]):fn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function Gu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Iy;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Wy.bind(null,e,t,n),t.then(e,e))}function Ku(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,dn(n,t,1))),n.lanes|=1),e)}var Py=Xt.ReactCurrentOwner,We=!1;function ze(e,t,n,r){t.child=e===null?Lh(t,null,n,r):xr(t,e.child,n,r)}function qu(e,t,n,r,o){n=n.render;var i=t.ref;return cr(t,o),r=yc(e,t,n,r,i,o),n=vc(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ut(e,t,o)):(me&&n&&ic(t),t.flags|=1,ze(e,t,r,o),t.child)}function Ju(e,t,n,r,o){if(e===null){var i=n.type;return typeof i=="function"&&!Mc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,cp(e,t,i,r,o)):(e=Po(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&o)){var l=i.memoizedProps;if(n=n.compare,n=n!==null?n:ps,n(l,r)&&e.ref===t.ref)return Ut(e,t,o)}return t.flags|=1,e=pn(i,r),e.ref=t.ref,e.return=t,t.child=e}function cp(e,t,n,r,o){if(e!==null){var i=e.memoizedProps;if(ps(i,r)&&e.ref===t.ref)if(We=!1,t.pendingProps=r=i,(e.lanes&o)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,Ut(e,t,o)}return fa(e,t,n,r,o)}function up(e,t,n){var r=t.pendingProps,o=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(nr,Ke),Ke|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pe(nr,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(nr,Ke),Ke|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,pe(nr,Ke),Ke|=r;return ze(e,t,o,n),t.child}function dp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fa(e,t,n,r,o){var i=Xe(n)?Tn:Fe.current;return i=pr(t,i),cr(t,o),n=yc(e,t,n,r,i,o),r=vc(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Ut(e,t,o)):(me&&r&&ic(t),t.flags|=1,ze(e,t,n,o),t.child)}function ed(e,t,n,r,o){if(Xe(n)){var i=!0;Xo(t)}else i=!1;if(cr(t,o),t.stateNode===null)Eo(e,t),ip(t,n,r),ua(t,n,r,o),r=!0;else if(e===null){var l=t.stateNode,a=t.memoizedProps;l.props=a;var c=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=at(u):(u=Xe(n)?Tn:Fe.current,u=pr(t,u));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function";h||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Qu(t,l,r,u),en=!1;var d=t.memoizedState;l.state=d,qo(t,r,l,o),c=t.memoizedState,a!==r||d!==c||Ye.current||en?(typeof p=="function"&&(ca(t,n,p,r),c=t.memoizedState),(a=en||Xu(t,n,a,r,d,c,u))?(h||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),l.props=r,l.state=c,l.context=u,r=a):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,zh(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ft(t.type,a),l.props=u,h=t.pendingProps,d=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=at(c):(c=Xe(n)?Tn:Fe.current,c=pr(t,c));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(a!==h||d!==c)&&Qu(t,l,r,c),en=!1,d=t.memoizedState,l.state=d,qo(t,r,l,o);var y=t.memoizedState;a!==h||d!==y||Ye.current||en?(typeof v=="function"&&(ca(t,n,v,r),y=t.memoizedState),(u=en||Xu(t,n,u,r,d,y,c)||!1)?(p||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,y,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),l.props=r,l.state=y,l.context=c,r=u):(typeof l.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ha(e,t,n,r,i,o)}function ha(e,t,n,r,o,i){dp(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return o&&zu(t,n,!1),Ut(e,t,i);r=t.stateNode,Py.current=t;var a=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=xr(t,e.child,null,i),t.child=xr(t,null,a,i)):ze(e,t,a,i),t.memoizedState=r.state,o&&zu(t,n,!0),t.child}function fp(e){var t=e.stateNode;t.pendingContext?Fu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fu(e,t.context,!1),pc(e,t.containerInfo)}function td(e,t,n,r,o){return gr(),ac(o),t.flags|=256,ze(e,t,n,r),t.child}var pa={dehydrated:null,treeContext:null,retryLane:0};function ga(e){return{baseLanes:e,cachePool:null,transitions:null}}function hp(e,t,n){var r=t.pendingProps,o=ve.current,i=!1,l=(t.flags&128)!==0,a;if((a=l)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),pe(ve,o&1),e===null)return la(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,i?(r=t.mode,i=t.child,l={mode:"hidden",children:l},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=l):i=Mi(l,r,0,null),e=Mn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ga(n),t.memoizedState=pa,e):Nc(t,l));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Ty(e,t,l,r,a,o,n);if(i){i=r.fallback,l=t.mode,o=e.child,a=o.sibling;var c={mode:"hidden",children:r.children};return!(l&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=pn(o,c),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=pn(a,i):(i=Mn(i,l,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,l=e.child.memoizedState,l=l===null?ga(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~n,t.memoizedState=pa,r}return i=e.child,e=i.sibling,r=pn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Nc(e,t){return t=Mi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function io(e,t,n,r){return r!==null&&ac(r),xr(t,e.child,null,n),e=Nc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ty(e,t,n,r,o,i,l){if(n)return t.flags&256?(t.flags&=-257,r=xl(Error(K(422))),io(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=Mi({mode:"visible",children:r.children},o,0,null),i=Mn(i,o,l,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&xr(t,e.child,null,l),t.child.memoizedState=ga(l),t.memoizedState=pa,i);if(!(t.mode&1))return io(e,t,l,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(K(419)),r=xl(i,r,void 0),io(e,t,l,r)}if(a=(l&e.childLanes)!==0,We||a){if(r=Pe,r!==null){switch(l&-l){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|l)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,Wt(e,o),wt(r,e,o,-1))}return Ec(),r=xl(Error(K(421))),io(e,t,l,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=Uy.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,qe=un(o.nextSibling),Je=t,me=!0,gt=null,e!==null&&(st[ot++]=Ft,st[ot++]=zt,st[ot++]=$n,Ft=e.id,zt=e.overflow,$n=t),t=Nc(t,r.children),t.flags|=4096,t)}function nd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),aa(e.return,t,n)}function ml(e,t,n,r,o){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function pp(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ze(e,t,r.children,n),r=ve.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nd(e,n,t);else if(e.tag===19)nd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pe(ve,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Jo(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ml(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Jo(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ml(t,!0,n,null,i);break;case"together":ml(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Eo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ut(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(K(153));if(t.child!==null){for(e=t.child,n=pn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $y(e,t,n){switch(t.tag){case 3:fp(t),gr();break;case 5:Oh(t);break;case 1:Xe(t.type)&&Xo(t);break;case 4:pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;pe(Ko,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pe(ve,ve.current&1),t.flags|=128,null):n&t.child.childLanes?hp(e,t,n):(pe(ve,ve.current&1),e=Ut(e,t,n),e!==null?e.sibling:null);pe(ve,ve.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return pp(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),pe(ve,ve.current),r)break;return null;case 22:case 23:return t.lanes=0,up(e,t,n)}return Ut(e,t,n)}var gp,xa,xp,mp;gp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xa=function(){};xp=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Cn(Et.current);var i=null;switch(n){case"input":o=Fl(e,o),r=Fl(e,r),i=[];break;case"select":o=be({},o,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":o=Vl(e,o),r=Vl(e,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Uo)}Hl(n,r);var l;n=null;for(u in o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&o[u]!=null)if(u==="style"){var a=o[u];for(l in a)a.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ls.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=o!=null?o[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(l in a)!a.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&a[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ls.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ge("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};mp=function(e,t,n,r){n!==r&&(t.flags|=4)};function Or(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Dy(e,t,n){var r=t.pendingProps;switch(lc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return Xe(t.type)&&Yo(),Re(t),null;case 3:return r=t.stateNode,mr(),xe(Ye),xe(Fe),xc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(so(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gt!==null&&(Sa(gt),gt=null))),xa(e,t),Re(t),null;case 5:gc(t);var o=Cn(vs.current);if(n=t.type,e!==null&&t.stateNode!=null)xp(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(K(166));return Re(t),null}if(e=Cn(Et.current),so(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ct]=t,r[ms]=i,e=(t.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(o=0;o<Xr.length;o++)ge(Xr[o],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":du(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":hu(r,i),ge("invalid",r)}Hl(n,i),o=null;for(var l in i)if(i.hasOwnProperty(l)){var a=i[l];l==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ro(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ro(r.textContent,a,e),o=["children",""+a]):ls.hasOwnProperty(l)&&a!=null&&l==="onScroll"&&ge("scroll",r)}switch(n){case"input":Gs(r),fu(r,i,!0);break;case"textarea":Gs(r),pu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Uo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Uf(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[Ct]=t,e[ms]=r,gp(e,t,!1,!1),t.stateNode=e;e:{switch(l=Wl(n,r),n){case"dialog":ge("cancel",e),ge("close",e),o=r;break;case"iframe":case"object":case"embed":ge("load",e),o=r;break;case"video":case"audio":for(o=0;o<Xr.length;o++)ge(Xr[o],e);o=r;break;case"source":ge("error",e),o=r;break;case"img":case"image":case"link":ge("error",e),ge("load",e),o=r;break;case"details":ge("toggle",e),o=r;break;case"input":du(e,r),o=Fl(e,r),ge("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=be({},r,{value:void 0}),ge("invalid",e);break;case"textarea":hu(e,r),o=Vl(e,r),ge("invalid",e);break;default:o=r}Hl(n,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Qf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Yf(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&as(e,c):typeof c=="number"&&as(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ls.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ge("scroll",e):c!=null&&Ya(e,i,c,l))}switch(n){case"input":Gs(e),fu(e,r,!1);break;case"textarea":Gs(e),pu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?or(e,!!r.multiple,i,!1):r.defaultValue!=null&&or(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Uo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)mp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(K(166));if(n=Cn(vs.current),Cn(Et.current),so(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ct]=t,(i=r.nodeValue!==n)&&(e=Je,e!==null))switch(e.tag){case 3:ro(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ro(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=t,t.stateNode=r}return Re(t),null;case 13:if(xe(ve),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&qe!==null&&t.mode&1&&!(t.flags&128))Ah(),gr(),t.flags|=98560,i=!1;else if(i=so(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(K(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(K(317));i[Ct]=t}else gr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),i=!1}else gt!==null&&(Sa(gt),gt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ve.current&1?Me===0&&(Me=3):Ec())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return mr(),xa(e,t),e===null&&gs(t.stateNode.containerInfo),Re(t),null;case 10:return dc(t.type._context),Re(t),null;case 17:return Xe(t.type)&&Yo(),Re(t),null;case 19:if(xe(ve),i=t.memoizedState,i===null)return Re(t),null;if(r=(t.flags&128)!==0,l=i.rendering,l===null)if(r)Or(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Jo(e),l!==null){for(t.flags|=128,Or(i,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,l=i.alternate,l===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pe(ve,ve.current&1|2),t.child}e=e.sibling}i.tail!==null&&ke()>vr&&(t.flags|=128,r=!0,Or(i,!1),t.lanes=4194304)}else{if(!r)if(e=Jo(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Or(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!me)return Re(t),null}else 2*ke()-i.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,Or(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(n=i.last,n!==null?n.sibling=l:t.child=l,i.last=l)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ke(),t.sibling=null,n=ve.current,pe(ve,r?n&1|2:n&1),t):(Re(t),null);case 22:case 23:return _c(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ke&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(K(156,t.tag))}function Ay(e,t){switch(lc(t),t.tag){case 1:return Xe(t.type)&&Yo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return mr(),xe(Ye),xe(Fe),xc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gc(t),null;case 13:if(xe(ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(K(340));gr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(ve),null;case 4:return mr(),null;case 10:return dc(t.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var lo=!1,Le=!1,Ry=typeof WeakSet=="function"?WeakSet:Set,re=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(e,t,r)}else n.current=null}function ma(e,t,n){try{n()}catch(r){je(e,t,r)}}var rd=!1;function Ly(e,t){if(ea=Bo,e=Nh(),oc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var l=0,a=-1,c=-1,u=0,p=0,h=e,d=null;t:for(;;){for(var v;h!==n||o!==0&&h.nodeType!==3||(a=l+o),h!==i||r!==0&&h.nodeType!==3||(c=l+r),h.nodeType===3&&(l+=h.nodeValue.length),(v=h.firstChild)!==null;)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++u===o&&(a=l),d===i&&++p===r&&(c=l),(v=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Bo=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,b=y.memoizedState,f=t.stateNode,m=f.getSnapshotBeforeUpdate(t.elementType===t.type?x:ft(t.type,x),b);f.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(N){je(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return y=rd,rd=!1,y}function ns(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,i!==void 0&&ma(t,n,i)}o=o.next}while(o!==r)}}function _i(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ya(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yp(e){var t=e.alternate;t!==null&&(e.alternate=null,yp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[ms],delete t[sa],delete t[vy],delete t[wy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function vp(e){return e.tag===5||e.tag===3||e.tag===4}function sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function va(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Uo));else if(r!==4&&(e=e.child,e!==null))for(va(e,t,n),e=e.sibling;e!==null;)va(e,t,n),e=e.sibling}function wa(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(wa(e,t,n),e=e.sibling;e!==null;)wa(e,t,n),e=e.sibling}var Te=null,ht=!1;function Kt(e,t,n){for(n=n.child;n!==null;)wp(e,t,n),n=n.sibling}function wp(e,t,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(vi,n)}catch{}switch(n.tag){case 5:Le||tr(n,t);case 6:var r=Te,o=ht;Te=null,Kt(e,t,n),Te=r,ht=o,Te!==null&&(ht?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(ht?(e=Te,n=n.stateNode,e.nodeType===8?ul(e.parentNode,n):e.nodeType===1&&ul(e,n),fs(e)):ul(Te,n.stateNode));break;case 4:r=Te,o=ht,Te=n.stateNode.containerInfo,ht=!0,Kt(e,t,n),Te=r,ht=o;break;case 0:case 11:case 14:case 15:if(!Le&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,l=i.destroy;i=i.tag,l!==void 0&&(i&2||i&4)&&ma(n,t,l),o=o.next}while(o!==r)}Kt(e,t,n);break;case 1:if(!Le&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){je(n,t,a)}Kt(e,t,n);break;case 21:Kt(e,t,n);break;case 22:n.mode&1?(Le=(r=Le)||n.memoizedState!==null,Kt(e,t,n),Le=r):Kt(e,t,n);break;default:Kt(e,t,n)}}function od(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ry),t.forEach(function(r){var o=Yy.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var i=e,l=t,a=l;e:for(;a!==null;){switch(a.tag){case 5:Te=a.stateNode,ht=!1;break e;case 3:Te=a.stateNode.containerInfo,ht=!0;break e;case 4:Te=a.stateNode.containerInfo,ht=!0;break e}a=a.return}if(Te===null)throw Error(K(160));wp(i,l,o),Te=null,ht=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(u){je(o,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)bp(t,e),t=t.sibling}function bp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),jt(e),r&4){try{ns(3,e,e.return),_i(3,e)}catch(x){je(e,e.return,x)}try{ns(5,e,e.return)}catch(x){je(e,e.return,x)}}break;case 1:dt(t,e),jt(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(dt(t,e),jt(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var o=e.stateNode;try{as(o,"")}catch(x){je(e,e.return,x)}}if(r&4&&(o=e.stateNode,o!=null)){var i=e.memoizedProps,l=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Hf(o,i),Wl(a,l);var u=Wl(a,i);for(l=0;l<c.length;l+=2){var p=c[l],h=c[l+1];p==="style"?Qf(o,h):p==="dangerouslySetInnerHTML"?Yf(o,h):p==="children"?as(o,h):Ya(o,p,h,u)}switch(a){case"input":zl(o,i);break;case"textarea":Wf(o,i);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?or(o,!!i.multiple,v,!1):d!==!!i.multiple&&(i.defaultValue!=null?or(o,!!i.multiple,i.defaultValue,!0):or(o,!!i.multiple,i.multiple?[]:"",!1))}o[ms]=i}catch(x){je(e,e.return,x)}}break;case 6:if(dt(t,e),jt(e),r&4){if(e.stateNode===null)throw Error(K(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(x){je(e,e.return,x)}}break;case 3:if(dt(t,e),jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fs(t.containerInfo)}catch(x){je(e,e.return,x)}break;case 4:dt(t,e),jt(e);break;case 13:dt(t,e),jt(e),o=e.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(kc=ke())),r&4&&od(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(Le=(u=Le)||p,dt(t,e),Le=u):dt(t,e),jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!p&&e.mode&1)for(re=e,p=e.child;p!==null;){for(h=re=p;re!==null;){switch(d=re,v=d.child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:tr(d,d.return);var y=d.stateNode;if(typeof y.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(x){je(r,n,x)}}break;case 5:tr(d,d.return);break;case 22:if(d.memoizedState!==null){ld(h);continue}}v!==null?(v.return=d,re=v):ld(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{o=h.stateNode,u?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Xf("display",l))}catch(x){je(e,e.return,x)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){je(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:dt(t,e),jt(e),r&4&&od(e);break;case 21:break;default:dt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(vp(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(as(o,""),r.flags&=-33);var i=sd(e);wa(e,i,o);break;case 3:case 4:var l=r.stateNode.containerInfo,a=sd(e);va(e,a,l);break;default:throw Error(K(161))}}catch(c){je(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Fy(e,t,n){re=e,Np(e)}function Np(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var o=re,i=o.child;if(o.tag===22&&r){var l=o.memoizedState!==null||lo;if(!l){var a=o.alternate,c=a!==null&&a.memoizedState!==null||Le;a=lo;var u=Le;if(lo=l,(Le=c)&&!u)for(re=o;re!==null;)l=re,c=l.child,l.tag===22&&l.memoizedState!==null?ad(o):c!==null?(c.return=l,re=c):ad(o);for(;i!==null;)re=i,Np(i),i=i.sibling;re=o,lo=a,Le=u}id(e)}else o.subtreeFlags&8772&&i!==null?(i.return=o,re=i):id(e)}}function id(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Le||_i(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Le)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ft(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wu(t,i,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wu(t,l,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var p=u.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&fs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Le||t.flags&512&&ya(t)}catch(d){je(t,t.return,d)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function ld(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function ad(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{_i(4,t)}catch(c){je(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){je(t,o,c)}}var i=t.return;try{ya(t)}catch(c){je(t,i,c)}break;case 5:var l=t.return;try{ya(t)}catch(c){je(t,l,c)}}}catch(c){je(t,t.return,c)}if(t===e){re=null;break}var a=t.sibling;if(a!==null){a.return=t.return,re=a;break}re=t.return}}var zy=Math.ceil,ni=Xt.ReactCurrentDispatcher,jc=Xt.ReactCurrentOwner,lt=Xt.ReactCurrentBatchConfig,de=0,Pe=null,Ce=null,$e=0,Ke=0,nr=yn(0),Me=0,js=null,An=0,Ei=0,Sc=0,rs=null,He=null,kc=0,vr=1/0,Rt=null,ri=!1,ba=null,fn=null,ao=!1,on=null,si=0,ss=0,Na=null,Mo=-1,Io=0;function Oe(){return de&6?ke():Mo!==-1?Mo:Mo=ke()}function hn(e){return e.mode&1?de&2&&$e!==0?$e&-$e:Ny.transition!==null?(Io===0&&(Io=ih()),Io):(e=he,e!==0||(e=window.event,e=e===void 0?16:hh(e.type)),e):1}function wt(e,t,n,r){if(50<ss)throw ss=0,Na=null,Error(K(185));As(e,n,r),(!(de&2)||e!==Pe)&&(e===Pe&&(!(de&2)&&(Ei|=n),Me===4&&nn(e,$e)),Qe(e,r),n===1&&de===0&&!(t.mode&1)&&(vr=ke()+500,Si&&vn()))}function Qe(e,t){var n=e.callbackNode;Nm(e,t);var r=Vo(e,e===Pe?$e:0);if(r===0)n!==null&&mu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mu(n),t===1)e.tag===0?by(cd.bind(null,e)):Th(cd.bind(null,e)),my(function(){!(de&6)&&vn()}),n=null;else{switch(lh(r)){case 1:n=Za;break;case 4:n=sh;break;case 16:n=Oo;break;case 536870912:n=oh;break;default:n=Oo}n=Ip(n,jp.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function jp(e,t){if(Mo=-1,Io=0,de&6)throw Error(K(327));var n=e.callbackNode;if(ur()&&e.callbackNode!==n)return null;var r=Vo(e,e===Pe?$e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=oi(e,r);else{t=r;var o=de;de|=2;var i=kp();(Pe!==e||$e!==t)&&(Rt=null,vr=ke()+500,En(e,t));do try{By();break}catch(a){Sp(e,a)}while(!0);uc(),ni.current=i,de=o,Ce!==null?t=0:(Pe=null,$e=0,t=Me)}if(t!==0){if(t===2&&(o=Gl(e),o!==0&&(r=o,t=ja(e,o))),t===1)throw n=js,En(e,0),nn(e,r),Qe(e,ke()),n;if(t===6)nn(e,r);else{if(o=e.current.alternate,!(r&30)&&!Oy(o)&&(t=oi(e,r),t===2&&(i=Gl(e),i!==0&&(r=i,t=ja(e,i))),t===1))throw n=js,En(e,0),nn(e,r),Qe(e,ke()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(K(345));case 2:Nn(e,He,Rt);break;case 3:if(nn(e,r),(r&130023424)===r&&(t=kc+500-ke(),10<t)){if(Vo(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Oe(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ra(Nn.bind(null,e,He,Rt),t);break}Nn(e,He,Rt);break;case 4:if(nn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var l=31-vt(r);i=1<<l,l=t[l],l>o&&(o=l),r&=~i}if(r=o,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zy(r/1960))-r,10<r){e.timeoutHandle=ra(Nn.bind(null,e,He,Rt),r);break}Nn(e,He,Rt);break;case 5:Nn(e,He,Rt);break;default:throw Error(K(329))}}}return Qe(e,ke()),e.callbackNode===n?jp.bind(null,e):null}function ja(e,t){var n=rs;return e.current.memoizedState.isDehydrated&&(En(e,t).flags|=256),e=oi(e,t),e!==2&&(t=He,He=n,t!==null&&Sa(t)),e}function Sa(e){He===null?He=e:He.push.apply(He,e)}function Oy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!bt(i(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nn(e,t){for(t&=~Sc,t&=~Ei,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vt(t),r=1<<n;e[n]=-1,t&=~r}}function cd(e){if(de&6)throw Error(K(327));ur();var t=Vo(e,0);if(!(t&1))return Qe(e,ke()),null;var n=oi(e,t);if(e.tag!==0&&n===2){var r=Gl(e);r!==0&&(t=r,n=ja(e,r))}if(n===1)throw n=js,En(e,0),nn(e,t),Qe(e,ke()),n;if(n===6)throw Error(K(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nn(e,He,Rt),Qe(e,ke()),null}function Cc(e,t){var n=de;de|=1;try{return e(t)}finally{de=n,de===0&&(vr=ke()+500,Si&&vn())}}function Rn(e){on!==null&&on.tag===0&&!(de&6)&&ur();var t=de;de|=1;var n=lt.transition,r=he;try{if(lt.transition=null,he=1,e)return e()}finally{he=r,lt.transition=n,de=t,!(de&6)&&vn()}}function _c(){Ke=nr.current,xe(nr)}function En(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,xy(n)),Ce!==null)for(n=Ce.return;n!==null;){var r=n;switch(lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Yo();break;case 3:mr(),xe(Ye),xe(Fe),xc();break;case 5:gc(r);break;case 4:mr();break;case 13:xe(ve);break;case 19:xe(ve);break;case 10:dc(r.type._context);break;case 22:case 23:_c()}n=n.return}if(Pe=e,Ce=e=pn(e.current,null),$e=Ke=t,Me=0,js=null,Sc=Ei=An=0,He=rs=null,kn!==null){for(t=0;t<kn.length;t++)if(n=kn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,i=n.pending;if(i!==null){var l=i.next;i.next=o,r.next=l}n.pending=r}kn=null}return e}function Sp(e,t){do{var n=Ce;try{if(uc(),Co.current=ti,ei){for(var r=we.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ei=!1}if(Dn=0,Ie=Ee=we=null,ts=!1,ws=0,jc.current=null,n===null||n.return===null){Me=1,js=t,Ce=null;break}e:{var i=e,l=n.return,a=n,c=t;if(t=$e,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,p=a,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var d=p.alternate;d?(p.updateQueue=d.updateQueue,p.memoizedState=d.memoizedState,p.lanes=d.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=Ku(l);if(v!==null){v.flags&=-257,Zu(v,l,a,i,t),v.mode&1&&Gu(i,u,t),t=v,c=u;var y=t.updateQueue;if(y===null){var x=new Set;x.add(c),t.updateQueue=x}else y.add(c);break e}else{if(!(t&1)){Gu(i,u,t),Ec();break e}c=Error(K(426))}}else if(me&&a.mode&1){var b=Ku(l);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Zu(b,l,a,i,t),ac(yr(c,a));break e}}i=c=yr(c,a),Me!==4&&(Me=2),rs===null?rs=[i]:rs.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=lp(i,c,t);Hu(i,f);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(fn===null||!fn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=ap(i,a,t);Hu(i,N);break e}}i=i.return}while(i!==null)}_p(n)}catch(S){t=S,Ce===n&&n!==null&&(Ce=n=n.return);continue}break}while(!0)}function kp(){var e=ni.current;return ni.current=ti,e===null?ti:e}function Ec(){(Me===0||Me===3||Me===2)&&(Me=4),Pe===null||!(An&268435455)&&!(Ei&268435455)||nn(Pe,$e)}function oi(e,t){var n=de;de|=2;var r=kp();(Pe!==e||$e!==t)&&(Rt=null,En(e,t));do try{Vy();break}catch(o){Sp(e,o)}while(!0);if(uc(),de=n,ni.current=r,Ce!==null)throw Error(K(261));return Pe=null,$e=0,Me}function Vy(){for(;Ce!==null;)Cp(Ce)}function By(){for(;Ce!==null&&!hm();)Cp(Ce)}function Cp(e){var t=Mp(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?_p(e):Ce=t,jc.current=null}function _p(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ay(n,t),n!==null){n.flags&=32767,Ce=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Ce=null;return}}else if(n=Dy(n,t,Ke),n!==null){Ce=n;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Me===0&&(Me=5)}function Nn(e,t,n){var r=he,o=lt.transition;try{lt.transition=null,he=1,Hy(e,t,n,r)}finally{lt.transition=o,he=r}return null}function Hy(e,t,n,r){do ur();while(on!==null);if(de&6)throw Error(K(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(K(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(jm(e,i),e===Pe&&(Ce=Pe=null,$e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ao||(ao=!0,Ip(Oo,function(){return ur(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var l=he;he=1;var a=de;de|=4,jc.current=null,Ly(e,n),bp(n,e),cy(ta),Bo=!!ea,ta=ea=null,e.current=n,Fy(n),pm(),de=a,he=l,lt.transition=i}else e.current=n;if(ao&&(ao=!1,on=e,si=o),i=e.pendingLanes,i===0&&(fn=null),mm(n.stateNode),Qe(e,ke()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ri)throw ri=!1,e=ba,ba=null,e;return si&1&&e.tag!==0&&ur(),i=e.pendingLanes,i&1?e===Na?ss++:(ss=0,Na=e):ss=0,vn(),null}function ur(){if(on!==null){var e=lh(si),t=lt.transition,n=he;try{if(lt.transition=null,he=16>e?16:e,on===null)var r=!1;else{if(e=on,on=null,si=0,de&6)throw Error(K(331));var o=de;for(de|=4,re=e.current;re!==null;){var i=re,l=i.child;if(re.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(re=u;re!==null;){var p=re;switch(p.tag){case 0:case 11:case 15:ns(8,p,i)}var h=p.child;if(h!==null)h.return=p,re=h;else for(;re!==null;){p=re;var d=p.sibling,v=p.return;if(yp(p),p===u){re=null;break}if(d!==null){d.return=v,re=d;break}re=v}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}re=i}}if(i.subtreeFlags&2064&&l!==null)l.return=i,re=l;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ns(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,re=f;break e}re=i.return}}var m=e.current;for(re=m;re!==null;){l=re;var g=l.child;if(l.subtreeFlags&2064&&g!==null)g.return=l,re=g;else e:for(l=m;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:_i(9,a)}}catch(S){je(a,a.return,S)}if(a===l){re=null;break e}var N=a.sibling;if(N!==null){N.return=a.return,re=N;break e}re=a.return}}if(de=o,vn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(vi,e)}catch{}r=!0}return r}finally{he=n,lt.transition=t}}return!1}function ud(e,t,n){t=yr(n,t),t=lp(e,t,1),e=dn(e,t,1),t=Oe(),e!==null&&(As(e,1,t),Qe(e,t))}function je(e,t,n){if(e.tag===3)ud(e,e,n);else for(;t!==null;){if(t.tag===3){ud(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(fn===null||!fn.has(r))){e=yr(n,e),e=ap(t,e,1),t=dn(t,e,1),e=Oe(),t!==null&&(As(t,1,e),Qe(t,e));break}}t=t.return}}function Wy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Oe(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&($e&n)===n&&(Me===4||Me===3&&($e&130023424)===$e&&500>ke()-kc?En(e,0):Sc|=n),Qe(e,t)}function Ep(e,t){t===0&&(e.mode&1?(t=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):t=1);var n=Oe();e=Wt(e,t),e!==null&&(As(e,t,n),Qe(e,n))}function Uy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ep(e,n)}function Yy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(t),Ep(e,n)}var Mp;Mp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ye.current)We=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return We=!1,$y(e,t,n);We=!!(e.flags&131072)}else We=!1,me&&t.flags&1048576&&$h(t,Go,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Eo(e,t),e=t.pendingProps;var o=pr(t,Fe.current);cr(t,n),o=yc(null,t,r,e,o,n);var i=vc();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xe(r)?(i=!0,Xo(t)):i=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,hc(t),o.updater=Ci,t.stateNode=o,o._reactInternals=t,ua(t,r,e,n),t=ha(null,t,r,!0,i,n)):(t.tag=0,me&&i&&ic(t),ze(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Eo(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Qy(r),e=ft(r,e),o){case 0:t=fa(null,t,r,e,n);break e;case 1:t=ed(null,t,r,e,n);break e;case 11:t=qu(null,t,r,e,n);break e;case 14:t=Ju(null,t,r,ft(r.type,e),n);break e}throw Error(K(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ft(r,o),fa(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ft(r,o),ed(e,t,r,o,n);case 3:e:{if(fp(t),e===null)throw Error(K(387));r=t.pendingProps,i=t.memoizedState,o=i.element,zh(e,t),qo(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){o=yr(Error(K(423)),t),t=td(e,t,r,n,o);break e}else if(r!==o){o=yr(Error(K(424)),t),t=td(e,t,r,n,o);break e}else for(qe=un(t.stateNode.containerInfo.firstChild),Je=t,me=!0,gt=null,n=Lh(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),r===o){t=Ut(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return Oh(t),e===null&&la(t),r=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,l=o.children,na(r,o)?l=null:i!==null&&na(r,i)&&(t.flags|=32),dp(e,t),ze(e,t,l,n),t.child;case 6:return e===null&&la(t),null;case 13:return hp(e,t,n);case 4:return pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xr(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ft(r,o),qu(e,t,r,o,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,l=o.value,pe(Ko,r._currentValue),r._currentValue=l,i!==null)if(bt(i.value,l)){if(i.children===o.children&&!Ye.current){t=Ut(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){l=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var p=u.pending;p===null?c.next=c:(c.next=p.next,p.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),aa(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)l=i.type===t.type?null:i.child;else if(i.tag===18){if(l=i.return,l===null)throw Error(K(341));l.lanes|=n,a=l.alternate,a!==null&&(a.lanes|=n),aa(l,n,t),l=i.sibling}else l=i.child;if(l!==null)l.return=i;else for(l=i;l!==null;){if(l===t){l=null;break}if(i=l.sibling,i!==null){i.return=l.return,l=i;break}l=l.return}i=l}ze(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,cr(t,n),o=at(o),r=r(o),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,o=ft(r,t.pendingProps),o=ft(r.type,o),Ju(e,t,r,o,n);case 15:return cp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ft(r,o),Eo(e,t),t.tag=1,Xe(r)?(e=!0,Xo(t)):e=!1,cr(t,n),ip(t,r,o),ua(t,r,o,n),ha(null,t,r,!0,e,n);case 19:return pp(e,t,n);case 22:return up(e,t,n)}throw Error(K(156,t.tag))};function Ip(e,t){return rh(e,t)}function Xy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function it(e,t,n,r){return new Xy(e,t,n,r)}function Mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qy(e){if(typeof e=="function")return Mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Qa)return 11;if(e===Ga)return 14}return 2}function pn(e,t){var n=e.alternate;return n===null?(n=it(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Po(e,t,n,r,o,i){var l=2;if(r=e,typeof e=="function")Mc(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Yn:return Mn(n.children,o,i,t);case Xa:l=8,o|=8;break;case Dl:return e=it(12,n,t,o|2),e.elementType=Dl,e.lanes=i,e;case Al:return e=it(13,n,t,o),e.elementType=Al,e.lanes=i,e;case Rl:return e=it(19,n,t,o),e.elementType=Rl,e.lanes=i,e;case Of:return Mi(n,o,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ff:l=10;break e;case zf:l=9;break e;case Qa:l=11;break e;case Ga:l=14;break e;case Jt:l=16,r=null;break e}throw Error(K(130,e==null?e:typeof e,""))}return t=it(l,n,t,o),t.elementType=e,t.type=r,t.lanes=i,t}function Mn(e,t,n,r){return e=it(7,e,r,t),e.lanes=n,e}function Mi(e,t,n,r){return e=it(22,e,r,t),e.elementType=Of,e.lanes=n,e.stateNode={isHidden:!1},e}function yl(e,t,n){return e=it(6,e,null,t),e.lanes=n,e}function vl(e,t,n){return t=it(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Gy(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ji(0),this.expirationTimes=Ji(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Ic(e,t,n,r,o,i,l,a,c){return e=new Gy(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=it(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hc(i),e}function Ky(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Un,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pp(e){if(!e)return xn;e=e._reactInternals;e:{if(Vn(e)!==e||e.tag!==1)throw Error(K(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(K(171))}if(e.tag===1){var n=e.type;if(Xe(n))return Ph(e,n,t)}return t}function Tp(e,t,n,r,o,i,l,a,c){return e=Ic(n,r,!0,e,o,i,l,a,c),e.context=Pp(null),n=e.current,r=Oe(),o=hn(n),i=Vt(r,o),i.callback=t??null,dn(n,i,o),e.current.lanes=o,As(e,o,r),Qe(e,r),e}function Ii(e,t,n,r){var o=t.current,i=Oe(),l=hn(o);return n=Pp(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(i,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=dn(o,t,l),e!==null&&(wt(e,o,l,i),ko(e,o,l)),l}function ii(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function dd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Pc(e,t){dd(e,t),(e=e.alternate)&&dd(e,t)}function Zy(){return null}var $p=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tc(e){this._internalRoot=e}Pi.prototype.render=Tc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(K(409));Ii(e,t,null,null)};Pi.prototype.unmount=Tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rn(function(){Ii(null,e,null,null)}),t[Ht]=null}};function Pi(e){this._internalRoot=e}Pi.prototype.unstable_scheduleHydration=function(e){if(e){var t=uh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tn.length&&t!==0&&t<tn[n].priority;n++);tn.splice(n,0,e),n===0&&fh(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ti(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fd(){}function qy(e,t,n,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var u=ii(l);i.call(u)}}var l=Tp(t,r,e,0,null,!1,!1,"",fd);return e._reactRootContainer=l,e[Ht]=l.current,gs(e.nodeType===8?e.parentNode:e),Rn(),l}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var u=ii(c);a.call(u)}}var c=Ic(e,0,!1,null,null,!1,!1,"",fd);return e._reactRootContainer=c,e[Ht]=c.current,gs(e.nodeType===8?e.parentNode:e),Rn(function(){Ii(t,c,n,r)}),c}function $i(e,t,n,r,o){var i=n._reactRootContainer;if(i){var l=i;if(typeof o=="function"){var a=o;o=function(){var c=ii(l);a.call(c)}}Ii(t,l,e,o)}else l=qy(n,t,e,o,r);return ii(l)}ah=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);n!==0&&(qa(t,n|1),Qe(t,ke()),!(de&6)&&(vr=ke()+500,vn()))}break;case 13:Rn(function(){var r=Wt(e,1);if(r!==null){var o=Oe();wt(r,e,1,o)}}),Pc(e,1)}};Ja=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var n=Oe();wt(t,e,134217728,n)}Pc(e,134217728)}};ch=function(e){if(e.tag===13){var t=hn(e),n=Wt(e,t);if(n!==null){var r=Oe();wt(n,e,t,r)}Pc(e,t)}};uh=function(){return he};dh=function(e,t){var n=he;try{return he=e,t()}finally{he=n}};Yl=function(e,t,n){switch(t){case"input":if(zl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ji(r);if(!o)throw Error(K(90));Bf(r),zl(r,o)}}}break;case"textarea":Wf(e,n);break;case"select":t=n.value,t!=null&&or(e,!!n.multiple,t,!1)}};Zf=Cc;qf=Rn;var Jy={usingClientEntryPoint:!1,Events:[Ls,Kn,ji,Gf,Kf,Cc]},Vr={findFiberByHostInstance:Sn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ev={bundleType:Vr.bundleType,version:Vr.version,rendererPackageName:Vr.rendererPackageName,rendererConfig:Vr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=th(e),e===null?null:e.stateNode},findFiberByHostInstance:Vr.findFiberByHostInstance||Zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!co.isDisabled&&co.supportsFiber)try{vi=co.inject(ev),_t=co}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jy;nt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(t))throw Error(K(200));return Ky(e,t,null,n)};nt.createRoot=function(e,t){if(!$c(e))throw Error(K(299));var n=!1,r="",o=$p;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=Ic(e,1,!1,null,null,n,!1,r,o),e[Ht]=t.current,gs(e.nodeType===8?e.parentNode:e),new Tc(t)};nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(K(188)):(e=Object.keys(e).join(","),Error(K(268,e)));return e=th(t),e=e===null?null:e.stateNode,e};nt.flushSync=function(e){return Rn(e)};nt.hydrate=function(e,t,n){if(!Ti(t))throw Error(K(200));return $i(null,e,t,!0,n)};nt.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,o=!1,i="",l=$p;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=Tp(t,null,e,1,n??null,o,!1,i,l),e[Ht]=t.current,gs(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Pi(t)};nt.render=function(e,t,n){if(!Ti(t))throw Error(K(200));return $i(null,e,t,!1,n)};nt.unmountComponentAtNode=function(e){if(!Ti(e))throw Error(K(40));return e._reactRootContainer?(Rn(function(){$i(null,null,e,!1,function(){e._reactRootContainer=null,e[Ht]=null})}),!0):!1};nt.unstable_batchedUpdates=Cc;nt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ti(n))throw Error(K(200));if(e==null||e._reactInternals===void 0)throw Error(K(38));return $i(e,t,n,!1,r)};nt.version="18.3.1-next-f1338f8080-20240426";function Dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dp)}catch(e){console.error(e)}}Dp(),Df.exports=nt;var Ap=Df.exports,hd=Ap;Tl.createRoot=hd.createRoot,Tl.hydrateRoot=hd.hydrateRoot;function _e(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=_e(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var tv={value:()=>{}};function Di(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new To(n)}function To(e){this._=e}function nv(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");if(o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}To.prototype=Di.prototype={constructor:To,on:function(e,t){var n=this._,r=nv(e+"",n),o,i=-1,l=r.length;if(arguments.length<2){for(;++i<l;)if((o=(e=r[i]).type)&&(o=rv(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<l;)if(o=(e=r[i]).type)n[o]=pd(n[o],e.name,t);else if(t==null)for(o in n)n[o]=pd(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new To(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),r=0,o,i;r<o;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,o=i.length;r<o;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)}};function rv(e,t){for(var n=0,r=e.length,o;n<r;++n)if((o=e[n]).name===t)return o.value}function pd(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=tv,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ka="http://www.w3.org/1999/xhtml";const gd={svg:"http://www.w3.org/2000/svg",xhtml:ka,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ai(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),gd.hasOwnProperty(t)?{space:gd[t],local:e}:e}function sv(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ka&&t.documentElement.namespaceURI===ka?t.createElement(e):t.createElementNS(n,e)}}function ov(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Rp(e){var t=Ai(e);return(t.local?ov:sv)(t)}function iv(){}function Dc(e){return e==null?iv:function(){return this.querySelector(e)}}function lv(e){typeof e!="function"&&(e=Dc(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],l=i.length,a=r[o]=new Array(l),c,u,p=0;p<l;++p)(c=i[p])&&(u=e.call(c,c.__data__,p,i))&&("__data__"in c&&(u.__data__=c.__data__),a[p]=u);return new tt(r,this._parents)}function av(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cv(){return[]}function Lp(e){return e==null?cv:function(){return this.querySelectorAll(e)}}function uv(e){return function(){return av(e.apply(this,arguments))}}function dv(e){typeof e=="function"?e=uv(e):e=Lp(e);for(var t=this._groups,n=t.length,r=[],o=[],i=0;i<n;++i)for(var l=t[i],a=l.length,c,u=0;u<a;++u)(c=l[u])&&(r.push(e.call(c,c.__data__,u,l)),o.push(c));return new tt(r,o)}function Fp(e){return function(){return this.matches(e)}}function zp(e){return function(t){return t.matches(e)}}var fv=Array.prototype.find;function hv(e){return function(){return fv.call(this.children,e)}}function pv(){return this.firstElementChild}function gv(e){return this.select(e==null?pv:hv(typeof e=="function"?e:zp(e)))}var xv=Array.prototype.filter;function mv(){return Array.from(this.children)}function yv(e){return function(){return xv.call(this.children,e)}}function vv(e){return this.selectAll(e==null?mv:yv(typeof e=="function"?e:zp(e)))}function wv(e){typeof e!="function"&&(e=Fp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],l=i.length,a=r[o]=[],c,u=0;u<l;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new tt(r,this._parents)}function Op(e){return new Array(e.length)}function bv(){return new tt(this._enter||this._groups.map(Op),this._parents)}function li(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}li.prototype={constructor:li,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Nv(e){return function(){return e}}function jv(e,t,n,r,o,i){for(var l=0,a,c=t.length,u=i.length;l<u;++l)(a=t[l])?(a.__data__=i[l],r[l]=a):n[l]=new li(e,i[l]);for(;l<c;++l)(a=t[l])&&(o[l]=a)}function Sv(e,t,n,r,o,i,l){var a,c,u=new Map,p=t.length,h=i.length,d=new Array(p),v;for(a=0;a<p;++a)(c=t[a])&&(d[a]=v=l.call(c,c.__data__,a,t)+"",u.has(v)?o[a]=c:u.set(v,c));for(a=0;a<h;++a)v=l.call(e,i[a],a,i)+"",(c=u.get(v))?(r[a]=c,c.__data__=i[a],u.delete(v)):n[a]=new li(e,i[a]);for(a=0;a<p;++a)(c=t[a])&&u.get(d[a])===c&&(o[a]=c)}function kv(e){return e.__data__}function Cv(e,t){if(!arguments.length)return Array.from(this,kv);var n=t?Sv:jv,r=this._parents,o=this._groups;typeof e!="function"&&(e=Nv(e));for(var i=o.length,l=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var p=r[u],h=o[u],d=h.length,v=_v(e.call(p,p&&p.__data__,u,r)),y=v.length,x=a[u]=new Array(y),b=l[u]=new Array(y),f=c[u]=new Array(d);n(p,h,x,b,f,v,t);for(var m=0,g=0,N,S;m<y;++m)if(N=x[m]){for(m>=g&&(g=m+1);!(S=b[g])&&++g<y;);N._next=S||null}}return l=new tt(l,r),l._enter=a,l._exit=c,l}function _v(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ev(){return new tt(this._exit||this._groups.map(Op),this._parents)}function Mv(e,t,n){var r=this.enter(),o=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?i.remove():n(i),r&&o?r.merge(o).order():o}function Iv(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,i=r.length,l=Math.min(o,i),a=new Array(o),c=0;c<l;++c)for(var u=n[c],p=r[c],h=u.length,d=a[c]=new Array(h),v,y=0;y<h;++y)(v=u[y]||p[y])&&(d[y]=v);for(;c<o;++c)a[c]=n[c];return new tt(a,this._parents)}function Pv(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],o=r.length-1,i=r[o],l;--o>=0;)(l=r[o])&&(i&&l.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(l,i),i=l);return this}function Tv(e){e||(e=$v);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var n=this._groups,r=n.length,o=new Array(r),i=0;i<r;++i){for(var l=n[i],a=l.length,c=o[i]=new Array(a),u,p=0;p<a;++p)(u=l[p])&&(c[p]=u);c.sort(t)}return new tt(o,this._parents).order()}function $v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Dv(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Av(){return Array.from(this)}function Rv(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length;o<i;++o){var l=r[o];if(l)return l}return null}function Lv(){let e=0;for(const t of this)++e;return e}function Fv(){return!this.node()}function zv(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o=t[n],i=0,l=o.length,a;i<l;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this}function Ov(e){return function(){this.removeAttribute(e)}}function Vv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bv(e,t){return function(){this.setAttribute(e,t)}}function Hv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Wv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Uv(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Yv(e,t){var n=Ai(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vv:Ov:typeof t=="function"?n.local?Uv:Wv:n.local?Hv:Bv)(n,t))}function Vp(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xv(e){return function(){this.style.removeProperty(e)}}function Qv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Gv(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Kv(e,t,n){return arguments.length>1?this.each((t==null?Xv:typeof t=="function"?Gv:Qv)(e,t,n??"")):wr(this.node(),e)}function wr(e,t){return e.style.getPropertyValue(t)||Vp(e).getComputedStyle(e,null).getPropertyValue(t)}function Zv(e){return function(){delete this[e]}}function qv(e,t){return function(){this[e]=t}}function Jv(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ew(e,t){return arguments.length>1?this.each((t==null?Zv:typeof t=="function"?Jv:qv)(e,t)):this.node()[e]}function Bp(e){return e.trim().split(/^|\s+/)}function Ac(e){return e.classList||new Hp(e)}function Hp(e){this._node=e,this._names=Bp(e.getAttribute("class")||"")}Hp.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Wp(e,t){for(var n=Ac(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function Up(e,t){for(var n=Ac(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function tw(e){return function(){Wp(this,e)}}function nw(e){return function(){Up(this,e)}}function rw(e,t){return function(){(t.apply(this,arguments)?Wp:Up)(this,e)}}function sw(e,t){var n=Bp(e+"");if(arguments.length<2){for(var r=Ac(this.node()),o=-1,i=n.length;++o<i;)if(!r.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?rw:t?tw:nw)(n,t))}function ow(){this.textContent=""}function iw(e){return function(){this.textContent=e}}function lw(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function aw(e){return arguments.length?this.each(e==null?ow:(typeof e=="function"?lw:iw)(e)):this.node().textContent}function cw(){this.innerHTML=""}function uw(e){return function(){this.innerHTML=e}}function dw(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fw(e){return arguments.length?this.each(e==null?cw:(typeof e=="function"?dw:uw)(e)):this.node().innerHTML}function hw(){this.nextSibling&&this.parentNode.appendChild(this)}function pw(){return this.each(hw)}function gw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xw(){return this.each(gw)}function mw(e){var t=typeof e=="function"?e:Rp(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function yw(){return null}function vw(e,t){var n=typeof e=="function"?e:Rp(e),r=t==null?yw:typeof t=="function"?t:Dc(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ww(){var e=this.parentNode;e&&e.removeChild(this)}function bw(){return this.each(ww)}function Nw(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jw(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sw(e){return this.select(e?jw:Nw)}function kw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cw(e){return function(t){e.call(this,t,this.__data__)}}function _w(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ew(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,o=t.length,i;n<o;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function Mw(e,t,n){return function(){var r=this.__on,o,i=Cw(t);if(r){for(var l=0,a=r.length;l<a;++l)if((o=r[l]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),o.value=t;return}}this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Iw(e,t,n){var r=_w(e+""),o,i=r.length,l;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,p;c<u;++c)for(o=0,p=a[c];o<i;++o)if((l=r[o]).type===p.type&&l.name===p.name)return p.value}return}for(a=t?Mw:Ew,o=0;o<i;++o)this.each(a(r[o],t,n));return this}function Yp(e,t,n){var r=Vp(e),o=r.CustomEvent;typeof o=="function"?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Pw(e,t){return function(){return Yp(this,e,t)}}function Tw(e,t){return function(){return Yp(this,e,t.apply(this,arguments))}}function $w(e,t){return this.each((typeof t=="function"?Tw:Pw)(e,t))}function*Dw(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,i=r.length,l;o<i;++o)(l=r[o])&&(yield l)}var Xp=[null];function tt(e,t){this._groups=e,this._parents=t}function zs(){return new tt([[document.documentElement]],Xp)}function Aw(){return this}tt.prototype=zs.prototype={constructor:tt,select:lv,selectAll:dv,selectChild:gv,selectChildren:vv,filter:wv,data:Cv,enter:bv,exit:Ev,join:Mv,merge:Iv,selection:Aw,order:Pv,sort:Tv,call:Dv,nodes:Av,node:Rv,size:Lv,empty:Fv,each:zv,attr:Yv,style:Kv,property:ew,classed:sw,text:aw,html:fw,raise:pw,lower:xw,append:mw,insert:vw,remove:bw,clone:Sw,datum:kw,on:Iw,dispatch:$w,[Symbol.iterator]:Dw};function Ze(e){return typeof e=="string"?new tt([[document.querySelector(e)]],[document.documentElement]):new tt([[e]],Xp)}function Rw(e){let t;for(;t=e.sourceEvent;)e=t;return e}function pt(e,t){if(e=Rw(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const Lw={passive:!1},Ss={capture:!0,passive:!1};function wl(e){e.stopImmediatePropagation()}function dr(e){e.preventDefault(),e.stopImmediatePropagation()}function Qp(e){var t=e.document.documentElement,n=Ze(e).on("dragstart.drag",dr,Ss);"onselectstart"in t?n.on("selectstart.drag",dr,Ss):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gp(e,t){var n=e.document.documentElement,r=Ze(e).on("dragstart.drag",null);t&&(r.on("click.drag",dr,Ss),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const uo=e=>()=>e;function Ca(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:l,y:a,dx:c,dy:u,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:p}})}Ca.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Fw(e){return!e.ctrlKey&&!e.button}function zw(){return this.parentNode}function Ow(e,t){return t??{x:e.x,y:e.y}}function Vw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kp(){var e=Fw,t=zw,n=Ow,r=Vw,o={},i=Di("start","drag","end"),l=0,a,c,u,p,h=0;function d(N){N.on("mousedown.drag",v).filter(r).on("touchstart.drag",b).on("touchmove.drag",f,Lw).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(N,S){if(!(p||!e.call(this,N,S))){var j=g(this,t.call(this,N,S),N,S,"mouse");j&&(Ze(N.view).on("mousemove.drag",y,Ss).on("mouseup.drag",x,Ss),Qp(N.view),wl(N),u=!1,a=N.clientX,c=N.clientY,j("start",N))}}function y(N){if(dr(N),!u){var S=N.clientX-a,j=N.clientY-c;u=S*S+j*j>h}o.mouse("drag",N)}function x(N){Ze(N.view).on("mousemove.drag mouseup.drag",null),Gp(N.view,u),dr(N),o.mouse("end",N)}function b(N,S){if(e.call(this,N,S)){var j=N.changedTouches,k=t.call(this,N,S),C=j.length,P,z;for(P=0;P<C;++P)(z=g(this,k,N,S,j[P].identifier,j[P]))&&(wl(N),z("start",N,j[P]))}}function f(N){var S=N.changedTouches,j=S.length,k,C;for(k=0;k<j;++k)(C=o[S[k].identifier])&&(dr(N),C("drag",N,S[k]))}function m(N){var S=N.changedTouches,j=S.length,k,C;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),k=0;k<j;++k)(C=o[S[k].identifier])&&(wl(N),C("end",N,S[k]))}function g(N,S,j,k,C,P){var z=i.copy(),L=pt(P||j,S),A,R,_;if((_=n.call(N,new Ca("beforestart",{sourceEvent:j,target:d,identifier:C,active:l,x:L[0],y:L[1],dx:0,dy:0,dispatch:z}),k))!=null)return A=_.x-L[0]||0,R=_.y-L[1]||0,function $(T,D,M){var I=L,E;switch(T){case"start":o[C]=$,E=l++;break;case"end":delete o[C],--l;case"drag":L=pt(M||D,S),E=l;break}z.call(T,N,new Ca(T,{sourceEvent:D,subject:_,target:d,identifier:C,active:E,x:L[0]+A,y:L[1]+R,dx:L[0]-I[0],dy:L[1]-I[1],dispatch:z}),k)}}return d.filter=function(N){return arguments.length?(e=typeof N=="function"?N:uo(!!N),d):e},d.container=function(N){return arguments.length?(t=typeof N=="function"?N:uo(N),d):t},d.subject=function(N){return arguments.length?(n=typeof N=="function"?N:uo(N),d):n},d.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:uo(!!N),d):r},d.on=function(){var N=i.on.apply(i,arguments);return N===i?d:N},d.clickDistance=function(N){return arguments.length?(h=(N=+N)*N,d):Math.sqrt(h)},d}function Rc(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Os(){}var ks=.7,ai=1/ks,fr="\\s*([+-]?\\d+)\\s*",Cs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bw=/^#([0-9a-f]{3,8})$/,Hw=new RegExp(`^rgb\\(${fr},${fr},${fr}\\)$`),Ww=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Uw=new RegExp(`^rgba\\(${fr},${fr},${fr},${Cs}\\)$`),Yw=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${Cs}\\)$`),Xw=new RegExp(`^hsl\\(${Cs},${Mt},${Mt}\\)$`),Qw=new RegExp(`^hsla\\(${Cs},${Mt},${Mt},${Cs}\\)$`),xd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rc(Os,Ln,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:md,formatHex:md,formatHex8:Gw,formatHsl:Kw,formatRgb:yd,toString:yd});function md(){return this.rgb().formatHex()}function Gw(){return this.rgb().formatHex8()}function Kw(){return qp(this).formatHsl()}function yd(){return this.rgb().formatRgb()}function Ln(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Bw.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vd(t):n===3?new Ue(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fo(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fo(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Hw.exec(e))?new Ue(t[1],t[2],t[3],1):(t=Ww.exec(e))?new Ue(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Uw.exec(e))?fo(t[1],t[2],t[3],t[4]):(t=Yw.exec(e))?fo(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Xw.exec(e))?Nd(t[1],t[2]/100,t[3]/100,1):(t=Qw.exec(e))?Nd(t[1],t[2]/100,t[3]/100,t[4]):xd.hasOwnProperty(e)?vd(xd[e]):e==="transparent"?new Ue(NaN,NaN,NaN,0):null}function vd(e){return new Ue(e>>16&255,e>>8&255,e&255,1)}function fo(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ue(e,t,n,r)}function Zw(e){return e instanceof Os||(e=Ln(e)),e?(e=e.rgb(),new Ue(e.r,e.g,e.b,e.opacity)):new Ue}function _a(e,t,n,r){return arguments.length===1?Zw(e):new Ue(e,t,n,r??1)}function Ue(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Rc(Ue,_a,Zp(Os,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new Ue(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ks:Math.pow(ks,e),new Ue(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ue(In(this.r),In(this.g),In(this.b),ci(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wd,formatHex:wd,formatHex8:qw,formatRgb:bd,toString:bd}));function wd(){return`#${_n(this.r)}${_n(this.g)}${_n(this.b)}`}function qw(){return`#${_n(this.r)}${_n(this.g)}${_n(this.b)}${_n((isNaN(this.opacity)?1:this.opacity)*255)}`}function bd(){const e=ci(this.opacity);return`${e===1?"rgb(":"rgba("}${In(this.r)}, ${In(this.g)}, ${In(this.b)}${e===1?")":`, ${e})`}`}function ci(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function In(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _n(e){return e=In(e),(e<16?"0":"")+e.toString(16)}function Nd(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new xt(e,t,n,r)}function qp(e){if(e instanceof xt)return new xt(e.h,e.s,e.l,e.opacity);if(e instanceof Os||(e=Ln(e)),!e)return new xt;if(e instanceof xt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),i=Math.max(t,n,r),l=NaN,a=i-o,c=(i+o)/2;return a?(t===i?l=(n-r)/a+(n<r)*6:n===i?l=(r-t)/a+2:l=(t-n)/a+4,a/=c<.5?i+o:2-i-o,l*=60):a=c>0&&c<1?0:l,new xt(l,a,c,e.opacity)}function Jw(e,t,n,r){return arguments.length===1?qp(e):new xt(e,t,n,r??1)}function xt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Rc(xt,Jw,Zp(Os,{brighter(e){return e=e==null?ai:Math.pow(ai,e),new xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ks:Math.pow(ks,e),new xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new Ue(bl(e>=240?e-240:e+120,o,r),bl(e,o,r),bl(e<120?e+240:e-120,o,r),this.opacity)},clamp(){return new xt(jd(this.h),ho(this.s),ho(this.l),ci(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ci(this.opacity);return`${e===1?"hsl(":"hsla("}${jd(this.h)}, ${ho(this.s)*100}%, ${ho(this.l)*100}%${e===1?")":`, ${e})`}`}}));function jd(e){return e=(e||0)%360,e<0?e+360:e}function ho(e){return Math.max(0,Math.min(1,e||0))}function bl(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Lc=e=>()=>e;function eb(e,t){return function(n){return e+n*t}}function tb(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nb(e){return(e=+e)==1?Jp:function(t,n){return n-t?tb(t,n,e):Lc(isNaN(t)?n:t)}}function Jp(e,t){var n=t-e;return n?eb(e,n):Lc(isNaN(e)?t:e)}const ui=function e(t){var n=nb(t);function r(o,i){var l=n((o=_a(o)).r,(i=_a(i)).r),a=n(o.g,i.g),c=n(o.b,i.b),u=Jp(o.opacity,i.opacity);return function(p){return o.r=l(p),o.g=a(p),o.b=c(p),o.opacity=u(p),o+""}}return r.gamma=e,r}(1);function rb(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),o;return function(i){for(o=0;o<n;++o)r[o]=e[o]*(1-i)+t[o]*i;return r}}function sb(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ob(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,o=new Array(r),i=new Array(n),l;for(l=0;l<r;++l)o[l]=os(e[l],t[l]);for(;l<n;++l)i[l]=t[l];return function(a){for(l=0;l<r;++l)i[l]=o[l](a);return i}}function ib(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function kt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function lb(e,t){var n={},r={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?n[o]=os(e[o],t[o]):r[o]=t[o];return function(i){for(o in n)r[o]=n[o](i);return r}}var Ea=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nl=new RegExp(Ea.source,"g");function ab(e){return function(){return e}}function cb(e){return function(t){return e(t)+""}}function e0(e,t){var n=Ea.lastIndex=Nl.lastIndex=0,r,o,i,l=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Ea.exec(e))&&(o=Nl.exec(t));)(i=o.index)>n&&(i=t.slice(n,i),a[l]?a[l]+=i:a[++l]=i),(r=r[0])===(o=o[0])?a[l]?a[l]+=o:a[++l]=o:(a[++l]=null,c.push({i:l,x:kt(r,o)})),n=Nl.lastIndex;return n<t.length&&(i=t.slice(n),a[l]?a[l]+=i:a[++l]=i),a.length<2?c[0]?cb(c[0].x):ab(t):(t=c.length,function(u){for(var p=0,h;p<t;++p)a[(h=c[p]).i]=h.x(u);return a.join("")})}function os(e,t){var n=typeof t,r;return t==null||n==="boolean"?Lc(t):(n==="number"?kt:n==="string"?(r=Ln(t))?(t=r,ui):e0:t instanceof Ln?ui:t instanceof Date?ib:sb(t)?rb:Array.isArray(t)?ob:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lb:kt)(e,t)}var Sd=180/Math.PI,Ma={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function t0(e,t,n,r,o,i){var l,a,c;return(l=Math.sqrt(e*e+t*t))&&(e/=l,t/=l),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,l=-l),{translateX:o,translateY:i,rotate:Math.atan2(t,e)*Sd,skewX:Math.atan(c)*Sd,scaleX:l,scaleY:a}}var po;function ub(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ma:t0(t.a,t.b,t.c,t.d,t.e,t.f)}function db(e){return e==null||(po||(po=document.createElementNS("http://www.w3.org/2000/svg","g")),po.setAttribute("transform",e),!(e=po.transform.baseVal.consolidate()))?Ma:(e=e.matrix,t0(e.a,e.b,e.c,e.d,e.e,e.f))}function n0(e,t,n,r){function o(u){return u.length?u.pop()+" ":""}function i(u,p,h,d,v,y){if(u!==h||p!==d){var x=v.push("translate(",null,t,null,n);y.push({i:x-4,x:kt(u,h)},{i:x-2,x:kt(p,d)})}else(h||d)&&v.push("translate("+h+t+d+n)}function l(u,p,h,d){u!==p?(u-p>180?p+=360:p-u>180&&(u+=360),d.push({i:h.push(o(h)+"rotate(",null,r)-2,x:kt(u,p)})):p&&h.push(o(h)+"rotate("+p+r)}function a(u,p,h,d){u!==p?d.push({i:h.push(o(h)+"skewX(",null,r)-2,x:kt(u,p)}):p&&h.push(o(h)+"skewX("+p+r)}function c(u,p,h,d,v,y){if(u!==h||p!==d){var x=v.push(o(v)+"scale(",null,",",null,")");y.push({i:x-4,x:kt(u,h)},{i:x-2,x:kt(p,d)})}else(h!==1||d!==1)&&v.push(o(v)+"scale("+h+","+d+")")}return function(u,p){var h=[],d=[];return u=e(u),p=e(p),i(u.translateX,u.translateY,p.translateX,p.translateY,h,d),l(u.rotate,p.rotate,h,d),a(u.skewX,p.skewX,h,d),c(u.scaleX,u.scaleY,p.scaleX,p.scaleY,h,d),u=p=null,function(v){for(var y=-1,x=d.length,b;++y<x;)h[(b=d[y]).i]=b.x(v);return h.join("")}}}var fb=n0(ub,"px, ","px)","deg)"),hb=n0(db,", ",")",")"),pb=1e-12;function kd(e){return((e=Math.exp(e))+1/e)/2}function gb(e){return((e=Math.exp(e))-1/e)/2}function xb(e){return((e=Math.exp(2*e))-1)/(e+1)}const $o=function e(t,n,r){function o(i,l){var a=i[0],c=i[1],u=i[2],p=l[0],h=l[1],d=l[2],v=p-a,y=h-c,x=v*v+y*y,b,f;if(x<pb)f=Math.log(d/u)/t,b=function(k){return[a+k*v,c+k*y,u*Math.exp(t*k*f)]};else{var m=Math.sqrt(x),g=(d*d-u*u+r*x)/(2*u*n*m),N=(d*d-u*u-r*x)/(2*d*n*m),S=Math.log(Math.sqrt(g*g+1)-g),j=Math.log(Math.sqrt(N*N+1)-N);f=(j-S)/t,b=function(k){var C=k*f,P=kd(S),z=u/(n*m)*(P*xb(t*C+S)-gb(S));return[a+z*v,c+z*y,u*P/kd(t*C+S)]}}return b.duration=f*1e3*t/Math.SQRT2,b}return o.rho=function(i){var l=Math.max(.001,+i),a=l*l,c=a*a;return e(l,a,c)},o}(Math.SQRT2,2,4);var br=0,Qr=0,Br=0,r0=1e3,di,Gr,fi=0,Fn=0,Ri=0,_s=typeof performance=="object"&&performance.now?performance:Date,s0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Fc(){return Fn||(s0(mb),Fn=_s.now()+Ri)}function mb(){Fn=0}function hi(){this._call=this._time=this._next=null}hi.prototype=o0.prototype={constructor:hi,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Fc():+n)+(t==null?0:+t),!this._next&&Gr!==this&&(Gr?Gr._next=this:di=this,Gr=this),this._call=e,this._time=n,Ia()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ia())}};function o0(e,t,n){var r=new hi;return r.restart(e,t,n),r}function yb(){Fc(),++br;for(var e=di,t;e;)(t=Fn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--br}function Cd(){Fn=(fi=_s.now())+Ri,br=Qr=0;try{yb()}finally{br=0,wb(),Fn=0}}function vb(){var e=_s.now(),t=e-fi;t>r0&&(Ri-=t,fi=e)}function wb(){for(var e,t=di,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:di=n);Gr=e,Ia(r)}function Ia(e){if(!br){Qr&&(Qr=clearTimeout(Qr));var t=e-Fn;t>24?(e<1/0&&(Qr=setTimeout(Cd,e-_s.now()-Ri)),Br&&(Br=clearInterval(Br))):(Br||(fi=_s.now(),Br=setInterval(vb,r0)),br=1,s0(Cd))}}function _d(e,t,n){var r=new hi;return t=t==null?0:+t,r.restart(o=>{r.stop(),e(o+t)},t,n),r}var bb=Di("start","end","cancel","interrupt"),Nb=[],i0=0,Ed=1,Pa=2,Do=3,Md=4,Ta=5,Ao=6;function Li(e,t,n,r,o,i){var l=e.__transition;if(!l)e.__transition={};else if(n in l)return;jb(e,n,{name:t,index:r,group:o,on:bb,tween:Nb,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:i0})}function zc(e,t){var n=Nt(e,t);if(n.state>i0)throw new Error("too late; already scheduled");return n}function Tt(e,t){var n=Nt(e,t);if(n.state>Do)throw new Error("too late; already running");return n}function Nt(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function jb(e,t,n){var r=e.__transition,o;r[t]=n,n.timer=o0(i,0,n.time);function i(u){n.state=Ed,n.timer.restart(l,n.delay,n.time),n.delay<=u&&l(u-n.delay)}function l(u){var p,h,d,v;if(n.state!==Ed)return c();for(p in r)if(v=r[p],v.name===n.name){if(v.state===Do)return _d(l);v.state===Md?(v.state=Ao,v.timer.stop(),v.on.call("interrupt",e,e.__data__,v.index,v.group),delete r[p]):+p<t&&(v.state=Ao,v.timer.stop(),v.on.call("cancel",e,e.__data__,v.index,v.group),delete r[p])}if(_d(function(){n.state===Do&&(n.state=Md,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Pa,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Pa){for(n.state=Do,o=new Array(d=n.tween.length),p=0,h=-1;p<d;++p)(v=n.tween[p].value.call(e,e.__data__,n.index,n.group))&&(o[++h]=v);o.length=h+1}}function a(u){for(var p=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Ta,1),h=-1,d=o.length;++h<d;)o[h].call(e,p);n.state===Ta&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Ao,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ro(e,t){var n=e.__transition,r,o,i=!0,l;if(n){t=t==null?null:t+"";for(l in n){if((r=n[l]).name!==t){i=!1;continue}o=r.state>Pa&&r.state<Ta,r.state=Ao,r.timer.stop(),r.on.call(o?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[l]}i&&delete e.__transition}}function Sb(e){return this.each(function(){Ro(this,e)})}function kb(e,t){var n,r;return function(){var o=Tt(this,e),i=o.tween;if(i!==n){r=n=i;for(var l=0,a=r.length;l<a;++l)if(r[l].name===t){r=r.slice(),r.splice(l,1);break}}o.tween=r}}function Cb(e,t,n){var r,o;if(typeof n!="function")throw new Error;return function(){var i=Tt(this,e),l=i.tween;if(l!==r){o=(r=l).slice();for(var a={name:t,value:n},c=0,u=o.length;c<u;++c)if(o[c].name===t){o[c]=a;break}c===u&&o.push(a)}i.tween=o}}function _b(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Nt(this.node(),n).tween,o=0,i=r.length,l;o<i;++o)if((l=r[o]).name===e)return l.value;return null}return this.each((t==null?kb:Cb)(n,e,t))}function Oc(e,t,n){var r=e._id;return e.each(function(){var o=Tt(this,r);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Nt(o,r).value[t]}}function l0(e,t){var n;return(typeof t=="number"?kt:t instanceof Ln?ui:(n=Ln(t))?(t=n,ui):e0)(e,t)}function Eb(e){return function(){this.removeAttribute(e)}}function Mb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ib(e,t,n){var r,o=n+"",i;return function(){var l=this.getAttribute(e);return l===o?null:l===r?i:i=t(r=l,n)}}function Pb(e,t,n){var r,o=n+"",i;return function(){var l=this.getAttributeNS(e.space,e.local);return l===o?null:l===r?i:i=t(r=l,n)}}function Tb(e,t,n){var r,o,i;return function(){var l,a=n(this),c;return a==null?void this.removeAttribute(e):(l=this.getAttribute(e),c=a+"",l===c?null:l===r&&c===o?i:(o=c,i=t(r=l,a)))}}function $b(e,t,n){var r,o,i;return function(){var l,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),c=a+"",l===c?null:l===r&&c===o?i:(o=c,i=t(r=l,a)))}}function Db(e,t){var n=Ai(e),r=n==="transform"?hb:l0;return this.attrTween(e,typeof t=="function"?(n.local?$b:Tb)(n,r,Oc(this,"attr."+e,t)):t==null?(n.local?Mb:Eb)(n):(n.local?Pb:Ib)(n,r,t))}function Ab(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Rb(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Lb(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Rb(e,i)),n}return o._value=t,o}function Fb(e,t){var n,r;function o(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Ab(e,i)),n}return o._value=t,o}function zb(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Ai(e);return this.tween(n,(r.local?Lb:Fb)(r,t))}function Ob(e,t){return function(){zc(this,e).delay=+t.apply(this,arguments)}}function Vb(e,t){return t=+t,function(){zc(this,e).delay=t}}function Bb(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ob:Vb)(t,e)):Nt(this.node(),t).delay}function Hb(e,t){return function(){Tt(this,e).duration=+t.apply(this,arguments)}}function Wb(e,t){return t=+t,function(){Tt(this,e).duration=t}}function Ub(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hb:Wb)(t,e)):Nt(this.node(),t).duration}function Yb(e,t){if(typeof t!="function")throw new Error;return function(){Tt(this,e).ease=t}}function Xb(e){var t=this._id;return arguments.length?this.each(Yb(t,e)):Nt(this.node(),t).ease}function Qb(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Tt(this,e).ease=n}}function Gb(e){if(typeof e!="function")throw new Error;return this.each(Qb(this._id,e))}function Kb(e){typeof e!="function"&&(e=Fp(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var i=t[o],l=i.length,a=r[o]=[],c,u=0;u<l;++u)(c=i[u])&&e.call(c,c.__data__,u,i)&&a.push(c);return new Yt(r,this._parents,this._name,this._id)}function Zb(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,i=Math.min(r,o),l=new Array(r),a=0;a<i;++a)for(var c=t[a],u=n[a],p=c.length,h=l[a]=new Array(p),d,v=0;v<p;++v)(d=c[v]||u[v])&&(h[v]=d);for(;a<r;++a)l[a]=t[a];return new Yt(l,this._parents,this._name,this._id)}function qb(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jb(e,t,n){var r,o,i=qb(t)?zc:Tt;return function(){var l=i(this,e),a=l.on;a!==r&&(o=(r=a).copy()).on(t,n),l.on=o}}function e1(e,t){var n=this._id;return arguments.length<2?Nt(this.node(),n).on.on(e):this.each(Jb(n,e,t))}function t1(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function n1(){return this.on("end.remove",t1(this._id))}function r1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Dc(e));for(var r=this._groups,o=r.length,i=new Array(o),l=0;l<o;++l)for(var a=r[l],c=a.length,u=i[l]=new Array(c),p,h,d=0;d<c;++d)(p=a[d])&&(h=e.call(p,p.__data__,d,a))&&("__data__"in p&&(h.__data__=p.__data__),u[d]=h,Li(u[d],t,n,d,u,Nt(p,n)));return new Yt(i,this._parents,t,n)}function s1(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Lp(e));for(var r=this._groups,o=r.length,i=[],l=[],a=0;a<o;++a)for(var c=r[a],u=c.length,p,h=0;h<u;++h)if(p=c[h]){for(var d=e.call(p,p.__data__,h,c),v,y=Nt(p,n),x=0,b=d.length;x<b;++x)(v=d[x])&&Li(v,t,n,x,d,y);i.push(d),l.push(p)}return new Yt(i,l,t,n)}var o1=zs.prototype.constructor;function i1(){return new o1(this._groups,this._parents)}function l1(e,t){var n,r,o;return function(){var i=wr(this,e),l=(this.style.removeProperty(e),wr(this,e));return i===l?null:i===n&&l===r?o:o=t(n=i,r=l)}}function a0(e){return function(){this.style.removeProperty(e)}}function a1(e,t,n){var r,o=n+"",i;return function(){var l=wr(this,e);return l===o?null:l===r?i:i=t(r=l,n)}}function c1(e,t,n){var r,o,i;return function(){var l=wr(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),wr(this,e))),l===c?null:l===r&&c===o?i:(o=c,i=t(r=l,a))}}function u1(e,t){var n,r,o,i="style."+t,l="end."+i,a;return function(){var c=Tt(this,e),u=c.on,p=c.value[i]==null?a||(a=a0(t)):void 0;(u!==n||o!==p)&&(r=(n=u).copy()).on(l,o=p),c.on=r}}function d1(e,t,n){var r=(e+="")=="transform"?fb:l0;return t==null?this.styleTween(e,l1(e,r)).on("end.style."+e,a0(e)):typeof t=="function"?this.styleTween(e,c1(e,r,Oc(this,"style."+e,t))).each(u1(this._id,e)):this.styleTween(e,a1(e,r,t),n).on("end.style."+e,null)}function f1(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function h1(e,t,n){var r,o;function i(){var l=t.apply(this,arguments);return l!==o&&(r=(o=l)&&f1(e,l,n)),r}return i._value=t,i}function p1(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,h1(e,t,n??""))}function g1(e){return function(){this.textContent=e}}function x1(e){return function(){var t=e(this);this.textContent=t??""}}function m1(e){return this.tween("text",typeof e=="function"?x1(Oc(this,"text",e)):g1(e==null?"":e+""))}function y1(e){return function(t){this.textContent=e.call(this,t)}}function v1(e){var t,n;function r(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&y1(o)),t}return r._value=e,r}function w1(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,v1(e))}function b1(){for(var e=this._name,t=this._id,n=c0(),r=this._groups,o=r.length,i=0;i<o;++i)for(var l=r[i],a=l.length,c,u=0;u<a;++u)if(c=l[u]){var p=Nt(c,t);Li(c,e,n,u,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Yt(r,this._parents,e,n)}function N1(){var e,t,n=this,r=n._id,o=n.size();return new Promise(function(i,l){var a={value:l},c={value:function(){--o===0&&i()}};n.each(function(){var u=Tt(this,r),p=u.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),o===0&&i()})}var j1=0;function Yt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function c0(){return++j1}var At=zs.prototype;Yt.prototype={constructor:Yt,select:r1,selectAll:s1,selectChild:At.selectChild,selectChildren:At.selectChildren,filter:Kb,merge:Zb,selection:i1,transition:b1,call:At.call,nodes:At.nodes,node:At.node,size:At.size,empty:At.empty,each:At.each,on:e1,attr:Db,attrTween:zb,style:d1,styleTween:p1,text:m1,textTween:w1,remove:n1,tween:_b,delay:Bb,duration:Ub,ease:Xb,easeVarying:Gb,end:N1,[Symbol.iterator]:At[Symbol.iterator]};function S1(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var k1={time:null,delay:0,duration:250,ease:S1};function C1(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function _1(e){var t,n;e instanceof Yt?(t=e._id,e=e._name):(t=c0(),(n=k1).time=Fc(),e=e==null?null:e+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var l=r[i],a=l.length,c,u=0;u<a;++u)(c=l[u])&&Li(c,e,t,u,l,n||C1(c,t));return new Yt(r,this._parents,e,t)}zs.prototype.interrupt=Sb;zs.prototype.transition=_1;const go=e=>()=>e;function E1(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ot(e,t,n){this.k=e,this.x=t,this.y=n}Ot.prototype={constructor:Ot,scale:function(e){return e===1?this:new Ot(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ot(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Fi=new Ot(1,0,0);u0.prototype=Ot.prototype;function u0(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Fi;return e.__zoom}function jl(e){e.stopImmediatePropagation()}function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function M1(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function I1(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Id(){return this.__zoom||Fi}function P1(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function T1(){return navigator.maxTouchPoints||"ontouchstart"in this}function $1(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],l=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),l>i?(i+l)/2:Math.min(0,i)||Math.max(0,l))}function d0(){var e=M1,t=I1,n=$1,r=P1,o=T1,i=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],a=250,c=$o,u=Di("start","zoom","end"),p,h,d,v=500,y=150,x=0,b=10;function f(_){_.property("__zoom",Id).on("wheel.zoom",C,{passive:!1}).on("mousedown.zoom",P).on("dblclick.zoom",z).filter(o).on("touchstart.zoom",L).on("touchmove.zoom",A).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}f.transform=function(_,$,T,D){var M=_.selection?_.selection():_;M.property("__zoom",Id),_!==M?S(_,$,T,D):M.interrupt().each(function(){j(this,arguments).event(D).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},f.scaleBy=function(_,$,T,D){f.scaleTo(_,function(){var M=this.__zoom.k,I=typeof $=="function"?$.apply(this,arguments):$;return M*I},T,D)},f.scaleTo=function(_,$,T,D){f.transform(_,function(){var M=t.apply(this,arguments),I=this.__zoom,E=T==null?N(M):typeof T=="function"?T.apply(this,arguments):T,F=I.invert(E),O=typeof $=="function"?$.apply(this,arguments):$;return n(g(m(I,O),E,F),M,l)},T,D)},f.translateBy=function(_,$,T,D){f.transform(_,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof T=="function"?T.apply(this,arguments):T),t.apply(this,arguments),l)},null,D)},f.translateTo=function(_,$,T,D,M){f.transform(_,function(){var I=t.apply(this,arguments),E=this.__zoom,F=D==null?N(I):typeof D=="function"?D.apply(this,arguments):D;return n(Fi.translate(F[0],F[1]).scale(E.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof T=="function"?-T.apply(this,arguments):-T),I,l)},D,M)};function m(_,$){return $=Math.max(i[0],Math.min(i[1],$)),$===_.k?_:new Ot($,_.x,_.y)}function g(_,$,T){var D=$[0]-T[0]*_.k,M=$[1]-T[1]*_.k;return D===_.x&&M===_.y?_:new Ot(_.k,D,M)}function N(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function S(_,$,T,D){_.on("start.zoom",function(){j(this,arguments).event(D).start()}).on("interrupt.zoom end.zoom",function(){j(this,arguments).event(D).end()}).tween("zoom",function(){var M=this,I=arguments,E=j(M,I).event(D),F=t.apply(M,I),O=T==null?N(F):typeof T=="function"?T.apply(M,I):T,X=Math.max(F[1][0]-F[0][0],F[1][1]-F[0][1]),Y=M.__zoom,V=typeof $=="function"?$.apply(M,I):$,Q=c(Y.invert(O).concat(X/Y.k),V.invert(O).concat(X/V.k));return function(H){if(H===1)H=V;else{var B=Q(H),J=X/B[2];H=new Ot(J,O[0]-B[0]*J,O[1]-B[1]*J)}E.zoom(null,H)}})}function j(_,$,T){return!T&&_.__zooming||new k(_,$)}function k(_,$){this.that=_,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,$),this.taps=0}k.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,$){return this.mouse&&_!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var $=Ze(this.that).datum();u.call(_,this.that,new E1(_,{sourceEvent:this.sourceEvent,target:f,transform:this.that.__zoom,dispatch:u}),$)}};function C(_,...$){if(!e.apply(this,arguments))return;var T=j(this,$).event(_),D=this.__zoom,M=Math.max(i[0],Math.min(i[1],D.k*Math.pow(2,r.apply(this,arguments)))),I=pt(_);if(T.wheel)(T.mouse[0][0]!==I[0]||T.mouse[0][1]!==I[1])&&(T.mouse[1]=D.invert(T.mouse[0]=I)),clearTimeout(T.wheel);else{if(D.k===M)return;T.mouse=[I,D.invert(I)],Ro(this),T.start()}Hr(_),T.wheel=setTimeout(E,y),T.zoom("mouse",n(g(m(D,M),T.mouse[0],T.mouse[1]),T.extent,l));function E(){T.wheel=null,T.end()}}function P(_,...$){if(d||!e.apply(this,arguments))return;var T=_.currentTarget,D=j(this,$,!0).event(_),M=Ze(_.view).on("mousemove.zoom",O,!0).on("mouseup.zoom",X,!0),I=pt(_,T),E=_.clientX,F=_.clientY;Qp(_.view),jl(_),D.mouse=[I,this.__zoom.invert(I)],Ro(this),D.start();function O(Y){if(Hr(Y),!D.moved){var V=Y.clientX-E,Q=Y.clientY-F;D.moved=V*V+Q*Q>x}D.event(Y).zoom("mouse",n(g(D.that.__zoom,D.mouse[0]=pt(Y,T),D.mouse[1]),D.extent,l))}function X(Y){M.on("mousemove.zoom mouseup.zoom",null),Gp(Y.view,D.moved),Hr(Y),D.event(Y).end()}}function z(_,...$){if(e.apply(this,arguments)){var T=this.__zoom,D=pt(_.changedTouches?_.changedTouches[0]:_,this),M=T.invert(D),I=T.k*(_.shiftKey?.5:2),E=n(g(m(T,I),D,M),t.apply(this,$),l);Hr(_),a>0?Ze(this).transition().duration(a).call(S,E,D,_):Ze(this).call(f.transform,E,D,_)}}function L(_,...$){if(e.apply(this,arguments)){var T=_.touches,D=T.length,M=j(this,$,_.changedTouches.length===D).event(_),I,E,F,O;for(jl(_),E=0;E<D;++E)F=T[E],O=pt(F,this),O=[O,this.__zoom.invert(O),F.identifier],M.touch0?!M.touch1&&M.touch0[2]!==O[2]&&(M.touch1=O,M.taps=0):(M.touch0=O,I=!0,M.taps=1+!!p);p&&(p=clearTimeout(p)),I&&(M.taps<2&&(h=O[0],p=setTimeout(function(){p=null},v)),Ro(this),M.start())}}function A(_,...$){if(this.__zooming){var T=j(this,$).event(_),D=_.changedTouches,M=D.length,I,E,F,O;for(Hr(_),I=0;I<M;++I)E=D[I],F=pt(E,this),T.touch0&&T.touch0[2]===E.identifier?T.touch0[0]=F:T.touch1&&T.touch1[2]===E.identifier&&(T.touch1[0]=F);if(E=T.that.__zoom,T.touch1){var X=T.touch0[0],Y=T.touch0[1],V=T.touch1[0],Q=T.touch1[1],H=(H=V[0]-X[0])*H+(H=V[1]-X[1])*H,B=(B=Q[0]-Y[0])*B+(B=Q[1]-Y[1])*B;E=m(E,Math.sqrt(H/B)),F=[(X[0]+V[0])/2,(X[1]+V[1])/2],O=[(Y[0]+Q[0])/2,(Y[1]+Q[1])/2]}else if(T.touch0)F=T.touch0[0],O=T.touch0[1];else return;T.zoom("touch",n(g(E,F,O),T.extent,l))}}function R(_,...$){if(this.__zooming){var T=j(this,$).event(_),D=_.changedTouches,M=D.length,I,E;for(jl(_),d&&clearTimeout(d),d=setTimeout(function(){d=null},v),I=0;I<M;++I)E=D[I],T.touch0&&T.touch0[2]===E.identifier?delete T.touch0:T.touch1&&T.touch1[2]===E.identifier&&delete T.touch1;if(T.touch1&&!T.touch0&&(T.touch0=T.touch1,delete T.touch1),T.touch0)T.touch0[1]=this.__zoom.invert(T.touch0[0]);else if(T.end(),T.taps===2&&(E=pt(E,this),Math.hypot(h[0]-E[0],h[1]-E[1])<b)){var F=Ze(this).on("dblclick.zoom");F&&F.apply(this,arguments)}}}return f.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:go(+_),f):r},f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:go(!!_),f):e},f.touchable=function(_){return arguments.length?(o=typeof _=="function"?_:go(!!_),f):o},f.extent=function(_){return arguments.length?(t=typeof _=="function"?_:go([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),f):t},f.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],f):[i[0],i[1]]},f.translateExtent=function(_){return arguments.length?(l[0][0]=+_[0][0],l[1][0]=+_[1][0],l[0][1]=+_[0][1],l[1][1]=+_[1][1],f):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},f.constrain=function(_){return arguments.length?(n=_,f):n},f.duration=function(_){return arguments.length?(a=+_,f):a},f.interpolate=function(_){return arguments.length?(c=_,f):c},f.on=function(){var _=u.on.apply(u,arguments);return _===u?f:_},f.clickDistance=function(_){return arguments.length?(x=(_=+_)*_,f):Math.sqrt(x)},f.tapDistance=function(_){return arguments.length?(b=+_,f):b},f}const Pt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Es=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],f0=["Enter"," ","Escape"],h0={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Nr;(function(e){e.Strict="strict",e.Loose="loose"})(Nr||(Nr={}));var Pn;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pn||(Pn={}));var Ms;(function(e){e.Partial="partial",e.Full="full"})(Ms||(Ms={}));const p0={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var rn;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(rn||(rn={}));var pi;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pi||(pi={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));const Pd={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top};function g0(e){return e===null?null:e?"valid":"invalid"}const x0=e=>"id"in e&&"source"in e&&"target"in e,D1=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Vc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Vs=(e,t=[0,0])=>{const{width:n,height:r}=Qt(e),o=e.origin??t,i=n*o[0],l=r*o[1];return{x:e.position.x-i,y:e.position.y-l}},A1=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,o)=>{const i=typeof o=="string";let l=!t.nodeLookup&&!i?o:void 0;t.nodeLookup&&(l=i?t.nodeLookup.get(o):Vc(o)?o:t.nodeLookup.get(o.id));const a=l?gi(l,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return zi(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Oi(n)},Bs=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(o=>{(t.filter===void 0||t.filter(o))&&(n=zi(n,gi(o)),r=!0)}),r?Oi(n):{x:0,y:0,width:0,height:0}},Bc=(e,t,[n,r,o]=[0,0,1],i=!1,l=!1)=>{const a={...Ws(t,[n,r,o]),width:t.width/o,height:t.height/o},c=[];for(const u of e.values()){const{measured:p,selectable:h=!0,hidden:d=!1}=u;if(l&&!h||d)continue;const v=p.width??u.width??u.initialWidth??null,y=p.height??u.height??u.initialHeight??null,x=Is(a,Sr(u)),b=(v??0)*(y??0),f=i&&x>0;(!u.internals.handleBounds||f||x>=b||u.dragging)&&c.push(u)}return c},R1=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function L1(e,t){const n=new Map,r=t!=null&&t.nodes?new Set(t.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&((t==null?void 0:t.includeHiddenNodes)||!o.hidden)&&(!r||r.has(o.id))&&n.set(o.id,o)}),n}async function F1({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},l){if(e.size===0)return Promise.resolve(!0);const a=L1(e,l),c=Bs(a),u=Hc(c,t,n,(l==null?void 0:l.minZoom)??o,(l==null?void 0:l.maxZoom)??i,(l==null?void 0:l.padding)??.1);return await r.setViewport(u,{duration:l==null?void 0:l.duration,ease:l==null?void 0:l.ease,interpolate:l==null?void 0:l.interpolate}),Promise.resolve(!0)}function m0({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){const l=n.get(e),a=l.parentId?n.get(l.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},p=l.origin??r;let h=l.extent||o;if(l.extent==="parent"&&!l.expandParent)if(!a)i==null||i("005",Pt.error005());else{const v=a.measured.width,y=a.measured.height;v&&y&&(h=[[c,u],[c+v,u+y]])}else a&&kr(l.extent)&&(h=[[l.extent[0][0]+c,l.extent[0][1]+u],[l.extent[1][0]+c,l.extent[1][1]+u]]);const d=kr(h)?zn(t,h,l.measured):t;return(l.measured.width===void 0||l.measured.height===void 0)&&(i==null||i("015",Pt.error015())),{position:{x:d.x-c+(l.measured.width??0)*p[0],y:d.y-u+(l.measured.height??0)*p[1]},positionAbsolute:d}}async function z1({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){const i=new Set(e.map(d=>d.id)),l=[];for(const d of n){if(d.deletable===!1)continue;const v=i.has(d.id),y=!v&&d.parentId&&l.find(x=>x.id===d.parentId);(v||y)&&l.push(d)}const a=new Set(t.map(d=>d.id)),c=r.filter(d=>d.deletable!==!1),p=R1(l,c);for(const d of c)a.has(d.id)&&!p.find(y=>y.id===d.id)&&p.push(d);if(!o)return{edges:p,nodes:l};const h=await o({nodes:l,edges:p});return typeof h=="boolean"?h?{edges:p,nodes:l}:{edges:[],nodes:[]}:h}const jr=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),zn=(e={x:0,y:0},t,n)=>({x:jr(e.x,t[0][0],t[1][0]-((n==null?void 0:n.width)??0)),y:jr(e.y,t[0][1],t[1][1]-((n==null?void 0:n.height)??0))});function y0(e,t,n){const{width:r,height:o}=Qt(n),{x:i,y:l}=n.internals.positionAbsolute;return zn(e,[[i,l],[i+r,l+o]],t)}const Td=(e,t,n)=>e<t?jr(Math.abs(e-t),1,t)/t:e>n?-jr(Math.abs(e-n),1,t)/t:0,v0=(e,t,n=15,r=40)=>{const o=Td(e.x,r,t.width-r)*n,i=Td(e.y,r,t.height-r)*n;return[o,i]},zi=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),$a=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),Oi=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Sr=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Vc(e)?e.internals.positionAbsolute:Vs(e,t);return{x:n,y:r,width:((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0,height:((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0}},gi=(e,t=[0,0])=>{var o,i;const{x:n,y:r}=Vc(e)?e.internals.positionAbsolute:Vs(e,t);return{x:n,y:r,x2:n+(((o=e.measured)==null?void 0:o.width)??e.width??e.initialWidth??0),y2:r+(((i=e.measured)==null?void 0:i.height)??e.height??e.initialHeight??0)}},w0=(e,t)=>Oi(zi($a(e),$a(t))),Is=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},$d=e=>mt(e.width)&&mt(e.height)&&mt(e.x)&&mt(e.y),mt=e=>!isNaN(e)&&isFinite(e),O1=(e,t)=>{},Hs=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Ws=({x:e,y:t},[n,r,o],i=!1,l=[1,1])=>{const a={x:(e-n)/o,y:(t-r)/o};return i?Hs(a,l):a},xi=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function Wn(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function V1(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Wn(e,n),o=Wn(e,t);return{top:r,right:o,bottom:r,left:o,x:o*2,y:r*2}}if(typeof e=="object"){const r=Wn(e.top??e.y??0,n),o=Wn(e.bottom??e.y??0,n),i=Wn(e.left??e.x??0,t),l=Wn(e.right??e.x??0,t);return{top:r,right:l,bottom:o,left:i,x:i+l,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function B1(e,t,n,r,o,i){const{x:l,y:a}=xi(e,[t,n,r]),{x:c,y:u}=xi({x:e.x+e.width,y:e.y+e.height},[t,n,r]),p=o-c,h=i-u;return{left:Math.floor(l),top:Math.floor(a),right:Math.floor(p),bottom:Math.floor(h)}}const Hc=(e,t,n,r,o,i)=>{const l=V1(i,t,n),a=(t-l.x)/e.width,c=(n-l.y)/e.height,u=Math.min(a,c),p=jr(u,r,o),h=e.x+e.width/2,d=e.y+e.height/2,v=t/2-h*p,y=n/2-d*p,x=B1(e,v,y,p,t,n),b={left:Math.min(x.left-l.left,0),top:Math.min(x.top-l.top,0),right:Math.min(x.right-l.right,0),bottom:Math.min(x.bottom-l.bottom,0)};return{x:v-b.left+b.right,y:y-b.top+b.bottom,zoom:p}},Ps=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0};function kr(e){return e!=null&&e!=="parent"}function Qt(e){var t,n;return{width:((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth??0,height:((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight??0}}function b0(e){var t,n;return(((t=e.measured)==null?void 0:t.width)??e.width??e.initialWidth)!==void 0&&(((n=e.measured)==null?void 0:n.height)??e.height??e.initialHeight)!==void 0}function N0(e,t={width:0,height:0},n,r,o){const i={...e},l=r.get(n);if(l){const a=l.origin||o;i.x+=l.internals.positionAbsolute.x-(t.width??0)*a[0],i.y+=l.internals.positionAbsolute.y-(t.height??0)*a[1]}return i}function Dd(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function H1(){let e,t;return{promise:new Promise((r,o)=>{e=r,t=o}),resolve:e,reject:t}}function W1(e){return{...h0,...e||{}}}function is(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){const{x:i,y:l}=yt(e),a=Ws({x:i-((o==null?void 0:o.left)??0),y:l-((o==null?void 0:o.top)??0)},r),{x:c,y:u}=n?Hs(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Wc=e=>({width:e.offsetWidth,height:e.offsetHeight}),j0=e=>{var t;return((t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},U1=["INPUT","SELECT","TEXTAREA"];function S0(e){var r,o;const t=((o=(r=e.composedPath)==null?void 0:r.call(e))==null?void 0:o[0])||e.target;return(t==null?void 0:t.nodeType)!==1?!1:U1.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const k0=e=>"clientX"in e,yt=(e,t)=>{var i,l;const n=k0(e),r=n?e.clientX:(i=e.touches)==null?void 0:i[0].clientX,o=n?e.clientY:(l=e.touches)==null?void 0:l[0].clientY;return{x:r-((t==null?void 0:t.left)??0),y:o-((t==null?void 0:t.top)??0)}},Ad=(e,t,n,r,o)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(l=>{const a=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),type:e,nodeId:o,position:l.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Wc(l)}})};function C0({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:l,targetControlY:a}){const c=e*.125+o*.375+l*.375+n*.125,u=t*.125+i*.375+a*.375+r*.125,p=Math.abs(c-e),h=Math.abs(u-t);return[c,u,p,h]}function xo(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Rd({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case G.Left:return[t-xo(t-r,i),n];case G.Right:return[t+xo(r-t,i),n];case G.Top:return[t,n-xo(n-o,i)];case G.Bottom:return[t,n+xo(o-n,i)]}}function Uc({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top,curvature:l=.25}){const[a,c]=Rd({pos:n,x1:e,y1:t,x2:r,y2:o,c:l}),[u,p]=Rd({pos:i,x1:r,y1:o,x2:e,y2:t,c:l}),[h,d,v,y]=C0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:p});return[`M${e},${t} C${a},${c} ${u},${p} ${r},${o}`,h,d,v,y]}function _0({sourceX:e,sourceY:t,targetX:n,targetY:r}){const o=Math.abs(n-e)/2,i=n<e?n+o:n-o,l=Math.abs(r-t)/2,a=r<t?r+l:r-l;return[i,a,o,l]}function Y1({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:o=!1}){if(r!==void 0)return r;const i=o&&n?1e3:0,l=Math.max(e.parentId||o&&e.selected?e.internals.z:0,t.parentId||o&&t.selected?t.internals.z:0);return i+l}function X1({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){const i=zi(gi(e),gi(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const l={x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]};return Is(l,Oi(i))>0}const Q1=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,G1=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),E0=(e,t)=>{if(!e.source||!e.target)return t;let n;return x0(e)?n={...e}:n={...e,id:Q1(e)},G1(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Yc({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[o,i,l,a]=_0({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,l,a]}const Ld={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},K1=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Fd=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Z1({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:r=G.Top,center:o,offset:i,stepPosition:l}){const a=Ld[t],c=Ld[r],u={x:e.x+a.x*i,y:e.y+a.y*i},p={x:n.x+c.x*i,y:n.y+c.y*i},h=K1({source:u,sourcePosition:t,target:p}),d=h.x!==0?"x":"y",v=h[d];let y=[],x,b;const f={x:0,y:0},m={x:0,y:0},[,,g,N]=_0({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[d]*c[d]===-1){d==="x"?(x=o.x??u.x+(p.x-u.x)*l,b=o.y??(u.y+p.y)/2):(x=o.x??(u.x+p.x)/2,b=o.y??u.y+(p.y-u.y)*l);const j=[{x,y:u.y},{x,y:p.y}],k=[{x:u.x,y:b},{x:p.x,y:b}];a[d]===v?y=d==="x"?j:k:y=d==="x"?k:j}else{const j=[{x:u.x,y:p.y}],k=[{x:p.x,y:u.y}];if(d==="x"?y=a.x===v?k:j:y=a.y===v?j:k,t===r){const A=Math.abs(e[d]-n[d]);if(A<=i){const R=Math.min(i-1,i-A);a[d]===v?f[d]=(u[d]>e[d]?-1:1)*R:m[d]=(p[d]>n[d]?-1:1)*R}}if(t!==r){const A=d==="x"?"y":"x",R=a[d]===c[A],_=u[A]>p[A],$=u[A]<p[A];(a[d]===1&&(!R&&_||R&&$)||a[d]!==1&&(!R&&$||R&&_))&&(y=d==="x"?j:k)}const C={x:u.x+f.x,y:u.y+f.y},P={x:p.x+m.x,y:p.y+m.y},z=Math.max(Math.abs(C.x-y[0].x),Math.abs(P.x-y[0].x)),L=Math.max(Math.abs(C.y-y[0].y),Math.abs(P.y-y[0].y));z>=L?(x=(C.x+P.x)/2,b=y[0].y):(x=y[0].x,b=(C.y+P.y)/2)}return[[e,{x:u.x+f.x,y:u.y+f.y},...y,{x:p.x+m.x,y:p.y+m.y},n],x,b,g,N]}function q1(e,t,n,r){const o=Math.min(Fd(e,t)/2,Fd(t,n)/2,r),{x:i,y:l}=t;if(e.x===i&&i===n.x||e.y===l&&l===n.y)return`L${i} ${l}`;if(e.y===l){const u=e.x<n.x?-1:1,p=e.y<n.y?1:-1;return`L ${i+o*u},${l}Q ${i},${l} ${i},${l+o*p}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${i},${l+o*c}Q ${i},${l} ${i+o*a},${l}`}function Da({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top,borderRadius:l=5,centerX:a,centerY:c,offset:u=20,stepPosition:p=.5}){const[h,d,v,y,x]=Z1({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:a,y:c},offset:u,stepPosition:p});return[h.reduce((f,m,g)=>{let N="";return g>0&&g<h.length-1?N=q1(h[g-1],m,h[g+1],l):N=`${g===0?"M":"L"}${m.x} ${m.y}`,f+=N,f},""),d,v,y,x]}function zd(e){var t;return e&&!!(e.internals.handleBounds||(t=e.handles)!=null&&t.length)&&!!(e.measured.width||e.width||e.initialWidth)}function J1(e){var h;const{sourceNode:t,targetNode:n}=e;if(!zd(t)||!zd(n))return null;const r=t.internals.handleBounds||Od(t.handles),o=n.internals.handleBounds||Od(n.handles),i=Vd((r==null?void 0:r.source)??[],e.sourceHandle),l=Vd(e.connectionMode===Nr.Strict?(o==null?void 0:o.target)??[]:((o==null?void 0:o.target)??[]).concat((o==null?void 0:o.source)??[]),e.targetHandle);if(!i||!l)return(h=e.onError)==null||h.call(e,"008",Pt.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=(i==null?void 0:i.position)||G.Bottom,c=(l==null?void 0:l.position)||G.Top,u=Ts(t,i,a),p=Ts(n,l,c);return{sourceX:u.x,sourceY:u.y,targetX:p.x,targetY:p.y,sourcePosition:a,targetPosition:c}}function Od(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ts(e,t,n=G.Left,r=!1){const o=((t==null?void 0:t.x)??0)+e.internals.positionAbsolute.x,i=((t==null?void 0:t.y)??0)+e.internals.positionAbsolute.y,{width:l,height:a}=t??Qt(e);if(r)return{x:o+l/2,y:i+a/2};switch((t==null?void 0:t.position)??n){case G.Top:return{x:o+l/2,y:i};case G.Right:return{x:o+l,y:i+a/2};case G.Bottom:return{x:o+l/2,y:i+a};case G.Left:return{x:o,y:i+a/2}}}function Vd(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Aa(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function eN(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){const i=new Set;return e.reduce((l,a)=>([a.markerStart||r,a.markerEnd||o].forEach(c=>{if(c&&typeof c=="object"){const u=Aa(c,t);i.has(u)||(l.push({id:u,color:c.color||n,...c}),i.add(u))}}),l),[]).sort((l,a)=>l.id.localeCompare(a.id))}const M0=1e3,tN=10,Xc={nodeOrigin:[0,0],nodeExtent:Es,elevateNodesOnSelect:!0,defaults:{}},nN={...Xc,checkEquality:!0};function Qc(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function rN(e,t,n){const r=Qc(Xc,n);for(const o of e.values())if(o.parentId)Gc(o,e,t,r);else{const i=Vs(o,r.nodeOrigin),l=kr(o.extent)?o.extent:r.nodeExtent,a=zn(i,l,Qt(o));o.internals.positionAbsolute=a}}function sN(e,t){if(!e.handles)return e.measured?t==null?void 0:t.internals.handleBounds:void 0;const n=[],r=[];for(const o of e.handles){const i={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?n.push(i):o.type==="target"&&r.push(i)}return{source:n,target:r}}function Ra(e,t,n,r){var u,p;const o=Qc(nN,r);let i={i:-1},l=e.length>0;const a=new Map(t),c=o!=null&&o.elevateNodesOnSelect?M0:0;t.clear(),n.clear();for(const h of e){let d=a.get(h.id);if(o.checkEquality&&h===(d==null?void 0:d.internals.userNode))t.set(h.id,d);else{const v=Vs(h,o.nodeOrigin),y=kr(h.extent)?h.extent:o.nodeExtent,x=zn(v,y,Qt(h));d={...o.defaults,...h,measured:{width:(u=h.measured)==null?void 0:u.width,height:(p=h.measured)==null?void 0:p.height},internals:{positionAbsolute:x,handleBounds:sN(h,d),z:I0(h,c),userNode:h}},t.set(h.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(l=!1),h.parentId&&Gc(d,t,n,r,i)}return l}function oN(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Gc(e,t,n,r,o){const{elevateNodesOnSelect:i,nodeOrigin:l,nodeExtent:a}=Qc(Xc,r),c=e.parentId,u=t.get(c);if(!u){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}oN(e,n),o&&!u.parentId&&u.internals.rootParentIndex===void 0&&(u.internals.rootParentIndex=++o.i,u.internals.z=u.internals.z+o.i*tN),o&&u.internals.rootParentIndex!==void 0&&(o.i=u.internals.rootParentIndex);const p=i?M0:0,{x:h,y:d,z:v}=iN(e,u,l,a,p),{positionAbsolute:y}=e.internals,x=h!==y.x||d!==y.y;(x||v!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:d}:y,z:v}})}function I0(e,t){return(mt(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function iN(e,t,n,r,o){const{x:i,y:l}=t.internals.positionAbsolute,a=Qt(e),c=Vs(e,n),u=kr(e.extent)?zn(c,e.extent,a):c;let p=zn({x:i+u.x,y:l+u.y},r,a);e.extent==="parent"&&(p=y0(p,a,t));const h=I0(e,o),d=t.internals.z??0;return{x:p.x,y:p.y,z:d>=h?d+1:h}}function Kc(e,t,n,r=[0,0]){var l;const o=[],i=new Map;for(const a of e){const c=t.get(a.parentId);if(!c)continue;const u=((l=i.get(a.parentId))==null?void 0:l.expandedRect)??Sr(c),p=w0(u,a.rect);i.set(a.parentId,{expandedRect:p,parent:c})}return i.size>0&&i.forEach(({expandedRect:a,parent:c},u)=>{var g;const p=c.internals.positionAbsolute,h=Qt(c),d=c.origin??r,v=a.x<p.x?Math.round(Math.abs(p.x-a.x)):0,y=a.y<p.y?Math.round(Math.abs(p.y-a.y)):0,x=Math.max(h.width,Math.round(a.width)),b=Math.max(h.height,Math.round(a.height)),f=(x-h.width)*d[0],m=(b-h.height)*d[1];(v>0||y>0||f||m)&&(o.push({id:u,type:"position",position:{x:c.position.x-v+f,y:c.position.y-y+m}}),(g=n.get(u))==null||g.forEach(N=>{e.some(S=>S.id===N.id)||o.push({id:N.id,type:"position",position:{x:N.position.x+v,y:N.position.y+y}})})),(h.width<a.width||h.height<a.height||v||y)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(v?d[0]*v-f:0),height:b+(y?d[1]*y-m:0)}})}),o}function lN(e,t,n,r,o,i){const l=r==null?void 0:r.querySelector(".xyflow__viewport");let a=!1;if(!l)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(l),{m22:p}=new window.DOMMatrixReadOnly(u.transform),h=[];for(const d of e.values()){const v=t.get(d.id);if(!v)continue;if(v.hidden){t.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),a=!0;continue}const y=Wc(d.nodeElement),x=v.measured.width!==y.width||v.measured.height!==y.height;if(!!(y.width&&y.height&&(x||!v.internals.handleBounds||d.force))){const f=d.nodeElement.getBoundingClientRect(),m=kr(v.extent)?v.extent:i;let{positionAbsolute:g}=v.internals;v.parentId&&v.extent==="parent"?g=y0(g,y,t.get(v.parentId)):m&&(g=zn(g,m,y));const N={...v,measured:y,internals:{...v.internals,positionAbsolute:g,handleBounds:{source:Ad("source",d.nodeElement,f,p,v.id),target:Ad("target",d.nodeElement,f,p,v.id)}}};t.set(v.id,N),v.parentId&&Gc(N,t,n,{nodeOrigin:o}),a=!0,x&&(c.push({id:v.id,type:"dimensions",dimensions:y}),v.expandParent&&v.parentId&&h.push({id:v.id,parentId:v.parentId,rect:Sr(N,o)}))}}if(h.length>0){const d=Kc(h,t,n,o);c.push(...d)}return{changes:c,updatedInternals:a}}async function aN({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const l=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r),a=!!l&&(l.x!==n[0]||l.y!==n[1]||l.k!==n[2]);return Promise.resolve(a)}function Bd(e,t,n,r,o,i){let l=o;const a=r.get(l)||new Map;r.set(l,a.set(n,t)),l=`${o}-${e}`;const c=r.get(l)||new Map;if(r.set(l,c.set(n,t)),i){l=`${o}-${e}-${i}`;const u=r.get(l)||new Map;r.set(l,u.set(n,t))}}function P0(e,t,n){e.clear(),t.clear();for(const r of n){const{source:o,target:i,sourceHandle:l=null,targetHandle:a=null}=r,c={edgeId:r.id,source:o,target:i,sourceHandle:l,targetHandle:a},u=`${o}-${l}--${i}-${a}`,p=`${i}-${a}--${o}-${l}`;Bd("source",c,p,e,o,l),Bd("target",c,u,e,i,a),t.set(r.id,r)}}function T0(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:T0(n,t):!1}function Hd(e,t,n){var o;let r=e;do{if((o=r==null?void 0:r.matches)!=null&&o.call(r,t))return!0;if(r===n)return!1;r=r==null?void 0:r.parentElement}while(r);return!1}function cN(e,t,n,r){const o=new Map;for(const[i,l]of e)if((l.selected||l.id===r)&&(!l.parentId||!T0(l,e))&&(l.draggable||t&&typeof l.draggable>"u")){const a=e.get(i);a&&o.set(i,{id:i,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return o}function Sl({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){var l,a,c;const o=[];for(const[u,p]of t){const h=(l=n.get(u))==null?void 0:l.internals.userNode;h&&o.push({...h,position:p.position,dragging:r})}if(!e)return[o[0],o];const i=(a=n.get(e))==null?void 0:a.internals.userNode;return[i?{...i,position:((c=t.get(e))==null?void 0:c.position)||i.position,dragging:r}:o[0],o]}function uN({dragItems:e,snapGrid:t,x:n,y:r}){const o=e.values().next().value;if(!o)return null;const i={x:n-o.distance.x,y:r-o.distance.y},l=Hs(i,t);return{x:l.x-i.x,y:l.y-i.y}}function dN({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},l=0,a=new Map,c=!1,u={x:0,y:0},p=null,h=!1,d=null,v=!1,y=!1,x=null;function b({noDragClassName:m,handleSelector:g,domNode:N,isSelectable:S,nodeId:j,nodeClickDistance:k=0}){d=Ze(N);function C({x:A,y:R}){const{nodeLookup:_,nodeExtent:$,snapGrid:T,snapToGrid:D,nodeOrigin:M,onNodeDrag:I,onSelectionDrag:E,onError:F,updateNodePositions:O}=t();i={x:A,y:R};let X=!1;const Y=a.size>1,V=Y&&$?$a(Bs(a)):null,Q=Y&&D?uN({dragItems:a,snapGrid:T,x:A,y:R}):null;for(const[H,B]of a){if(!_.has(H))continue;let J={x:A-B.distance.x,y:R-B.distance.y};D&&(J=Q?{x:Math.round(J.x+Q.x),y:Math.round(J.y+Q.y)}:Hs(J,T));let W=null;if(Y&&$&&!B.extent&&V){const{positionAbsolute:q}=B.internals,se=q.x-V.x+$[0][0],le=q.x+B.measured.width-V.x2+$[1][0],ie=q.y-V.y+$[0][1],ee=q.y+B.measured.height-V.y2+$[1][1];W=[[se,ie],[le,ee]]}const{position:U,positionAbsolute:Z}=m0({nodeId:H,nextPosition:J,nodeLookup:_,nodeExtent:W||$,nodeOrigin:M,onError:F});X=X||B.position.x!==U.x||B.position.y!==U.y,B.position=U,B.internals.positionAbsolute=Z}if(y=y||X,!!X&&(O(a,!0),x&&(r||I||!j&&E))){const[H,B]=Sl({nodeId:j,dragItems:a,nodeLookup:_});r==null||r(x,a,H,B),I==null||I(x,H,B),j||E==null||E(x,B)}}async function P(){if(!p)return;const{transform:A,panBy:R,autoPanSpeed:_,autoPanOnNodeDrag:$}=t();if(!$){c=!1,cancelAnimationFrame(l);return}const[T,D]=v0(u,p,_);(T!==0||D!==0)&&(i.x=(i.x??0)-T/A[2],i.y=(i.y??0)-D/A[2],await R({x:T,y:D})&&C(i)),l=requestAnimationFrame(P)}function z(A){var Y;const{nodeLookup:R,multiSelectionActive:_,nodesDraggable:$,transform:T,snapGrid:D,snapToGrid:M,selectNodesOnDrag:I,onNodeDragStart:E,onSelectionDragStart:F,unselectNodesAndEdges:O}=t();h=!0,(!I||!S)&&!_&&j&&((Y=R.get(j))!=null&&Y.selected||O()),S&&I&&j&&(e==null||e(j));const X=is(A.sourceEvent,{transform:T,snapGrid:D,snapToGrid:M,containerBounds:p});if(i=X,a=cN(R,$,X,j),a.size>0&&(n||E||!j&&F)){const[V,Q]=Sl({nodeId:j,dragItems:a,nodeLookup:R});n==null||n(A.sourceEvent,a,V,Q),E==null||E(A.sourceEvent,V,Q),j||F==null||F(A.sourceEvent,Q)}}const L=Kp().clickDistance(k).on("start",A=>{const{domNode:R,nodeDragThreshold:_,transform:$,snapGrid:T,snapToGrid:D}=t();p=(R==null?void 0:R.getBoundingClientRect())||null,v=!1,y=!1,x=A.sourceEvent,_===0&&z(A),i=is(A.sourceEvent,{transform:$,snapGrid:T,snapToGrid:D,containerBounds:p}),u=yt(A.sourceEvent,p)}).on("drag",A=>{const{autoPanOnNodeDrag:R,transform:_,snapGrid:$,snapToGrid:T,nodeDragThreshold:D,nodeLookup:M}=t(),I=is(A.sourceEvent,{transform:_,snapGrid:$,snapToGrid:T,containerBounds:p});if(x=A.sourceEvent,(A.sourceEvent.type==="touchmove"&&A.sourceEvent.touches.length>1||j&&!M.has(j))&&(v=!0),!v){if(!c&&R&&h&&(c=!0,P()),!h){const E=yt(A.sourceEvent,p),F=E.x-u.x,O=E.y-u.y;Math.sqrt(F*F+O*O)>D&&z(A)}(i.x!==I.xSnapped||i.y!==I.ySnapped)&&a&&h&&(u=yt(A.sourceEvent,p),C(I))}}).on("end",A=>{if(!(!h||v)&&(c=!1,h=!1,cancelAnimationFrame(l),a.size>0)){const{nodeLookup:R,updateNodePositions:_,onNodeDragStop:$,onSelectionDragStop:T}=t();if(y&&(_(a,!1),y=!1),o||$||!j&&T){const[D,M]=Sl({nodeId:j,dragItems:a,nodeLookup:R,dragging:!1});o==null||o(A.sourceEvent,a,D,M),$==null||$(A.sourceEvent,D,M),j||T==null||T(A.sourceEvent,M)}}}).filter(A=>{const R=A.target;return!A.button&&(!m||!Hd(R,`.${m}`,N))&&(!g||Hd(R,g,N))});d.call(L)}function f(){d==null||d.on(".drag",null)}return{update:b,destroy:f}}function fN(e,t,n){const r=[],o={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const i of t.values())Is(o,Sr(i))>0&&r.push(i);return r}const hN=250;function pN(e,t,n,r){var a,c;let o=[],i=1/0;const l=fN(e,n,t+hN);for(const u of l){const p=[...((a=u.internals.handleBounds)==null?void 0:a.source)??[],...((c=u.internals.handleBounds)==null?void 0:c.target)??[]];for(const h of p){if(r.nodeId===h.nodeId&&r.type===h.type&&r.id===h.id)continue;const{x:d,y:v}=Ts(u,h,h.position,!0),y=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(v-e.y,2));y>t||(y<i?(o=[{...h,x:d,y:v}],i=y):y===i&&o.push({...h,x:d,y:v}))}}if(!o.length)return null;if(o.length>1){const u=r.type==="source"?"target":"source";return o.find(p=>p.type===u)??o[0]}return o[0]}function $0(e,t,n,r,o,i=!1){var u,p,h;const l=r.get(e);if(!l)return null;const a=o==="strict"?(u=l.internals.handleBounds)==null?void 0:u[t]:[...((p=l.internals.handleBounds)==null?void 0:p.source)??[],...((h=l.internals.handleBounds)==null?void 0:h.target)??[]],c=(n?a==null?void 0:a.find(d=>d.id===n):a==null?void 0:a[0])??null;return c&&i?{...c,...Ts(l,c,c.position,!0)}:c}function D0(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function gN(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const A0=()=>!0;function xN(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:l,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:p,flowId:h,panBy:d,cancelConnection:v,onConnectStart:y,onConnect:x,onConnectEnd:b,isValidConnection:f=A0,onReconnectEnd:m,updateConnection:g,getTransform:N,getFromHandle:S,autoPanSpeed:j,dragThreshold:k=1,handleDomNode:C}){const P=j0(e.target);let z=0,L;const{x:A,y:R}=yt(e),_=D0(i,C),$=a==null?void 0:a.getBoundingClientRect();let T=!1;if(!$||!_)return;const D=$0(o,_,r,c,t);if(!D)return;let M=yt(e,$),I=!1,E=null,F=!1,O=null;function X(){if(!p||!$)return;const[U,Z]=v0(M,$,j);d({x:U,y:Z}),z=requestAnimationFrame(X)}const Y={...D,nodeId:o,type:_,position:D.position},V=c.get(o);let H={inProgress:!0,isValid:null,from:Ts(V,Y,G.Left,!0),fromHandle:Y,fromPosition:Y.position,fromNode:V,to:M,toHandle:null,toPosition:Pd[Y.position],toNode:null};function B(){T=!0,g(H),y==null||y(e,{nodeId:o,handleId:r,handleType:_})}k===0&&B();function J(U){if(!T){const{x:le,y:ie}=yt(U),ee=le-A,ne=ie-R;if(!(ee*ee+ne*ne>k*k))return;B()}if(!S()||!Y){W(U);return}const Z=N();M=yt(U,$),L=pN(Ws(M,Z,!1,[1,1]),n,c,Y),I||(X(),I=!0);const q=R0(U,{handle:L,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:l?"target":"source",isValidConnection:f,doc:P,lib:u,flowId:h,nodeLookup:c});O=q.handleDomNode,E=q.connection,F=gN(!!L,q.isValid);const se={...H,isValid:F,to:q.toHandle&&F?xi({x:q.toHandle.x,y:q.toHandle.y},Z):M,toHandle:q.toHandle,toPosition:F&&q.toHandle?q.toHandle.position:Pd[Y.position],toNode:q.toHandle?c.get(q.toHandle.nodeId):null};F&&L&&H.toHandle&&se.toHandle&&H.toHandle.type===se.toHandle.type&&H.toHandle.nodeId===se.toHandle.nodeId&&H.toHandle.id===se.toHandle.id&&H.to.x===se.to.x&&H.to.y===se.to.y||(g(se),H=se)}function W(U){if(!("touches"in U&&U.touches.length>0)){if(T){(L||O)&&E&&F&&(x==null||x(E));const{inProgress:Z,...q}=H,se={...q,toPosition:H.toHandle?H.toPosition:null};b==null||b(U,se),i&&(m==null||m(U,se))}v(),cancelAnimationFrame(z),I=!1,F=!1,E=null,O=null,P.removeEventListener("mousemove",J),P.removeEventListener("mouseup",W),P.removeEventListener("touchmove",J),P.removeEventListener("touchend",W)}}P.addEventListener("mousemove",J),P.addEventListener("mouseup",W),P.addEventListener("touchmove",J),P.addEventListener("touchend",W)}function R0(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:l,lib:a,flowId:c,isValidConnection:u=A0,nodeLookup:p}){const h=i==="target",d=t?l.querySelector(`.${a}-flow__handle[data-id="${c}-${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`):null,{x:v,y}=yt(e),x=l.elementFromPoint(v,y),b=x!=null&&x.classList.contains(`${a}-flow__handle`)?x:d,f={handleDomNode:b,isValid:!1,connection:null,toHandle:null};if(b){const m=D0(void 0,b),g=b.getAttribute("data-nodeid"),N=b.getAttribute("data-handleid"),S=b.classList.contains("connectable"),j=b.classList.contains("connectableend");if(!g||!m)return f;const k={source:h?g:r,sourceHandle:h?N:o,target:h?r:g,targetHandle:h?o:N};f.connection=k;const P=S&&j&&(n===Nr.Strict?h&&m==="source"||!h&&m==="target":g!==r||N!==o);f.isValid=P&&u(k),f.toHandle=$0(g,m,N,p,n,!0)}return f}const La={onPointerDown:xN,isValid:R0};function mN({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const o=Ze(e);function i({translateExtent:a,width:c,height:u,zoomStep:p=1,pannable:h=!0,zoomable:d=!0,inversePan:v=!1}){const y=g=>{if(g.sourceEvent.type!=="wheel"||!t)return;const N=n(),S=g.sourceEvent.ctrlKey&&Ps()?10:1,j=-g.sourceEvent.deltaY*(g.sourceEvent.deltaMode===1?.05:g.sourceEvent.deltaMode?1:.002)*p,k=N[2]*Math.pow(2,j*S);t.scaleTo(k)};let x=[0,0];const b=g=>{(g.sourceEvent.type==="mousedown"||g.sourceEvent.type==="touchstart")&&(x=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY])},f=g=>{const N=n();if(g.sourceEvent.type!=="mousemove"&&g.sourceEvent.type!=="touchmove"||!t)return;const S=[g.sourceEvent.clientX??g.sourceEvent.touches[0].clientX,g.sourceEvent.clientY??g.sourceEvent.touches[0].clientY],j=[S[0]-x[0],S[1]-x[1]];x=S;const k=r()*Math.max(N[2],Math.log(N[2]))*(v?-1:1),C={x:N[0]-j[0]*k,y:N[1]-j[1]*k},P=[[0,0],[c,u]];t.setViewportConstrained({x:C.x,y:C.y,zoom:N[2]},P,a)},m=d0().on("start",b).on("zoom",h?f:null).on("zoom.wheel",d?y:null);o.call(m,{})}function l(){o.on("zoom",null)}return{update:i,destroy:l,pointer:pt}}const Vi=e=>({x:e.x,y:e.y,zoom:e.k}),kl=({x:e,y:t,zoom:n})=>Fi.translate(e,t).scale(n),rr=(e,t)=>e.target.closest(`.${t}`),L0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),yN=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Cl=(e,t=0,n=yN,r=()=>{})=>{const o=typeof t=="number"&&t>0;return o||r(),o?e.transition().duration(t).ease(n).on("end",r):e},F0=e=>{const t=e.ctrlKey&&Ps()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function vN({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:l,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return p=>{if(rr(p,t))return p.ctrlKey&&p.preventDefault(),!1;p.preventDefault(),p.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(p.ctrlKey&&l){const b=pt(p),f=F0(p),m=h*Math.pow(2,f);r.scaleTo(n,m,b,p);return}const d=p.deltaMode===1?20:1;let v=o===Pn.Vertical?0:p.deltaX*d,y=o===Pn.Horizontal?0:p.deltaY*d;!Ps()&&p.shiftKey&&o!==Pn.Vertical&&(v=p.deltaY*d,y=0),r.translateBy(n,-(v/h)*i,-(y/h)*i,{internal:!0});const x=Vi(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c==null||c(p,x),e.panScrollTimeout=setTimeout(()=>{u==null||u(p,x),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a==null||a(p,x))}}function wN({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){const i=r.type==="wheel",l=!t&&i&&!r.ctrlKey,a=rr(r,e);if(r.ctrlKey&&i&&a&&r.preventDefault(),l||a)return null;r.preventDefault(),n.call(this,r,o)}}function bN({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{var i,l,a;if((i=r.sourceEvent)!=null&&i.internal)return;const o=Vi(r.transform);e.mouseButton=((l=r.sourceEvent)==null?void 0:l.button)||0,e.isZoomingOrPanning=!0,e.prevViewport=o,((a=r.sourceEvent)==null?void 0:a.type)==="mousedown"&&t(!0),n&&(n==null||n(r.sourceEvent,o))}}function NN({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{var l,a;e.usedRightMouseButton=!!(n&&L0(t,e.mouseButton??0)),(l=i.sourceEvent)!=null&&l.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!((a=i.sourceEvent)!=null&&a.internal)&&(o==null||o(i.sourceEvent,Vi(i.transform)))}}function jN({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return l=>{var a;if(!((a=l.sourceEvent)!=null&&a.internal)&&(e.isZoomingOrPanning=!1,i&&L0(t,e.mouseButton??0)&&!e.usedRightMouseButton&&l.sourceEvent&&i(l.sourceEvent),e.usedRightMouseButton=!1,r(!1),o)){const c=Vi(l.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o==null||o(l.sourceEvent,c)},n?150:0)}}}function SN({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:l,noWheelClassName:a,noPanClassName:c,lib:u,connectionInProgress:p}){return h=>{var b;const d=e||t,v=n&&h.ctrlKey,y=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(rr(h,`${u}-flow__node`)||rr(h,`${u}-flow__edge`)))return!0;if(!r&&!d&&!o&&!i&&!n||l||p&&!y||rr(h,a)&&y||rr(h,c)&&(!y||o&&y&&!e)||!n&&h.ctrlKey&&y)return!1;if(!n&&h.type==="touchstart"&&((b=h.touches)==null?void 0:b.length)>1)return h.preventDefault(),!1;if(!d&&!o&&!v&&y||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const x=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||y)&&x}}function kN({domNode:e,minZoom:t,maxZoom:n,translateExtent:r,viewport:o,onPanZoom:i,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),h=d0().scaleExtent([t,n]).translateExtent(r),d=Ze(e).call(h);m({x:o.x,y:o.y,zoom:jr(o.zoom,t,n)},[[0,0],[p.width,p.height]],r);const v=d.on("wheel.zoom"),y=d.on("dblclick.zoom");h.wheelDelta(F0);function x(L,A){return d?new Promise(R=>{h==null||h.interpolate((A==null?void 0:A.interpolate)==="linear"?os:$o).transform(Cl(d,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>R(!0)),L)}):Promise.resolve(!1)}function b({noWheelClassName:L,noPanClassName:A,onPaneContextMenu:R,userSelectionActive:_,panOnScroll:$,panOnDrag:T,panOnScrollMode:D,panOnScrollSpeed:M,preventScrolling:I,zoomOnPinch:E,zoomOnScroll:F,zoomOnDoubleClick:O,zoomActivationKeyPressed:X,lib:Y,onTransformChange:V,connectionInProgress:Q,paneClickDistance:H,selectionOnDrag:B}){_&&!u.isZoomingOrPanning&&f();const J=$&&!X&&!_;h.clickDistance(B?1/0:!mt(H)||H<0?0:H);const W=J?vN({zoomPanValues:u,noWheelClassName:L,d3Selection:d,d3Zoom:h,panOnScrollMode:D,panOnScrollSpeed:M,zoomOnPinch:E,onPanZoomStart:l,onPanZoom:i,onPanZoomEnd:a}):wN({noWheelClassName:L,preventScrolling:I,d3ZoomHandler:v});if(d.on("wheel.zoom",W,{passive:!1}),!_){const Z=bN({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:l});h.on("start",Z);const q=NN({zoomPanValues:u,panOnDrag:T,onPaneContextMenu:!!R,onPanZoom:i,onTransformChange:V});h.on("zoom",q);const se=jN({zoomPanValues:u,panOnDrag:T,panOnScroll:$,onPaneContextMenu:R,onPanZoomEnd:a,onDraggingChange:c});h.on("end",se)}const U=SN({zoomActivationKeyPressed:X,panOnDrag:T,zoomOnScroll:F,panOnScroll:$,zoomOnDoubleClick:O,zoomOnPinch:E,userSelectionActive:_,noPanClassName:A,noWheelClassName:L,lib:Y,connectionInProgress:Q});h.filter(U),O?d.on("dblclick.zoom",y):d.on("dblclick.zoom",null)}function f(){h.on("zoom",null)}async function m(L,A,R){const _=kl(L),$=h==null?void 0:h.constrain()(_,A,R);return $&&await x($),new Promise(T=>T($))}async function g(L,A){const R=kl(L);return await x(R,A),new Promise(_=>_(R))}function N(L){if(d){const A=kl(L),R=d.property("__zoom");(R.k!==L.zoom||R.x!==L.x||R.y!==L.y)&&(h==null||h.transform(d,A,null,{sync:!0}))}}function S(){const L=d?u0(d.node()):{x:0,y:0,k:1};return{x:L.x,y:L.y,zoom:L.k}}function j(L,A){return d?new Promise(R=>{h==null||h.interpolate((A==null?void 0:A.interpolate)==="linear"?os:$o).scaleTo(Cl(d,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>R(!0)),L)}):Promise.resolve(!1)}function k(L,A){return d?new Promise(R=>{h==null||h.interpolate((A==null?void 0:A.interpolate)==="linear"?os:$o).scaleBy(Cl(d,A==null?void 0:A.duration,A==null?void 0:A.ease,()=>R(!0)),L)}):Promise.resolve(!1)}function C(L){h==null||h.scaleExtent(L)}function P(L){h==null||h.translateExtent(L)}function z(L){const A=!mt(L)||L<0?0:L;h==null||h.clickDistance(A)}return{update:b,destroy:f,setViewport:g,setViewportConstrained:m,getViewport:S,scaleTo:j,scaleBy:k,setScaleExtent:C,setTranslateExtent:P,syncViewport:N,setClickDistance:z}}var Cr;(function(e){e.Line="line",e.Handle="handle"})(Cr||(Cr={}));function CN({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:o,affectsY:i}){const l=e-t,a=n-r,c=[l>0?1:l<0?-1:0,a>0?1:a<0?-1:0];return l&&o&&(c[0]=c[0]*-1),a&&i&&(c[1]=c[1]*-1),c}function Wd(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),o=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:o}}function Zt(e,t){return Math.max(0,t-e)}function qt(e,t){return Math.max(0,e-t)}function mo(e,t,n){return Math.max(0,t-e,e-n)}function Ud(e,t){return e?!t:t}function _N(e,t,n,r,o,i,l,a){let{affectsX:c,affectsY:u}=t;const{isHorizontal:p,isVertical:h}=t,d=p&&h,{xSnapped:v,ySnapped:y}=n,{minWidth:x,maxWidth:b,minHeight:f,maxHeight:m}=r,{x:g,y:N,width:S,height:j,aspectRatio:k}=e;let C=Math.floor(p?v-e.pointerX:0),P=Math.floor(h?y-e.pointerY:0);const z=S+(c?-C:C),L=j+(u?-P:P),A=-i[0]*S,R=-i[1]*j;let _=mo(z,x,b),$=mo(L,f,m);if(l){let M=0,I=0;c&&C<0?M=Zt(g+C+A,l[0][0]):!c&&C>0&&(M=qt(g+z+A,l[1][0])),u&&P<0?I=Zt(N+P+R,l[0][1]):!u&&P>0&&(I=qt(N+L+R,l[1][1])),_=Math.max(_,M),$=Math.max($,I)}if(a){let M=0,I=0;c&&C>0?M=qt(g+C,a[0][0]):!c&&C<0&&(M=Zt(g+z,a[1][0])),u&&P>0?I=qt(N+P,a[0][1]):!u&&P<0&&(I=Zt(N+L,a[1][1])),_=Math.max(_,M),$=Math.max($,I)}if(o){if(p){const M=mo(z/k,f,m)*k;if(_=Math.max(_,M),l){let I=0;!c&&!u||c&&!u&&d?I=qt(N+R+z/k,l[1][1])*k:I=Zt(N+R+(c?C:-C)/k,l[0][1])*k,_=Math.max(_,I)}if(a){let I=0;!c&&!u||c&&!u&&d?I=Zt(N+z/k,a[1][1])*k:I=qt(N+(c?C:-C)/k,a[0][1])*k,_=Math.max(_,I)}}if(h){const M=mo(L*k,x,b)/k;if($=Math.max($,M),l){let I=0;!c&&!u||u&&!c&&d?I=qt(g+L*k+A,l[1][0])/k:I=Zt(g+(u?P:-P)*k+A,l[0][0])/k,$=Math.max($,I)}if(a){let I=0;!c&&!u||u&&!c&&d?I=Zt(g+L*k,a[1][0])/k:I=qt(g+(u?P:-P)*k,a[0][0])/k,$=Math.max($,I)}}}P=P+(P<0?$:-$),C=C+(C<0?_:-_),o&&(d?z>L*k?P=(Ud(c,u)?-C:C)/k:C=(Ud(c,u)?-P:P)*k:p?(P=C/k,u=c):(C=P*k,c=u));const T=c?g+C:g,D=u?N+P:N;return{width:S+(c?-C:C),height:j+(u?-P:P),x:i[0]*C*(c?-1:1)+T,y:i[1]*P*(u?-1:1)+D}}const z0={width:0,height:0,x:0,y:0},EN={...z0,pointerX:0,pointerY:0,aspectRatio:1};function MN(e){return[[0,0],[e.measured.width,e.measured.height]]}function IN(e,t,n){const r=t.position.x+e.position.x,o=t.position.y+e.position.y,i=e.measured.width??0,l=e.measured.height??0,a=n[0]*i,c=n[1]*l;return[[r-a,o-c],[r+i-a,o+l-c]]}function PN({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:o}){const i=Ze(e);let l={controlDirection:Wd("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function a({controlPosition:u,boundaries:p,keepAspectRatio:h,resizeDirection:d,onResizeStart:v,onResize:y,onResizeEnd:x,shouldResize:b}){let f={...z0},m={...EN};l={boundaries:p,resizeDirection:d,keepAspectRatio:h,controlDirection:Wd(u)};let g,N=null,S=[],j,k,C,P=!1;const z=Kp().on("start",L=>{const{nodeLookup:A,transform:R,snapGrid:_,snapToGrid:$,nodeOrigin:T,paneDomNode:D}=n();if(g=A.get(t),!g)return;N=(D==null?void 0:D.getBoundingClientRect())??null;const{xSnapped:M,ySnapped:I}=is(L.sourceEvent,{transform:R,snapGrid:_,snapToGrid:$,containerBounds:N});f={width:g.measured.width??0,height:g.measured.height??0,x:g.position.x??0,y:g.position.y??0},m={...f,pointerX:M,pointerY:I,aspectRatio:f.width/f.height},j=void 0,g.parentId&&(g.extent==="parent"||g.expandParent)&&(j=A.get(g.parentId),k=j&&g.extent==="parent"?MN(j):void 0),S=[],C=void 0;for(const[E,F]of A)if(F.parentId===t&&(S.push({id:E,position:{...F.position},extent:F.extent}),F.extent==="parent"||F.expandParent)){const O=IN(F,g,F.origin??T);C?C=[[Math.min(O[0][0],C[0][0]),Math.min(O[0][1],C[0][1])],[Math.max(O[1][0],C[1][0]),Math.max(O[1][1],C[1][1])]]:C=O}v==null||v(L,{...f})}).on("drag",L=>{const{transform:A,snapGrid:R,snapToGrid:_,nodeOrigin:$}=n(),T=is(L.sourceEvent,{transform:A,snapGrid:R,snapToGrid:_,containerBounds:N}),D=[];if(!g)return;const{x:M,y:I,width:E,height:F}=f,O={},X=g.origin??$,{width:Y,height:V,x:Q,y:H}=_N(m,l.controlDirection,T,l.boundaries,l.keepAspectRatio,X,k,C),B=Y!==E,J=V!==F,W=Q!==M&&B,U=H!==I&&J;if(!W&&!U&&!B&&!J)return;if((W||U||X[0]===1||X[1]===1)&&(O.x=W?Q:f.x,O.y=U?H:f.y,f.x=O.x,f.y=O.y,S.length>0)){const le=Q-M,ie=H-I;for(const ee of S)ee.position={x:ee.position.x-le+X[0]*(Y-E),y:ee.position.y-ie+X[1]*(V-F)},D.push(ee)}if((B||J)&&(O.width=B&&(!l.resizeDirection||l.resizeDirection==="horizontal")?Y:f.width,O.height=J&&(!l.resizeDirection||l.resizeDirection==="vertical")?V:f.height,f.width=O.width,f.height=O.height),j&&g.expandParent){const le=X[0]*(O.width??0);O.x&&O.x<le&&(f.x=le,m.x=m.x-(O.x-le));const ie=X[1]*(O.height??0);O.y&&O.y<ie&&(f.y=ie,m.y=m.y-(O.y-ie))}const Z=CN({width:f.width,prevWidth:E,height:f.height,prevHeight:F,affectsX:l.controlDirection.affectsX,affectsY:l.controlDirection.affectsY}),q={...f,direction:Z};(b==null?void 0:b(L,q))!==!1&&(P=!0,y==null||y(L,q),r(O,D))}).on("end",L=>{P&&(x==null||x(L,{...f}),o==null||o({...f}),P=!1)});i.call(z)}function c(){i.on(".drag",null)}return{update:a,destroy:c}}var O0={exports:{}},V0={},B0={exports:{}},H0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _r=w;function TN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $N=typeof Object.is=="function"?Object.is:TN,DN=_r.useState,AN=_r.useEffect,RN=_r.useLayoutEffect,LN=_r.useDebugValue;function FN(e,t){var n=t(),r=DN({inst:{value:n,getSnapshot:t}}),o=r[0].inst,i=r[1];return RN(function(){o.value=n,o.getSnapshot=t,_l(o)&&i({inst:o})},[e,n,t]),AN(function(){return _l(o)&&i({inst:o}),e(function(){_l(o)&&i({inst:o})})},[e]),LN(n),n}function _l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$N(e,n)}catch{return!0}}function zN(e,t){return t()}var ON=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?zN:FN;H0.useSyncExternalStore=_r.useSyncExternalStore!==void 0?_r.useSyncExternalStore:ON;B0.exports=H0;var VN=B0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bi=w,BN=VN;function HN(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var WN=typeof Object.is=="function"?Object.is:HN,UN=BN.useSyncExternalStore,YN=Bi.useRef,XN=Bi.useEffect,QN=Bi.useMemo,GN=Bi.useDebugValue;V0.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var i=YN(null);if(i.current===null){var l={hasValue:!1,value:null};i.current=l}else l=i.current;i=QN(function(){function c(v){if(!u){if(u=!0,p=v,v=r(v),o!==void 0&&l.hasValue){var y=l.value;if(o(y,v))return h=y}return h=v}if(y=h,WN(p,v))return y;var x=r(v);return o!==void 0&&o(y,x)?(p=v,y):(p=v,h=x)}var u=!1,p,h,d=n===void 0?null:n;return[function(){return c(t())},d===null?void 0:function(){return c(d())}]},[t,n,r,o]);var a=UN(e,i[0],i[1]);return XN(function(){l.hasValue=!0,l.value=a},[a]),GN(a),a};O0.exports=V0;var KN=O0.exports;const ZN=Nf(KN),qN={},Yd=e=>{let t;const n=new Set,r=(p,h)=>{const d=typeof p=="function"?p(t):p;if(!Object.is(d,t)){const v=t;t=h??(typeof d!="object"||d===null)?d:Object.assign({},t,d),n.forEach(y=>y(t,v))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>u,subscribe:p=>(n.add(p),()=>n.delete(p)),destroy:()=>{(qN?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,c);return c},JN=e=>e?Yd(e):Yd,{useDebugValue:ej}=Ha,{useSyncExternalStoreWithSelector:tj}=ZN,nj=e=>e;function W0(e,t=nj,n){const r=tj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ej(r),r}const Xd=(e,t)=>{const n=JN(e),r=(o,i=t)=>W0(n,o,i);return Object.assign(r,n),r},rj=(e,t)=>e?Xd(e,t):Xd;function Ne(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,o]of e)if(!Object.is(o,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Hi=w.createContext(null),sj=Hi.Provider,U0=Pt.error001();function ue(e,t){const n=w.useContext(Hi);if(n===null)throw new Error(U0);return W0(n,e,t)}function ye(){const e=w.useContext(Hi);if(e===null)throw new Error(U0);return w.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Qd={display:"none"},oj={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Y0="react-flow__node-desc",X0="react-flow__edge-desc",ij="react-flow__aria-live",lj=e=>e.ariaLiveMessage,aj=e=>e.ariaLabelConfig;function cj({rfId:e}){const t=ue(lj);return s.jsx("div",{id:`${ij}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:oj,children:t})}function uj({rfId:e,disableKeyboardA11y:t}){const n=ue(aj);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${Y0}-${e}`,style:Qd,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${X0}-${e}`,style:Qd,children:n["edge.a11yDescription.default"]}),!t&&s.jsx(cj,{rfId:e})]})}const Er=w.forwardRef(({position:e="top-left",children:t,className:n,style:r,...o},i)=>{const l=`${e}`.split("-");return s.jsx("div",{className:_e(["react-flow__panel",n,...l]),style:r,ref:i,...o,children:t})});Er.displayName="Panel";function dj({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:s.jsx(Er,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const fj=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},yo=e=>e.id;function hj(e,t){return Ne(e.selectedNodes.map(yo),t.selectedNodes.map(yo))&&Ne(e.selectedEdges.map(yo),t.selectedEdges.map(yo))}function pj({onSelectionChange:e}){const t=ye(),{selectedNodes:n,selectedEdges:r}=ue(fj,hj);return w.useEffect(()=>{const o={nodes:n,edges:r};e==null||e(o),t.getState().onSelectionChangeHandlers.forEach(i=>i(o))},[n,r,e]),null}const gj=e=>!!e.onSelectionChangeHandlers;function xj({onSelectionChange:e}){const t=ue(gj);return e||t?s.jsx(pj,{onSelectionChange:e}):null}const Q0=[0,0],mj={x:0,y:0,zoom:1},yj=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig"],Gd=[...yj,"rfId"],vj=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Kd={translateExtent:Es,nodeOrigin:Q0,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function wj(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:o,setTranslateExtent:i,setNodeExtent:l,reset:a,setDefaultNodesAndEdges:c}=ue(vj,Ne),u=ye();w.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{p.current=Kd,a()}),[]);const p=w.useRef(Kd);return w.useEffect(()=>{for(const h of Gd){const d=e[h],v=p.current[h];d!==v&&(typeof e[h]>"u"||(h==="nodes"?t(d):h==="edges"?n(d):h==="minZoom"?r(d):h==="maxZoom"?o(d):h==="translateExtent"?i(d):h==="nodeExtent"?l(d):h==="ariaLabelConfig"?u.setState({ariaLabelConfig:W1(d)}):h==="fitView"?u.setState({fitViewQueued:d}):h==="fitViewOptions"?u.setState({fitViewOptions:d}):u.setState({[h]:d})))}p.current=e},Gd.map(h=>e[h])),null}function Zd(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function bj(e){var r;const[t,n]=w.useState(e==="system"?null:e);return w.useEffect(()=>{if(e!=="system"){n(e);return}const o=Zd(),i=()=>n(o!=null&&o.matches?"dark":"light");return i(),o==null||o.addEventListener("change",i),()=>{o==null||o.removeEventListener("change",i)}},[e]),t!==null?t:(r=Zd())!=null&&r.matches?"dark":"light"}const qd=typeof document<"u"?document:null;function $s(e=null,t={target:qd,actInsideInputWithModifier:!0}){const[n,r]=w.useState(!1),o=w.useRef(!1),i=w.useRef(new Set([])),[l,a]=w.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),p=u.reduce((h,d)=>h.concat(...d),[]);return[u,p]}return[[],[]]},[e]);return w.useEffect(()=>{const c=(t==null?void 0:t.target)??qd,u=(t==null?void 0:t.actInsideInputWithModifier)??!0;if(e!==null){const p=v=>{var b,f;if(o.current=v.ctrlKey||v.metaKey||v.shiftKey||v.altKey,(!o.current||o.current&&!u)&&S0(v))return!1;const x=ef(v.code,a);if(i.current.add(v[x]),Jd(l,i.current,!1)){const m=((f=(b=v.composedPath)==null?void 0:b.call(v))==null?void 0:f[0])||v.target,g=(m==null?void 0:m.nodeName)==="BUTTON"||(m==null?void 0:m.nodeName)==="A";t.preventDefault!==!1&&(o.current||!g)&&v.preventDefault(),r(!0)}},h=v=>{const y=ef(v.code,a);Jd(l,i.current,!0)?(r(!1),i.current.clear()):i.current.delete(v[y]),v.key==="Meta"&&i.current.clear(),o.current=!1},d=()=>{i.current.clear(),r(!1)};return c==null||c.addEventListener("keydown",p),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",d),window.addEventListener("contextmenu",d),()=>{c==null||c.removeEventListener("keydown",p),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",d),window.removeEventListener("contextmenu",d)}}},[e,r]),n}function Jd(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(o=>t.has(o)))}function ef(e,t){return t.includes(e)?"code":"key"}const Nj=()=>{const e=ye();return w.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t==null?void 0:t.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n==null?void 0:n.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,o,i],panZoom:l}=e.getState();return l?(await l.setViewport({x:t.x??r,y:t.y??o,zoom:t.zoom??i},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:o,minZoom:i,maxZoom:l,panZoom:a}=e.getState(),c=Hc(t,r,o,i,l,(n==null?void 0:n.padding)??.1);return a?(await a.setViewport(c,{duration:n==null?void 0:n.duration,ease:n==null?void 0:n.ease,interpolate:n==null?void 0:n.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:o,snapToGrid:i,domNode:l}=e.getState();if(!l)return t;const{x:a,y:c}=l.getBoundingClientRect(),u={x:t.x-a,y:t.y-c},p=n.snapGrid??o,h=n.snapToGrid??i;return Ws(u,r,h,p)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:o,y:i}=r.getBoundingClientRect(),l=xi(t,n);return{x:l.x+o,y:l.y+i}}}),[])};function G0(e,t){const n=[],r=new Map,o=[];for(const i of e)if(i.type==="add"){o.push(i);continue}else if(i.type==="remove"||i.type==="replace")r.set(i.id,[i]);else{const l=r.get(i.id);l?l.push(i):r.set(i.id,[i])}for(const i of t){const l=r.get(i.id);if(!l){n.push(i);continue}if(l[0].type==="remove")continue;if(l[0].type==="replace"){n.push({...l[0].item});continue}const a={...i};for(const c of l)jj(c,a);n.push(a)}return o.length&&o.forEach(i=>{i.index!==void 0?n.splice(i.index,0,{...i.item}):n.push({...i.item})}),n}function jj(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function K0(e,t){return G0(e,t)}function Z0(e,t){return G0(e,t)}function jn(e,t){return{id:e,type:"select",selected:t}}function sr(e,t=new Set,n=!1){const r=[];for(const[o,i]of e){const l=t.has(o);!(i.selected===void 0&&!l)&&i.selected!==l&&(n&&(i.selected=l),r.push(jn(i.id,l)))}return r}function tf({items:e=[],lookup:t}){var o;const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,l]of e.entries()){const a=t.get(l.id),c=((o=a==null?void 0:a.internals)==null?void 0:o.userNode)??a;c!==void 0&&c!==l&&n.push({id:l.id,item:l,type:"replace"}),c===void 0&&n.push({item:l,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function nf(e){return{id:e.id,type:"remove"}}const rf=e=>D1(e),Sj=e=>x0(e);function q0(e){return w.forwardRef(e)}const kj=typeof window<"u"?w.useLayoutEffect:w.useEffect;function sf(e){const[t,n]=w.useState(BigInt(0)),[r]=w.useState(()=>Cj(()=>n(o=>o+BigInt(1))));return kj(()=>{const o=r.get();o.length&&(e(o),r.reset())},[t]),r}function Cj(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const J0=w.createContext(null);function _j({children:e}){const t=ye(),n=w.useCallback(a=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:p,onNodesChange:h,nodeLookup:d,fitViewQueued:v}=t.getState();let y=c;for(const b of a)y=typeof b=="function"?b(y):b;const x=tf({items:y,lookup:d});p&&u(y),x.length>0?h==null||h(x):v&&window.requestAnimationFrame(()=>{const{fitViewQueued:b,nodes:f,setNodes:m}=t.getState();b&&m(f)})},[]),r=sf(n),o=w.useCallback(a=>{const{edges:c=[],setEdges:u,hasDefaultEdges:p,onEdgesChange:h,edgeLookup:d}=t.getState();let v=c;for(const y of a)v=typeof y=="function"?y(v):y;p?u(v):h&&h(tf({items:v,lookup:d}))},[]),i=sf(o),l=w.useMemo(()=>({nodeQueue:r,edgeQueue:i}),[]);return s.jsx(J0.Provider,{value:l,children:e})}function Ej(){const e=w.useContext(J0);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Mj=e=>!!e.panZoom;function $t(){const e=Nj(),t=ye(),n=Ej(),r=ue(Mj),o=w.useMemo(()=>{const i=h=>t.getState().nodeLookup.get(h),l=h=>{n.nodeQueue.push(h)},a=h=>{n.edgeQueue.push(h)},c=h=>{var f,m;const{nodeLookup:d,nodeOrigin:v}=t.getState(),y=rf(h)?h:d.get(h.id),x=y.parentId?N0(y.position,y.measured,y.parentId,d,v):y.position,b={...y,position:x,width:((f=y.measured)==null?void 0:f.width)??y.width,height:((m=y.measured)==null?void 0:m.height)??y.height};return Sr(b)},u=(h,d,v={replace:!1})=>{l(y=>y.map(x=>{if(x.id===h){const b=typeof d=="function"?d(x):d;return v.replace&&rf(b)?b:{...x,...b}}return x}))},p=(h,d,v={replace:!1})=>{a(y=>y.map(x=>{if(x.id===h){const b=typeof d=="function"?d(x):d;return v.replace&&Sj(b)?b:{...x,...b}}return x}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>{var d;return(d=i(h))==null?void 0:d.internals.userNode},getInternalNode:i,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(d=>({...d}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:l,setEdges:a,addNodes:h=>{const d=Array.isArray(h)?h:[h];n.nodeQueue.push(v=>[...v,...d])},addEdges:h=>{const d=Array.isArray(h)?h:[h];n.edgeQueue.push(v=>[...v,...d])},toObject:()=>{const{nodes:h=[],edges:d=[],transform:v}=t.getState(),[y,x,b]=v;return{nodes:h.map(f=>({...f})),edges:d.map(f=>({...f})),viewport:{x:y,y:x,zoom:b}}},deleteElements:async({nodes:h=[],edges:d=[]})=>{const{nodes:v,edges:y,onNodesDelete:x,onEdgesDelete:b,triggerNodeChanges:f,triggerEdgeChanges:m,onDelete:g,onBeforeDelete:N}=t.getState(),{nodes:S,edges:j}=await z1({nodesToRemove:h,edgesToRemove:d,nodes:v,edges:y,onBeforeDelete:N}),k=j.length>0,C=S.length>0;if(k){const P=j.map(nf);b==null||b(j),m(P)}if(C){const P=S.map(nf);x==null||x(S),f(P)}return(C||k)&&(g==null||g({nodes:S,edges:j})),{deletedNodes:S,deletedEdges:j}},getIntersectingNodes:(h,d=!0,v)=>{const y=$d(h),x=y?h:c(h),b=v!==void 0;return x?(v||t.getState().nodes).filter(f=>{const m=t.getState().nodeLookup.get(f.id);if(m&&!y&&(f.id===h.id||!m.internals.positionAbsolute))return!1;const g=Sr(b?f:m),N=Is(g,x);return d&&N>0||N>=g.width*g.height||N>=x.width*x.height}):[]},isNodeIntersecting:(h,d,v=!0)=>{const x=$d(h)?h:c(h);if(!x)return!1;const b=Is(x,d);return v&&b>0||b>=d.width*d.height||b>=x.width*x.height},updateNode:u,updateNodeData:(h,d,v={replace:!1})=>{u(h,y=>{const x=typeof d=="function"?d(y):d;return v.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},v)},updateEdge:p,updateEdgeData:(h,d,v={replace:!1})=>{p(h,y=>{const x=typeof d=="function"?d(y):d;return v.replace?{...y,data:x}:{...y,data:{...y.data,...x}}},v)},getNodesBounds:h=>{const{nodeLookup:d,nodeOrigin:v}=t.getState();return A1(h,{nodeLookup:d,nodeOrigin:v})},getHandleConnections:({type:h,id:d,nodeId:v})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${v}-${h}${d?`-${d}`:""}`))==null?void 0:y.values())??[])},getNodeConnections:({type:h,handleId:d,nodeId:v})=>{var y;return Array.from(((y=t.getState().connectionLookup.get(`${v}${h?d?`-${h}-${d}`:`-${h}`:""}`))==null?void 0:y.values())??[])},fitView:async h=>{const d=t.getState().fitViewResolver??H1();return t.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:d}),n.nodeQueue.push(v=>[...v]),d.promise}}},[]);return w.useMemo(()=>({...o,...e,viewportInitialized:r}),[r])}const of=e=>e.selected,Ij=typeof window<"u"?window:void 0;function Pj({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=ye(),{deleteElements:r}=$t(),o=$s(e,{actInsideInputWithModifier:!1}),i=$s(t,{target:Ij});w.useEffect(()=>{if(o){const{edges:l,nodes:a}=n.getState();r({nodes:a.filter(of),edges:l.filter(of)}),n.setState({nodesSelectionActive:!1})}},[o]),w.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])}function Tj(e){const t=ye();w.useEffect(()=>{const n=()=>{var o,i,l,a;if(!e.current||!(((i=(o=e.current).checkVisibility)==null?void 0:i.call(o))??!0))return!1;const r=Wc(e.current);(r.height===0||r.width===0)&&((a=(l=t.getState()).onError)==null||a.call(l,"004",Pt.error004())),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const Wi={position:"absolute",width:"100%",height:"100%",top:0,left:0},$j=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function Dj({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:o=.5,panOnScrollMode:i=Pn.Free,zoomOnDoubleClick:l=!0,panOnDrag:a=!0,defaultViewport:c,translateExtent:u,minZoom:p,maxZoom:h,zoomActivationKeyCode:d,preventScrolling:v=!0,children:y,noWheelClassName:x,noPanClassName:b,onViewportChange:f,isControlledViewport:m,paneClickDistance:g,selectionOnDrag:N}){const S=ye(),j=w.useRef(null),{userSelectionActive:k,lib:C,connectionInProgress:P}=ue($j,Ne),z=$s(d),L=w.useRef();Tj(j);const A=w.useCallback(R=>{f==null||f({x:R[0],y:R[1],zoom:R[2]}),m||S.setState({transform:R})},[f,m]);return w.useEffect(()=>{if(j.current){L.current=kN({domNode:j.current,minZoom:p,maxZoom:h,translateExtent:u,viewport:c,onDraggingChange:T=>S.setState({paneDragging:T}),onPanZoomStart:(T,D)=>{const{onViewportChangeStart:M,onMoveStart:I}=S.getState();I==null||I(T,D),M==null||M(D)},onPanZoom:(T,D)=>{const{onViewportChange:M,onMove:I}=S.getState();I==null||I(T,D),M==null||M(D)},onPanZoomEnd:(T,D)=>{const{onViewportChangeEnd:M,onMoveEnd:I}=S.getState();I==null||I(T,D),M==null||M(D)}});const{x:R,y:_,zoom:$}=L.current.getViewport();return S.setState({panZoom:L.current,transform:[R,_,$],domNode:j.current.closest(".react-flow")}),()=>{var T;(T=L.current)==null||T.destroy()}}},[]),w.useEffect(()=>{var R;(R=L.current)==null||R.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:o,panOnScrollMode:i,zoomOnDoubleClick:l,panOnDrag:a,zoomActivationKeyPressed:z,preventScrolling:v,noPanClassName:b,userSelectionActive:k,noWheelClassName:x,lib:C,onTransformChange:A,connectionInProgress:P,selectionOnDrag:N,paneClickDistance:g})},[e,t,n,r,o,i,l,a,z,v,b,k,x,C,A,P,N,g]),s.jsx("div",{className:"react-flow__renderer",ref:j,style:Wi,children:y})}const Aj=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Rj(){const{userSelectionActive:e,userSelectionRect:t}=ue(Aj,Ne);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const El=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},Lj=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Fj({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Ms.Full,panOnDrag:r,paneClickDistance:o,selectionOnDrag:i,onSelectionStart:l,onSelectionEnd:a,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:p,onPaneMouseEnter:h,onPaneMouseMove:d,onPaneMouseLeave:v,children:y}){const x=ye(),{userSelectionActive:b,elementsSelectable:f,dragging:m,connectionInProgress:g}=ue(Lj,Ne),N=f&&(e||b),S=w.useRef(null),j=w.useRef(),k=w.useRef(new Set),C=w.useRef(new Set),P=w.useRef(!1),z=M=>{if(P.current||g){P.current=!1;return}c==null||c(M),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},L=M=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){M.preventDefault();return}u==null||u(M)},A=p?M=>p(M):void 0,R=M=>{P.current&&(M.stopPropagation(),P.current=!1)},_=M=>{var V,Q;const{domNode:I}=x.getState();if(j.current=I==null?void 0:I.getBoundingClientRect(),!j.current)return;const E=M.target===S.current;if(!E&&!!M.target.closest(".nokey")||!e||!(i&&E||t)||M.button!==0||!M.isPrimary)return;(Q=(V=M.target)==null?void 0:V.setPointerCapture)==null||Q.call(V,M.pointerId),P.current=!1;const{x:X,y:Y}=yt(M.nativeEvent,j.current);x.setState({userSelectionRect:{width:0,height:0,startX:X,startY:Y,x:X,y:Y}}),E||(M.stopPropagation(),M.preventDefault())},$=M=>{const{userSelectionRect:I,transform:E,nodeLookup:F,edgeLookup:O,connectionLookup:X,triggerNodeChanges:Y,triggerEdgeChanges:V,defaultEdgeOptions:Q,resetSelectedElements:H}=x.getState();if(!j.current||!I)return;const{x:B,y:J}=yt(M.nativeEvent,j.current),{startX:W,startY:U}=I;if(!P.current){const ie=t?0:o;if(Math.hypot(B-W,J-U)<=ie)return;H(),l==null||l(M)}P.current=!0;const Z={startX:W,startY:U,x:B<W?B:W,y:J<U?J:U,width:Math.abs(B-W),height:Math.abs(J-U)},q=k.current,se=C.current;k.current=new Set(Bc(F,Z,E,n===Ms.Partial,!0).map(ie=>ie.id)),C.current=new Set;const le=(Q==null?void 0:Q.selectable)??!0;for(const ie of k.current){const ee=X.get(ie);if(ee)for(const{edgeId:ne}of ee.values()){const fe=O.get(ne);fe&&(fe.selectable??le)&&C.current.add(ne)}}if(!Dd(q,k.current)){const ie=sr(F,k.current,!0);Y(ie)}if(!Dd(se,C.current)){const ie=sr(O,C.current);V(ie)}x.setState({userSelectionRect:Z,userSelectionActive:!0,nodesSelectionActive:!1})},T=M=>{var I,E;M.button===0&&((E=(I=M.target)==null?void 0:I.releasePointerCapture)==null||E.call(I,M.pointerId),!b&&M.target===S.current&&x.getState().userSelectionRect&&(z==null||z(M)),x.setState({userSelectionActive:!1,userSelectionRect:null}),P.current&&(a==null||a(M),x.setState({nodesSelectionActive:k.current.size>0})))},D=r===!0||Array.isArray(r)&&r.includes(0);return s.jsxs("div",{className:_e(["react-flow__pane",{draggable:D,dragging:m,selection:e}]),onClick:N?void 0:El(z,S),onContextMenu:El(L,S),onWheel:El(A,S),onPointerEnter:N?void 0:h,onPointerMove:N?$:d,onPointerUp:N?T:void 0,onPointerDownCapture:N?_:void 0,onClickCapture:N?R:void 0,onPointerLeave:v,ref:S,style:Wi,children:[y,s.jsx(Rj,{})]})}function Fa({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:l,nodeLookup:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Pt.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&l)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var p;return(p=r==null?void 0:r.current)==null?void 0:p.blur()})):o([e])}function eg({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:o,isSelectable:i,nodeClickDistance:l}){const a=ye(),[c,u]=w.useState(!1),p=w.useRef();return w.useEffect(()=>{p.current=dN({getStoreItems:()=>a.getState(),onNodeMouseDown:h=>{Fa({id:h,store:a,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),w.useEffect(()=>{var h,d;if(t)(h=p.current)==null||h.destroy();else if(e.current)return(d=p.current)==null||d.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:i,nodeId:o,nodeClickDistance:l}),()=>{var v;(v=p.current)==null||v.destroy()}},[n,r,t,i,e,o]),c}const zj=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function tg(){const e=ye();return w.useCallback(n=>{const{nodeExtent:r,snapToGrid:o,snapGrid:i,nodesDraggable:l,onError:a,updateNodePositions:c,nodeLookup:u,nodeOrigin:p}=e.getState(),h=new Map,d=zj(l),v=o?i[0]:5,y=o?i[1]:5,x=n.direction.x*v*n.factor,b=n.direction.y*y*n.factor;for(const[,f]of u){if(!d(f))continue;let m={x:f.internals.positionAbsolute.x+x,y:f.internals.positionAbsolute.y+b};o&&(m=Hs(m,i));const{position:g,positionAbsolute:N}=m0({nodeId:f.id,nextPosition:m,nodeLookup:u,nodeExtent:r,nodeOrigin:p,onError:a});f.position=g,f.internals.positionAbsolute=N,h.set(f.id,f)}c(h)},[])}const Zc=w.createContext(null),Oj=Zc.Provider;Zc.Consumer;const ng=()=>w.useContext(Zc),Vj=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Bj=(e,t,n)=>r=>{const{connectionClickStartHandle:o,connectionMode:i,connection:l}=r,{fromHandle:a,toHandle:c,isValid:u}=l,p=(c==null?void 0:c.nodeId)===e&&(c==null?void 0:c.id)===t&&(c==null?void 0:c.type)===n;return{connectingFrom:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.id)===t&&(a==null?void 0:a.type)===n,connectingTo:p,clickConnecting:(o==null?void 0:o.nodeId)===e&&(o==null?void 0:o.id)===t&&(o==null?void 0:o.type)===n,isPossibleEndHandle:i===Nr.Strict?(a==null?void 0:a.type)!==n:e!==(a==null?void 0:a.nodeId)||t!==(a==null?void 0:a.id),connectionInProcess:!!a,clickConnectionInProcess:!!o,valid:p&&u}};function Hj({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:o=!0,isConnectableEnd:i=!0,id:l,onConnect:a,children:c,className:u,onMouseDown:p,onTouchStart:h,...d},v){var $,T;const y=l||null,x=e==="target",b=ye(),f=ng(),{connectOnClick:m,noPanClassName:g,rfId:N}=ue(Vj,Ne),{connectingFrom:S,connectingTo:j,clickConnecting:k,isPossibleEndHandle:C,connectionInProcess:P,clickConnectionInProcess:z,valid:L}=ue(Bj(f,y,e),Ne);f||(T=($=b.getState()).onError)==null||T.call($,"010",Pt.error010());const A=D=>{const{defaultEdgeOptions:M,onConnect:I,hasDefaultEdges:E}=b.getState(),F={...M,...D};if(E){const{edges:O,setEdges:X}=b.getState();X(E0(F,O))}I==null||I(F),a==null||a(F)},R=D=>{if(!f)return;const M=k0(D.nativeEvent);if(o&&(M&&D.button===0||!M)){const I=b.getState();La.onPointerDown(D.nativeEvent,{handleDomNode:D.currentTarget,autoPanOnConnect:I.autoPanOnConnect,connectionMode:I.connectionMode,connectionRadius:I.connectionRadius,domNode:I.domNode,nodeLookup:I.nodeLookup,lib:I.lib,isTarget:x,handleId:y,nodeId:f,flowId:I.rfId,panBy:I.panBy,cancelConnection:I.cancelConnection,onConnectStart:I.onConnectStart,onConnectEnd:I.onConnectEnd,updateConnection:I.updateConnection,onConnect:A,isValidConnection:n||I.isValidConnection,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,autoPanSpeed:I.autoPanSpeed,dragThreshold:I.connectionDragThreshold})}M?p==null||p(D):h==null||h(D)},_=D=>{const{onClickConnectStart:M,onClickConnectEnd:I,connectionClickStartHandle:E,connectionMode:F,isValidConnection:O,lib:X,rfId:Y,nodeLookup:V,connection:Q}=b.getState();if(!f||!E&&!o)return;if(!E){M==null||M(D.nativeEvent,{nodeId:f,handleId:y,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:f,type:e,id:y}});return}const H=j0(D.target),B=n||O,{connection:J,isValid:W}=La.isValid(D.nativeEvent,{handle:{nodeId:f,id:y,type:e},connectionMode:F,fromNodeId:E.nodeId,fromHandleId:E.id||null,fromType:E.type,isValidConnection:B,flowId:Y,doc:H,lib:X,nodeLookup:V});W&&J&&A(J);const U=structuredClone(Q);delete U.inProgress,U.toPosition=U.toHandle?U.toHandle.position:null,I==null||I(D,U),b.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":y,"data-nodeid":f,"data-handlepos":t,"data-id":`${N}-${f}-${y}-${e}`,className:_e(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",g,u,{source:!x,target:x,connectable:r,connectablestart:o,connectableend:i,clickconnecting:k,connectingfrom:S,connectingto:j,valid:L,connectionindicator:r&&(!P||C)&&(P||z?i:o)}]),onMouseDown:R,onTouchStart:R,onClick:m?_:void 0,ref:v,...d,children:c})}const oe=w.memo(q0(Hj));function Wj({data:e,isConnectable:t,sourcePosition:n=G.Bottom}){return s.jsxs(s.Fragment,{children:[e==null?void 0:e.label,s.jsx(oe,{type:"source",position:n,isConnectable:t})]})}function Uj({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:r=G.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,s.jsx(oe,{type:"source",position:r,isConnectable:t})]})}function Yj(){return null}function Xj({data:e,isConnectable:t,targetPosition:n=G.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(oe,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label]})}const mi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},lf={input:Wj,default:Uj,output:Xj,group:Yj};function Qj(e){var t,n,r,o;return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??((t=e.style)==null?void 0:t.width),height:e.height??e.initialHeight??((n=e.style)==null?void 0:n.height)}:{width:e.width??((r=e.style)==null?void 0:r.width),height:e.height??((o=e.style)==null?void 0:o.height)}}const Gj=e=>{const{width:t,height:n,x:r,y:o}=Bs(e.nodeLookup,{filter:i=>!!i.selected});return{width:mt(t)?t:null,height:mt(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${o}px)`}};function Kj({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=ye(),{width:o,height:i,transformString:l,userSelectionActive:a}=ue(Gj,Ne),c=tg(),u=w.useRef(null);if(w.useEffect(()=>{var d;n||(d=u.current)==null||d.focus({preventScroll:!0})},[n]),eg({nodeRef:u}),a||!o||!i)return null;const p=e?d=>{const v=r.getState().nodes.filter(y=>y.selected);e(d,v)}:void 0,h=d=>{Object.prototype.hasOwnProperty.call(mi,d.key)&&(d.preventDefault(),c({direction:mi[d.key],factor:d.shiftKey?4:1}))};return s.jsx("div",{className:_e(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l},children:s.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:o,height:i}})})}const af=typeof window<"u"?window:void 0,Zj=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function rg({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:l,paneClickDistance:a,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:p,selectionMode:h,onSelectionStart:d,onSelectionEnd:v,multiSelectionKeyCode:y,panActivationKeyCode:x,zoomActivationKeyCode:b,elementsSelectable:f,zoomOnScroll:m,zoomOnPinch:g,panOnScroll:N,panOnScrollSpeed:S,panOnScrollMode:j,zoomOnDoubleClick:k,panOnDrag:C,defaultViewport:P,translateExtent:z,minZoom:L,maxZoom:A,preventScrolling:R,onSelectionContextMenu:_,noWheelClassName:$,noPanClassName:T,disableKeyboardA11y:D,onViewportChange:M,isControlledViewport:I}){const{nodesSelectionActive:E,userSelectionActive:F}=ue(Zj),O=$s(u,{target:af}),X=$s(x,{target:af}),Y=X||C,V=X||N,Q=p&&Y!==!0,H=O||F||Q;return Pj({deleteKeyCode:c,multiSelectionKeyCode:y}),s.jsx(Dj,{onPaneContextMenu:i,elementsSelectable:f,zoomOnScroll:m,zoomOnPinch:g,panOnScroll:V,panOnScrollSpeed:S,panOnScrollMode:j,zoomOnDoubleClick:k,panOnDrag:!O&&Y,defaultViewport:P,translateExtent:z,minZoom:L,maxZoom:A,zoomActivationKeyCode:b,preventScrolling:R,noWheelClassName:$,noPanClassName:T,onViewportChange:M,isControlledViewport:I,paneClickDistance:a,selectionOnDrag:Q,children:s.jsxs(Fj,{onSelectionStart:d,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:o,onPaneContextMenu:i,onPaneScroll:l,panOnDrag:Y,isSelecting:!!H,selectionMode:h,selectionKeyPressed:O,paneClickDistance:a,selectionOnDrag:Q,children:[e,E&&s.jsx(Kj,{onSelectionContextMenu:_,noPanClassName:T,disableKeyboardA11y:D})]})})}rg.displayName="FlowRenderer";const qj=w.memo(rg),Jj=e=>t=>e?Bc(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function eS(e){return ue(w.useCallback(Jj(e),[e]),Ne)}const tS=e=>e.updateNodeInternals;function nS(){const e=ue(tS),[t]=w.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(o=>{const i=o.target.getAttribute("data-id");r.set(i,{id:i,nodeElement:o.target,force:!0})}),e(r)}));return w.useEffect(()=>()=>{t==null||t.disconnect()},[t]),t}function rS({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const o=ye(),i=w.useRef(null),l=w.useRef(null),a=w.useRef(e.sourcePosition),c=w.useRef(e.targetPosition),u=w.useRef(t),p=n&&!!e.internals.handleBounds;return w.useEffect(()=>{i.current&&!e.hidden&&(!p||l.current!==i.current)&&(l.current&&(r==null||r.unobserve(l.current)),r==null||r.observe(i.current),l.current=i.current)},[p,e.hidden]),w.useEffect(()=>()=>{l.current&&(r==null||r.unobserve(l.current),l.current=null)},[]),w.useEffect(()=>{if(i.current){const h=u.current!==t,d=a.current!==e.sourcePosition,v=c.current!==e.targetPosition;(h||d||v)&&(u.current=t,a.current=e.sourcePosition,c.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function sS({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:o,onContextMenu:i,onDoubleClick:l,nodesDraggable:a,elementsSelectable:c,nodesConnectable:u,nodesFocusable:p,resizeObserver:h,noDragClassName:d,noPanClassName:v,disableKeyboardA11y:y,rfId:x,nodeTypes:b,nodeClickDistance:f,onError:m}){const{node:g,internals:N,isParent:S}=ue(B=>{const J=B.nodeLookup.get(e),W=B.parentLookup.has(e);return{node:J,internals:J.internals,isParent:W}},Ne);let j=g.type||"default",k=(b==null?void 0:b[j])||lf[j];k===void 0&&(m==null||m("003",Pt.error003(j)),j="default",k=(b==null?void 0:b.default)||lf.default);const C=!!(g.draggable||a&&typeof g.draggable>"u"),P=!!(g.selectable||c&&typeof g.selectable>"u"),z=!!(g.connectable||u&&typeof g.connectable>"u"),L=!!(g.focusable||p&&typeof g.focusable>"u"),A=ye(),R=b0(g),_=rS({node:g,nodeType:j,hasDimensions:R,resizeObserver:h}),$=eg({nodeRef:_,disabled:g.hidden||!C,noDragClassName:d,handleSelector:g.dragHandle,nodeId:e,isSelectable:P,nodeClickDistance:f}),T=tg();if(g.hidden)return null;const D=Qt(g),M=Qj(g),I=P||C||t||n||r||o,E=n?B=>n(B,{...N.userNode}):void 0,F=r?B=>r(B,{...N.userNode}):void 0,O=o?B=>o(B,{...N.userNode}):void 0,X=i?B=>i(B,{...N.userNode}):void 0,Y=l?B=>l(B,{...N.userNode}):void 0,V=B=>{const{selectNodesOnDrag:J,nodeDragThreshold:W}=A.getState();P&&(!J||!C||W>0)&&Fa({id:e,store:A,nodeRef:_}),t&&t(B,{...N.userNode})},Q=B=>{if(!(S0(B.nativeEvent)||y)){if(f0.includes(B.key)&&P){const J=B.key==="Escape";Fa({id:e,store:A,unselect:J,nodeRef:_})}else if(C&&g.selected&&Object.prototype.hasOwnProperty.call(mi,B.key)){B.preventDefault();const{ariaLabelConfig:J}=A.getState();A.setState({ariaLiveMessage:J["node.a11yDescription.ariaLiveMessage"]({direction:B.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),T({direction:mi[B.key],factor:B.shiftKey?4:1})}}},H=()=>{var se;if(y||!((se=_.current)!=null&&se.matches(":focus-visible")))return;const{transform:B,width:J,height:W,autoPanOnNodeFocus:U,setCenter:Z}=A.getState();if(!U)return;Bc(new Map([[e,g]]),{x:0,y:0,width:J,height:W},B,!0).length>0||Z(g.position.x+D.width/2,g.position.y+D.height/2,{zoom:B[2]})};return s.jsx("div",{className:_e(["react-flow__node",`react-flow__node-${j}`,{[v]:C},g.className,{selected:g.selected,selectable:P,parent:S,draggable:C,dragging:$}]),ref:_,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:I?"all":"none",visibility:R?"visible":"hidden",...g.style,...M},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:E,onMouseMove:F,onMouseLeave:O,onContextMenu:X,onClick:V,onDoubleClick:Y,onKeyDown:L?Q:void 0,tabIndex:L?0:void 0,onFocus:L?H:void 0,role:g.ariaRole??(L?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${Y0}-${x}`,"aria-label":g.ariaLabel,...g.domAttributes,children:s.jsx(Oj,{value:e,children:s.jsx(k,{id:e,data:g.data,type:j,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:g.selected??!1,selectable:P,draggable:C,deletable:g.deletable??!0,isConnectable:z,sourcePosition:g.sourcePosition,targetPosition:g.targetPosition,dragging:$,dragHandle:g.dragHandle,zIndex:N.z,parentId:g.parentId,...D})})})}var oS=w.memo(sS);const iS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function sg(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,onError:i}=ue(iS,Ne),l=eS(e.onlyRenderVisibleElements),a=nS();return s.jsx("div",{className:"react-flow__nodes",style:Wi,children:l.map(c=>s.jsx(oS,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:a,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:i},c))})}sg.displayName="NodeRenderer";const lS=w.memo(sg);function aS(e){return ue(w.useCallback(n=>{if(!e)return n.edges.map(o=>o.id);const r=[];if(n.width&&n.height)for(const o of n.edges){const i=n.nodeLookup.get(o.source),l=n.nodeLookup.get(o.target);i&&l&&X1({sourceNode:i,targetNode:l,width:n.width,height:n.height,transform:n.transform})&&r.push(o.id)}return r},[e]),Ne)}const cS=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return s.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},uS=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return s.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},cf={[pi.Arrow]:cS,[pi.ArrowClosed]:uS};function dS(e){const t=ye();return w.useMemo(()=>{var o,i;return Object.prototype.hasOwnProperty.call(cf,e)?cf[e]:((i=(o=t.getState()).onError)==null||i.call(o,"009",Pt.error009(e)),null)},[e])}const fS=({id:e,type:t,color:n,width:r=12.5,height:o=12.5,markerUnits:i="strokeWidth",strokeWidth:l,orient:a="auto-start-reverse"})=>{const c=dS(t);return c?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0",children:s.jsx(c,{color:n,strokeWidth:l})}):null},og=({defaultColor:e,rfId:t})=>{const n=ue(i=>i.edges),r=ue(i=>i.defaultEdgeOptions),o=w.useMemo(()=>eN(n,{id:t,defaultColor:e,defaultMarkerStart:r==null?void 0:r.markerStart,defaultMarkerEnd:r==null?void 0:r.markerEnd}),[n,r,t,e]);return o.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:o.map(i=>s.jsx(fS,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};og.displayName="MarkerDefinitions";var hS=w.memo(og);function ig({x:e,y:t,label:n,labelStyle:r,labelShowBg:o=!0,labelBgStyle:i,labelBgPadding:l=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...p}){const[h,d]=w.useState({x:1,y:0,width:0,height:0}),v=_e(["react-flow__edge-textwrapper",u]),y=w.useRef(null);return w.useEffect(()=>{if(y.current){const x=y.current.getBBox();d({x:x.x,y:x.y,width:x.width,height:x.height})}},[n]),n?s.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:v,visibility:h.width?"visible":"hidden",...p,children:[o&&s.jsx("rect",{width:h.width+2*l[0],x:-l[0],y:-l[1],height:h.height+2*l[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),s.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:y,style:r,children:n}),c]}):null}ig.displayName="EdgeText";const pS=w.memo(ig);function Tr({path:e,labelX:t,labelY:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c,interactionWidth:u=20,...p}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...p,d:e,fill:"none",className:_e(["react-flow__edge-path",p.className])}),u?s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,r&&mt(t)&&mt(n)?s.jsx(pS,{x:t,y:n,label:r,labelStyle:o,labelShowBg:i,labelBgStyle:l,labelBgPadding:a,labelBgBorderRadius:c}):null]})}function uf({pos:e,x1:t,y1:n,x2:r,y2:o}){return e===G.Left||e===G.Right?[.5*(t+r),n]:[t,.5*(n+o)]}function lg({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:r,targetY:o,targetPosition:i=G.Top}){const[l,a]=uf({pos:n,x1:e,y1:t,x2:r,y2:o}),[c,u]=uf({pos:i,x1:r,y1:o,x2:e,y2:t}),[p,h,d,v]=C0({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${l},${a} ${c},${u} ${r},${o}`,p,h,d,v]}function ag(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:l,targetPosition:a,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:b,interactionWidth:f})=>{const[m,g,N]=lg({sourceX:n,sourceY:r,sourcePosition:l,targetX:o,targetY:i,targetPosition:a}),S=e.isInternal?void 0:t;return s.jsx(Tr,{id:S,path:m,labelX:g,labelY:N,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:b,interactionWidth:f})})}const gS=ag({isInternal:!1}),cg=ag({isInternal:!0});gS.displayName="SimpleBezierEdge";cg.displayName="SimpleBezierEdgeInternal";function ug(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:l,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:h,style:d,sourcePosition:v=G.Bottom,targetPosition:y=G.Top,markerEnd:x,markerStart:b,pathOptions:f,interactionWidth:m})=>{const[g,N,S]=Da({sourceX:n,sourceY:r,sourcePosition:v,targetX:o,targetY:i,targetPosition:y,borderRadius:f==null?void 0:f.borderRadius,offset:f==null?void 0:f.offset,stepPosition:f==null?void 0:f.stepPosition}),j=e.isInternal?void 0:t;return s.jsx(Tr,{id:j,path:g,labelX:N,labelY:S,label:l,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:h,style:d,markerEnd:x,markerStart:b,interactionWidth:m})})}const dg=ug({isInternal:!1}),fg=ug({isInternal:!0});dg.displayName="SmoothStepEdge";fg.displayName="SmoothStepEdgeInternal";function hg(e){return w.memo(({id:t,...n})=>{var o;const r=e.isInternal?void 0:t;return s.jsx(dg,{...n,id:r,pathOptions:w.useMemo(()=>{var i;return{borderRadius:0,offset:(i=n.pathOptions)==null?void 0:i.offset}},[(o=n.pathOptions)==null?void 0:o.offset])})})}const xS=hg({isInternal:!1}),pg=hg({isInternal:!0});xS.displayName="StepEdge";pg.displayName="StepEdgeInternal";function gg(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,label:l,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:h,style:d,markerEnd:v,markerStart:y,interactionWidth:x})=>{const[b,f,m]=Yc({sourceX:n,sourceY:r,targetX:o,targetY:i}),g=e.isInternal?void 0:t;return s.jsx(Tr,{id:g,path:b,labelX:f,labelY:m,label:l,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:p,labelBgBorderRadius:h,style:d,markerEnd:v,markerStart:y,interactionWidth:x})})}const mS=gg({isInternal:!1}),xg=gg({isInternal:!0});mS.displayName="StraightEdge";xg.displayName="StraightEdgeInternal";function mg(e){return w.memo(({id:t,sourceX:n,sourceY:r,targetX:o,targetY:i,sourcePosition:l=G.Bottom,targetPosition:a=G.Top,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:b,pathOptions:f,interactionWidth:m})=>{const[g,N,S]=Uc({sourceX:n,sourceY:r,sourcePosition:l,targetX:o,targetY:i,targetPosition:a,curvature:f==null?void 0:f.curvature}),j=e.isInternal?void 0:t;return s.jsx(Tr,{id:j,path:g,labelX:N,labelY:S,label:c,labelStyle:u,labelShowBg:p,labelBgStyle:h,labelBgPadding:d,labelBgBorderRadius:v,style:y,markerEnd:x,markerStart:b,interactionWidth:m})})}const yS=mg({isInternal:!1}),yg=mg({isInternal:!0});yS.displayName="BezierEdge";yg.displayName="BezierEdgeInternal";const df={default:yg,straight:xg,step:pg,smoothstep:fg,simplebezier:cg},ff={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},vS=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,wS=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,hf="react-flow__edgeupdater";function pf({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:o,onMouseEnter:i,onMouseOut:l,type:a}){return s.jsx("circle",{onMouseDown:o,onMouseEnter:i,onMouseOut:l,className:_e([hf,`${hf}-${a}`]),cx:vS(t,r,e),cy:wS(n,r,e),r,stroke:"transparent",fill:"transparent"})}function bS({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:o,targetX:i,targetY:l,sourcePosition:a,targetPosition:c,onReconnect:u,onReconnectStart:p,onReconnectEnd:h,setReconnecting:d,setUpdateHover:v}){const y=ye(),x=(N,S)=>{if(N.button!==0)return;const{autoPanOnConnect:j,domNode:k,isValidConnection:C,connectionMode:P,connectionRadius:z,lib:L,onConnectStart:A,onConnectEnd:R,cancelConnection:_,nodeLookup:$,rfId:T,panBy:D,updateConnection:M}=y.getState(),I=S.type==="target",E=(X,Y)=>{d(!1),h==null||h(X,n,S.type,Y)},F=X=>u==null?void 0:u(n,X),O=(X,Y)=>{d(!0),p==null||p(N,n,S.type),A==null||A(X,Y)};La.onPointerDown(N.nativeEvent,{autoPanOnConnect:j,connectionMode:P,connectionRadius:z,domNode:k,handleId:S.id,nodeId:S.nodeId,nodeLookup:$,isTarget:I,edgeUpdaterType:S.type,lib:L,flowId:T,cancelConnection:_,panBy:D,isValidConnection:C,onConnect:F,onConnectStart:O,onConnectEnd:R,onReconnectEnd:E,updateConnection:M,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},b=N=>x(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),f=N=>x(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),m=()=>v(!0),g=()=>v(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(pf,{position:a,centerX:r,centerY:o,radius:t,onMouseDown:b,onMouseEnter:m,onMouseOut:g,type:"source"}),(e===!0||e==="target")&&s.jsx(pf,{position:c,centerX:i,centerY:l,radius:t,onMouseDown:f,onMouseEnter:m,onMouseOut:g,type:"target"})]})}function NS({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:o,onDoubleClick:i,onContextMenu:l,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,reconnectRadius:p,onReconnect:h,onReconnectStart:d,onReconnectEnd:v,rfId:y,edgeTypes:x,noPanClassName:b,onError:f,disableKeyboardA11y:m}){let g=ue(Z=>Z.edgeLookup.get(e));const N=ue(Z=>Z.defaultEdgeOptions);g=N?{...N,...g}:g;let S=g.type||"default",j=(x==null?void 0:x[S])||df[S];j===void 0&&(f==null||f("011",Pt.error011(S)),S="default",j=(x==null?void 0:x.default)||df.default);const k=!!(g.focusable||t&&typeof g.focusable>"u"),C=typeof h<"u"&&(g.reconnectable||n&&typeof g.reconnectable>"u"),P=!!(g.selectable||r&&typeof g.selectable>"u"),z=w.useRef(null),[L,A]=w.useState(!1),[R,_]=w.useState(!1),$=ye(),{zIndex:T,sourceX:D,sourceY:M,targetX:I,targetY:E,sourcePosition:F,targetPosition:O}=ue(w.useCallback(Z=>{const q=Z.nodeLookup.get(g.source),se=Z.nodeLookup.get(g.target);if(!q||!se)return{zIndex:g.zIndex,...ff};const le=J1({id:e,sourceNode:q,targetNode:se,sourceHandle:g.sourceHandle||null,targetHandle:g.targetHandle||null,connectionMode:Z.connectionMode,onError:f});return{zIndex:Y1({selected:g.selected,zIndex:g.zIndex,sourceNode:q,targetNode:se,elevateOnSelect:Z.elevateEdgesOnSelect}),...le||ff}},[g.source,g.target,g.sourceHandle,g.targetHandle,g.selected,g.zIndex]),Ne),X=w.useMemo(()=>g.markerStart?`url('#${Aa(g.markerStart,y)}')`:void 0,[g.markerStart,y]),Y=w.useMemo(()=>g.markerEnd?`url('#${Aa(g.markerEnd,y)}')`:void 0,[g.markerEnd,y]);if(g.hidden||D===null||M===null||I===null||E===null)return null;const V=Z=>{var ie;const{addSelectedEdges:q,unselectNodesAndEdges:se,multiSelectionActive:le}=$.getState();P&&($.setState({nodesSelectionActive:!1}),g.selected&&le?(se({nodes:[],edges:[g]}),(ie=z.current)==null||ie.blur()):q([e])),o&&o(Z,g)},Q=i?Z=>{i(Z,{...g})}:void 0,H=l?Z=>{l(Z,{...g})}:void 0,B=a?Z=>{a(Z,{...g})}:void 0,J=c?Z=>{c(Z,{...g})}:void 0,W=u?Z=>{u(Z,{...g})}:void 0,U=Z=>{var q;if(!m&&f0.includes(Z.key)&&P){const{unselectNodesAndEdges:se,addSelectedEdges:le}=$.getState();Z.key==="Escape"?((q=z.current)==null||q.blur(),se({edges:[g]})):le([e])}};return s.jsx("svg",{style:{zIndex:T},children:s.jsxs("g",{className:_e(["react-flow__edge",`react-flow__edge-${S}`,g.className,b,{selected:g.selected,animated:g.animated,inactive:!P&&!o,updating:L,selectable:P}]),onClick:V,onDoubleClick:Q,onContextMenu:H,onMouseEnter:B,onMouseMove:J,onMouseLeave:W,onKeyDown:k?U:void 0,tabIndex:k?0:void 0,role:g.ariaRole??(k?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":g.ariaLabel===null?void 0:g.ariaLabel||`Edge from ${g.source} to ${g.target}`,"aria-describedby":k?`${X0}-${y}`:void 0,ref:z,...g.domAttributes,children:[!R&&s.jsx(j,{id:e,source:g.source,target:g.target,type:g.type,selected:g.selected,animated:g.animated,selectable:P,deletable:g.deletable??!0,label:g.label,labelStyle:g.labelStyle,labelShowBg:g.labelShowBg,labelBgStyle:g.labelBgStyle,labelBgPadding:g.labelBgPadding,labelBgBorderRadius:g.labelBgBorderRadius,sourceX:D,sourceY:M,targetX:I,targetY:E,sourcePosition:F,targetPosition:O,data:g.data,style:g.style,sourceHandleId:g.sourceHandle,targetHandleId:g.targetHandle,markerStart:X,markerEnd:Y,pathOptions:"pathOptions"in g?g.pathOptions:void 0,interactionWidth:g.interactionWidth}),C&&s.jsx(bS,{edge:g,isReconnectable:C,reconnectRadius:p,onReconnect:h,onReconnectStart:d,onReconnectEnd:v,sourceX:D,sourceY:M,targetX:I,targetY:E,sourcePosition:F,targetPosition:O,setUpdateHover:A,setReconnecting:_})]})})}var jS=w.memo(NS);const SS=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function vg({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:o,onReconnect:i,onEdgeContextMenu:l,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:p,reconnectRadius:h,onEdgeDoubleClick:d,onReconnectStart:v,onReconnectEnd:y,disableKeyboardA11y:x}){const{edgesFocusable:b,edgesReconnectable:f,elementsSelectable:m,onError:g}=ue(SS,Ne),N=aS(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(hS,{defaultColor:e,rfId:n}),N.map(S=>s.jsx(jS,{id:S,edgesFocusable:b,edgesReconnectable:f,elementsSelectable:m,noPanClassName:o,onReconnect:i,onContextMenu:l,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:p,reconnectRadius:h,onDoubleClick:d,onReconnectStart:v,onReconnectEnd:y,rfId:n,onError:g,edgeTypes:r,disableKeyboardA11y:x},S))]})}vg.displayName="EdgeRenderer";const kS=w.memo(vg),CS=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function _S({children:e}){const t=ue(CS);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function ES(e){const t=$t(),n=w.useRef(!1);w.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const MS=e=>{var t;return(t=e.panZoom)==null?void 0:t.syncViewport};function IS(e){const t=ue(MS),n=ye();return w.useEffect(()=>{e&&(t==null||t(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function PS(e){return e.connection.inProgress?{...e.connection,to:Ws(e.connection.to,e.transform)}:{...e.connection}}function TS(e){return PS}function $S(e){const t=TS();return ue(t,Ne)}const DS=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function AS({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:o,width:i,height:l,isValid:a,inProgress:c}=ue(DS,Ne);return!(i&&o&&c)?null:s.jsx("svg",{style:e,width:i,height:l,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:_e(["react-flow__connection",g0(a)]),children:s.jsx(wg,{style:t,type:n,CustomComponent:r,isValid:a})})})}const wg=({style:e,type:t=rn.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:o,from:i,fromNode:l,fromHandle:a,fromPosition:c,to:u,toNode:p,toHandle:h,toPosition:d}=$S();if(!o)return;if(n)return s.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:l,fromHandle:a,fromX:i.x,fromY:i.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:d,connectionStatus:g0(r),toNode:p,toHandle:h});let v="";const y={sourceX:i.x,sourceY:i.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:d};switch(t){case rn.Bezier:[v]=Uc(y);break;case rn.SimpleBezier:[v]=lg(y);break;case rn.Step:[v]=Da({...y,borderRadius:0});break;case rn.SmoothStep:[v]=Da(y);break;default:[v]=Yc(y)}return s.jsx("path",{d:v,fill:"none",className:"react-flow__connection-path",style:e})};wg.displayName="ConnectionLine";const RS={};function gf(e=RS){w.useRef(e),ye(),w.useEffect(()=>{},[e])}function LS(){ye(),w.useRef(!1),w.useEffect(()=>{},[])}function bg({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:o,onNodeDoubleClick:i,onEdgeDoubleClick:l,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:p,onSelectionContextMenu:h,onSelectionStart:d,onSelectionEnd:v,connectionLineType:y,connectionLineStyle:x,connectionLineComponent:b,connectionLineContainerStyle:f,selectionKeyCode:m,selectionOnDrag:g,selectionMode:N,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:k,deleteKeyCode:C,onlyRenderVisibleElements:P,elementsSelectable:z,defaultViewport:L,translateExtent:A,minZoom:R,maxZoom:_,preventScrolling:$,defaultMarkerColor:T,zoomOnScroll:D,zoomOnPinch:M,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:F,zoomOnDoubleClick:O,panOnDrag:X,onPaneClick:Y,onPaneMouseEnter:V,onPaneMouseMove:Q,onPaneMouseLeave:H,onPaneScroll:B,onPaneContextMenu:J,paneClickDistance:W,nodeClickDistance:U,onEdgeContextMenu:Z,onEdgeMouseEnter:q,onEdgeMouseMove:se,onEdgeMouseLeave:le,reconnectRadius:ie,onReconnect:ee,onReconnectStart:ne,onReconnectEnd:fe,noDragClassName:Ge,noWheelClassName:te,noPanClassName:ut,disableKeyboardA11y:Dt,nodeExtent:Ui,rfId:Us,viewport:Bn,onViewportChange:$r}){return gf(e),gf(t),LS(),ES(n),IS(Bn),s.jsx(qj,{onPaneClick:Y,onPaneMouseEnter:V,onPaneMouseMove:Q,onPaneMouseLeave:H,onPaneContextMenu:J,onPaneScroll:B,paneClickDistance:W,deleteKeyCode:C,selectionKeyCode:m,selectionOnDrag:g,selectionMode:N,onSelectionStart:d,onSelectionEnd:v,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:k,elementsSelectable:z,zoomOnScroll:D,zoomOnPinch:M,zoomOnDoubleClick:O,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:F,panOnDrag:X,defaultViewport:L,translateExtent:A,minZoom:R,maxZoom:_,onSelectionContextMenu:h,preventScrolling:$,noDragClassName:Ge,noWheelClassName:te,noPanClassName:ut,disableKeyboardA11y:Dt,onViewportChange:$r,isControlledViewport:!!Bn,children:s.jsxs(_S,{children:[s.jsx(kS,{edgeTypes:t,onEdgeClick:o,onEdgeDoubleClick:l,onReconnect:ee,onReconnectStart:ne,onReconnectEnd:fe,onlyRenderVisibleElements:P,onEdgeContextMenu:Z,onEdgeMouseEnter:q,onEdgeMouseMove:se,onEdgeMouseLeave:le,reconnectRadius:ie,defaultMarkerColor:T,noPanClassName:ut,disableKeyboardA11y:Dt,rfId:Us}),s.jsx(AS,{style:x,type:y,component:b,containerStyle:f}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(lS,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:i,onNodeMouseEnter:a,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:p,nodeClickDistance:U,onlyRenderVisibleElements:P,noPanClassName:ut,noDragClassName:Ge,disableKeyboardA11y:Dt,nodeExtent:Ui,rfId:Us}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}bg.displayName="GraphView";const FS=w.memo(bg),xf=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:l,fitViewOptions:a,minZoom:c=.5,maxZoom:u=2,nodeOrigin:p,nodeExtent:h}={})=>{const d=new Map,v=new Map,y=new Map,x=new Map,b=r??t??[],f=n??e??[],m=p??[0,0],g=h??Es;P0(y,x,b);const N=Ra(f,d,v,{nodeOrigin:m,nodeExtent:g,elevateNodesOnSelect:!1});let S=[0,0,1];if(l&&o&&i){const j=Bs(d,{filter:z=>!!((z.width||z.initialWidth)&&(z.height||z.initialHeight))}),{x:k,y:C,zoom:P}=Hc(j,o,i,c,u,(a==null?void 0:a.padding)??.1);S=[k,C,P]}return{rfId:"1",width:o??0,height:i??0,transform:S,nodes:f,nodesInitialized:N,nodeLookup:d,parentLookup:v,edges:b,edgeLookup:x,connectionLookup:y,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:Es,nodeExtent:g,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Nr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:m,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:l??!1,fitViewOptions:a,fitViewResolver:null,connection:{...p0},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:O1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:h0}},zS=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:l,fitViewOptions:a,minZoom:c,maxZoom:u,nodeOrigin:p,nodeExtent:h})=>rj((d,v)=>{async function y(){const{nodeLookup:x,panZoom:b,fitViewOptions:f,fitViewResolver:m,width:g,height:N,minZoom:S,maxZoom:j}=v();b&&(await F1({nodes:x,width:g,height:N,panZoom:b,minZoom:S,maxZoom:j},f),m==null||m.resolve(!0),d({fitViewResolver:null}))}return{...xf({nodes:e,edges:t,width:o,height:i,fitView:l,fitViewOptions:a,minZoom:c,maxZoom:u,nodeOrigin:p,nodeExtent:h,defaultNodes:n,defaultEdges:r}),setNodes:x=>{const{nodeLookup:b,parentLookup:f,nodeOrigin:m,elevateNodesOnSelect:g,fitViewQueued:N}=v(),S=Ra(x,b,f,{nodeOrigin:m,nodeExtent:h,elevateNodesOnSelect:g,checkEquality:!0});N&&S?(y(),d({nodes:x,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):d({nodes:x,nodesInitialized:S})},setEdges:x=>{const{connectionLookup:b,edgeLookup:f}=v();P0(b,f,x),d({edges:x})},setDefaultNodesAndEdges:(x,b)=>{if(x){const{setNodes:f}=v();f(x),d({hasDefaultNodes:!0})}if(b){const{setEdges:f}=v();f(b),d({hasDefaultEdges:!0})}},updateNodeInternals:x=>{const{triggerNodeChanges:b,nodeLookup:f,parentLookup:m,domNode:g,nodeOrigin:N,nodeExtent:S,debug:j,fitViewQueued:k}=v(),{changes:C,updatedInternals:P}=lN(x,f,m,g,N,S);P&&(rN(f,m,{nodeOrigin:N,nodeExtent:S}),k?(y(),d({fitViewQueued:!1,fitViewOptions:void 0})):d({}),(C==null?void 0:C.length)>0&&(j&&console.log("React Flow: trigger node changes",C),b==null||b(C)))},updateNodePositions:(x,b=!1)=>{const f=[],m=[],{nodeLookup:g,triggerNodeChanges:N}=v();for(const[S,j]of x){const k=g.get(S),C=!!(k!=null&&k.expandParent&&(k!=null&&k.parentId)&&(j!=null&&j.position)),P={id:S,type:"position",position:C?{x:Math.max(0,j.position.x),y:Math.max(0,j.position.y)}:j.position,dragging:b};C&&k.parentId&&f.push({id:S,parentId:k.parentId,rect:{...j.internals.positionAbsolute,width:j.measured.width??0,height:j.measured.height??0}}),m.push(P)}if(f.length>0){const{parentLookup:S,nodeOrigin:j}=v(),k=Kc(f,g,S,j);m.push(...k)}N(m)},triggerNodeChanges:x=>{const{onNodesChange:b,setNodes:f,nodes:m,hasDefaultNodes:g,debug:N}=v();if(x!=null&&x.length){if(g){const S=K0(x,m);f(S)}N&&console.log("React Flow: trigger node changes",x),b==null||b(x)}},triggerEdgeChanges:x=>{const{onEdgesChange:b,setEdges:f,edges:m,hasDefaultEdges:g,debug:N}=v();if(x!=null&&x.length){if(g){const S=Z0(x,m);f(S)}N&&console.log("React Flow: trigger edge changes",x),b==null||b(x)}},addSelectedNodes:x=>{const{multiSelectionActive:b,edgeLookup:f,nodeLookup:m,triggerNodeChanges:g,triggerEdgeChanges:N}=v();if(b){const S=x.map(j=>jn(j,!0));g(S);return}g(sr(m,new Set([...x]),!0)),N(sr(f))},addSelectedEdges:x=>{const{multiSelectionActive:b,edgeLookup:f,nodeLookup:m,triggerNodeChanges:g,triggerEdgeChanges:N}=v();if(b){const S=x.map(j=>jn(j,!0));N(S);return}N(sr(f,new Set([...x]))),g(sr(m,new Set,!0))},unselectNodesAndEdges:({nodes:x,edges:b}={})=>{const{edges:f,nodes:m,nodeLookup:g,triggerNodeChanges:N,triggerEdgeChanges:S}=v(),j=x||m,k=b||f,C=j.map(z=>{const L=g.get(z.id);return L&&(L.selected=!1),jn(z.id,!1)}),P=k.map(z=>jn(z.id,!1));N(C),S(P)},setMinZoom:x=>{const{panZoom:b,maxZoom:f}=v();b==null||b.setScaleExtent([x,f]),d({minZoom:x})},setMaxZoom:x=>{const{panZoom:b,minZoom:f}=v();b==null||b.setScaleExtent([f,x]),d({maxZoom:x})},setTranslateExtent:x=>{var b;(b=v().panZoom)==null||b.setTranslateExtent(x),d({translateExtent:x})},resetSelectedElements:()=>{const{edges:x,nodes:b,triggerNodeChanges:f,triggerEdgeChanges:m,elementsSelectable:g}=v();if(!g)return;const N=b.reduce((j,k)=>k.selected?[...j,jn(k.id,!1)]:j,[]),S=x.reduce((j,k)=>k.selected?[...j,jn(k.id,!1)]:j,[]);f(N),m(S)},setNodeExtent:x=>{const{nodes:b,nodeLookup:f,parentLookup:m,nodeOrigin:g,elevateNodesOnSelect:N,nodeExtent:S}=v();x[0][0]===S[0][0]&&x[0][1]===S[0][1]&&x[1][0]===S[1][0]&&x[1][1]===S[1][1]||(Ra(b,f,m,{nodeOrigin:g,nodeExtent:x,elevateNodesOnSelect:N,checkEquality:!1}),d({nodeExtent:x}))},panBy:x=>{const{transform:b,width:f,height:m,panZoom:g,translateExtent:N}=v();return aN({delta:x,panZoom:g,transform:b,translateExtent:N,width:f,height:m})},setCenter:async(x,b,f)=>{const{width:m,height:g,maxZoom:N,panZoom:S}=v();if(!S)return Promise.resolve(!1);const j=typeof(f==null?void 0:f.zoom)<"u"?f.zoom:N;return await S.setViewport({x:m/2-x*j,y:g/2-b*j,zoom:j},{duration:f==null?void 0:f.duration,ease:f==null?void 0:f.ease,interpolate:f==null?void 0:f.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{d({connection:{...p0}})},updateConnection:x=>{d({connection:x})},reset:()=>d({...xf()})}},Object.is);function OS({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:o,initialHeight:i,initialMinZoom:l,initialMaxZoom:a,initialFitViewOptions:c,fitView:u,nodeOrigin:p,nodeExtent:h,children:d}){const[v]=w.useState(()=>zS({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:o,height:i,fitView:u,minZoom:l,maxZoom:a,fitViewOptions:c,nodeOrigin:p,nodeExtent:h}));return s.jsx(sj,{value:v,children:s.jsx(_j,{children:d})})}function VS({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:o,width:i,height:l,fitView:a,fitViewOptions:c,minZoom:u,maxZoom:p,nodeOrigin:h,nodeExtent:d}){return w.useContext(Hi)?s.jsx(s.Fragment,{children:e}):s.jsx(OS,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:o,initialWidth:i,initialHeight:l,fitView:a,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:p,nodeOrigin:h,nodeExtent:d,children:e})}const BS={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function HS({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:o,nodeTypes:i,edgeTypes:l,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:p,onMoveStart:h,onMoveEnd:d,onConnect:v,onConnectStart:y,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:f,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:j,onNodeDragStart:k,onNodeDrag:C,onNodeDragStop:P,onNodesDelete:z,onEdgesDelete:L,onDelete:A,onSelectionChange:R,onSelectionDragStart:_,onSelectionDrag:$,onSelectionDragStop:T,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:I,onBeforeDelete:E,connectionMode:F,connectionLineType:O=rn.Bezier,connectionLineStyle:X,connectionLineComponent:Y,connectionLineContainerStyle:V,deleteKeyCode:Q="Backspace",selectionKeyCode:H="Shift",selectionOnDrag:B=!1,selectionMode:J=Ms.Full,panActivationKeyCode:W="Space",multiSelectionKeyCode:U=Ps()?"Meta":"Control",zoomActivationKeyCode:Z=Ps()?"Meta":"Control",snapToGrid:q,snapGrid:se,onlyRenderVisibleElements:le=!1,selectNodesOnDrag:ie,nodesDraggable:ee,autoPanOnNodeFocus:ne,nodesConnectable:fe,nodesFocusable:Ge,nodeOrigin:te=Q0,edgesFocusable:ut,edgesReconnectable:Dt,elementsSelectable:Ui=!0,defaultViewport:Us=mj,minZoom:Bn=.5,maxZoom:$r=2,translateExtent:qc=Es,preventScrolling:_g=!0,nodeExtent:Yi,defaultMarkerColor:Eg="#b1b1b7",zoomOnScroll:Mg=!0,zoomOnPinch:Ig=!0,panOnScroll:Pg=!1,panOnScrollSpeed:Tg=.5,panOnScrollMode:$g=Pn.Free,zoomOnDoubleClick:Dg=!0,panOnDrag:Ag=!0,onPaneClick:Rg,onPaneMouseEnter:Lg,onPaneMouseMove:Fg,onPaneMouseLeave:zg,onPaneScroll:Og,onPaneContextMenu:Vg,paneClickDistance:Bg=0,nodeClickDistance:Hg=0,children:Wg,onReconnect:Ug,onReconnectStart:Yg,onReconnectEnd:Xg,onEdgeContextMenu:Qg,onEdgeDoubleClick:Gg,onEdgeMouseEnter:Kg,onEdgeMouseMove:Zg,onEdgeMouseLeave:qg,reconnectRadius:Jg=10,onNodesChange:ex,onEdgesChange:tx,noDragClassName:nx="nodrag",noWheelClassName:rx="nowheel",noPanClassName:Jc="nopan",fitView:eu,fitViewOptions:tu,connectOnClick:sx,attributionPosition:ox,proOptions:ix,defaultEdgeOptions:lx,elevateNodesOnSelect:ax,elevateEdgesOnSelect:cx,disableKeyboardA11y:nu=!1,autoPanOnConnect:ux,autoPanOnNodeDrag:dx,autoPanSpeed:fx,connectionRadius:hx,isValidConnection:px,onError:gx,style:xx,id:ru,nodeDragThreshold:mx,connectionDragThreshold:yx,viewport:vx,onViewportChange:wx,width:bx,height:Nx,colorMode:jx="light",debug:Sx,onScroll:Ys,ariaLabelConfig:kx,...Cx},_x){const Xi=ru||"1",Ex=bj(jx),Mx=w.useCallback(su=>{su.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Ys==null||Ys(su)},[Ys]);return s.jsx("div",{"data-testid":"rf__wrapper",...Cx,onScroll:Mx,style:{...xx,...BS},ref:_x,className:_e(["react-flow",o,Ex]),id:ru,role:"application",children:s.jsxs(VS,{nodes:e,edges:t,width:bx,height:Nx,fitView:eu,fitViewOptions:tu,minZoom:Bn,maxZoom:$r,nodeOrigin:te,nodeExtent:Yi,children:[s.jsx(FS,{onInit:u,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:m,onNodeMouseMove:g,onNodeMouseLeave:N,onNodeContextMenu:S,onNodeDoubleClick:j,nodeTypes:i,edgeTypes:l,connectionLineType:O,connectionLineStyle:X,connectionLineComponent:Y,connectionLineContainerStyle:V,selectionKeyCode:H,selectionOnDrag:B,selectionMode:J,deleteKeyCode:Q,multiSelectionKeyCode:U,panActivationKeyCode:W,zoomActivationKeyCode:Z,onlyRenderVisibleElements:le,defaultViewport:Us,translateExtent:qc,minZoom:Bn,maxZoom:$r,preventScrolling:_g,zoomOnScroll:Mg,zoomOnPinch:Ig,zoomOnDoubleClick:Dg,panOnScroll:Pg,panOnScrollSpeed:Tg,panOnScrollMode:$g,panOnDrag:Ag,onPaneClick:Rg,onPaneMouseEnter:Lg,onPaneMouseMove:Fg,onPaneMouseLeave:zg,onPaneScroll:Og,onPaneContextMenu:Vg,paneClickDistance:Bg,nodeClickDistance:Hg,onSelectionContextMenu:D,onSelectionStart:M,onSelectionEnd:I,onReconnect:Ug,onReconnectStart:Yg,onReconnectEnd:Xg,onEdgeContextMenu:Qg,onEdgeDoubleClick:Gg,onEdgeMouseEnter:Kg,onEdgeMouseMove:Zg,onEdgeMouseLeave:qg,reconnectRadius:Jg,defaultMarkerColor:Eg,noDragClassName:nx,noWheelClassName:rx,noPanClassName:Jc,rfId:Xi,disableKeyboardA11y:nu,nodeExtent:Yi,viewport:vx,onViewportChange:wx}),s.jsx(wj,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:y,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:f,nodesDraggable:ee,autoPanOnNodeFocus:ne,nodesConnectable:fe,nodesFocusable:Ge,edgesFocusable:ut,edgesReconnectable:Dt,elementsSelectable:Ui,elevateNodesOnSelect:ax,elevateEdgesOnSelect:cx,minZoom:Bn,maxZoom:$r,nodeExtent:Yi,onNodesChange:ex,onEdgesChange:tx,snapToGrid:q,snapGrid:se,connectionMode:F,translateExtent:qc,connectOnClick:sx,defaultEdgeOptions:lx,fitView:eu,fitViewOptions:tu,onNodesDelete:z,onEdgesDelete:L,onDelete:A,onNodeDragStart:k,onNodeDrag:C,onNodeDragStop:P,onSelectionDrag:$,onSelectionDragStart:_,onSelectionDragStop:T,onMove:p,onMoveStart:h,onMoveEnd:d,noPanClassName:Jc,nodeOrigin:te,rfId:Xi,autoPanOnConnect:ux,autoPanOnNodeDrag:dx,autoPanSpeed:fx,onError:gx,connectionRadius:hx,isValidConnection:px,selectNodesOnDrag:ie,nodeDragThreshold:mx,connectionDragThreshold:yx,onBeforeDelete:E,debug:Sx,ariaLabelConfig:kx}),s.jsx(xj,{onSelectionChange:R}),Wg,s.jsx(dj,{proOptions:ix,position:ox}),s.jsx(uj,{rfId:Xi,disableKeyboardA11y:nu})]})})}var WS=q0(HS);const US=e=>{var t;return(t=e.domNode)==null?void 0:t.querySelector(".react-flow__edgelabel-renderer")};function Ng({children:e}){const t=ue(US);return t?Ap.createPortal(e,t):null}function YS(e){const[t,n]=w.useState(e),r=w.useCallback(o=>n(i=>K0(o,i)),[]);return[t,n,r]}function XS(e){const[t,n]=w.useState(e),r=w.useCallback(o=>n(i=>Z0(o,i)),[]);return[t,n,r]}function QS({dimensions:e,lineWidth:t,variant:n,className:r}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:_e(["react-flow__background-pattern",n,r])})}function GS({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:_e(["react-flow__background-pattern","dots",t])})}var It;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(It||(It={}));const KS={[It.Dots]:1,[It.Lines]:1,[It.Cross]:6},ZS=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function jg({id:e,variant:t=It.Dots,gap:n=20,size:r,lineWidth:o=1,offset:i=0,color:l,bgColor:a,style:c,className:u,patternClassName:p}){const h=w.useRef(null),{transform:d,patternId:v}=ue(ZS,Ne),y=r||KS[t],x=t===It.Dots,b=t===It.Cross,f=Array.isArray(n)?n:[n,n],m=[f[0]*d[2]||1,f[1]*d[2]||1],g=y*d[2],N=Array.isArray(i)?i:[i,i],S=b?[g,g]:m,j=[N[0]*d[2]||1+S[0]/2,N[1]*d[2]||1+S[1]/2],k=`${v}${e||""}`;return s.jsxs("svg",{className:_e(["react-flow__background",u]),style:{...c,...Wi,"--xy-background-color-props":a,"--xy-background-pattern-color-props":l},ref:h,"data-testid":"rf__background",children:[s.jsx("pattern",{id:k,x:d[0]%m[0],y:d[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`,children:x?s.jsx(GS,{radius:g/2,className:p}):s.jsx(QS,{dimensions:S,lineWidth:o,variant:t,className:p})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${k})`})]})}jg.displayName="Background";const qS=w.memo(jg);function JS(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function e2(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function t2(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function n2(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function r2(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function vo({children:e,className:t,...n}){return s.jsx("button",{type:"button",className:_e(["react-flow__controls-button",t]),...n,children:e})}const s2=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Sg({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:o,onZoomIn:i,onZoomOut:l,onFitView:a,onInteractiveChange:c,className:u,children:p,position:h="bottom-left",orientation:d="vertical","aria-label":v}){const y=ye(),{isInteractive:x,minZoomReached:b,maxZoomReached:f,ariaLabelConfig:m}=ue(s2,Ne),{zoomIn:g,zoomOut:N,fitView:S}=$t(),j=()=>{g(),i==null||i()},k=()=>{N(),l==null||l()},C=()=>{S(o),a==null||a()},P=()=>{y.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)},z=d==="horizontal"?"horizontal":"vertical";return s.jsxs(Er,{className:_e(["react-flow__controls",z,u]),position:h,style:e,"data-testid":"rf__controls","aria-label":v??m["controls.ariaLabel"],children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(vo,{onClick:j,className:"react-flow__controls-zoomin",title:m["controls.zoomIn.ariaLabel"],"aria-label":m["controls.zoomIn.ariaLabel"],disabled:f,children:s.jsx(JS,{})}),s.jsx(vo,{onClick:k,className:"react-flow__controls-zoomout",title:m["controls.zoomOut.ariaLabel"],"aria-label":m["controls.zoomOut.ariaLabel"],disabled:b,children:s.jsx(e2,{})})]}),n&&s.jsx(vo,{className:"react-flow__controls-fitview",onClick:C,title:m["controls.fitView.ariaLabel"],"aria-label":m["controls.fitView.ariaLabel"],children:s.jsx(t2,{})}),r&&s.jsx(vo,{className:"react-flow__controls-interactive",onClick:P,title:m["controls.interactive.ariaLabel"],"aria-label":m["controls.interactive.ariaLabel"],children:x?s.jsx(r2,{}):s.jsx(n2,{})}),p]})}Sg.displayName="Controls";const o2=w.memo(Sg);function i2({id:e,x:t,y:n,width:r,height:o,style:i,color:l,strokeColor:a,strokeWidth:c,className:u,borderRadius:p,shapeRendering:h,selected:d,onClick:v}){const{background:y,backgroundColor:x}=i||{},b=l||y||x;return s.jsx("rect",{className:_e(["react-flow__minimap-node",{selected:d},u]),x:t,y:n,rx:p,ry:p,width:r,height:o,style:{fill:b,stroke:a,strokeWidth:c},shapeRendering:h,onClick:v?f=>v(f,e):void 0})}const l2=w.memo(i2),a2=e=>e.nodes.map(t=>t.id),Ml=e=>e instanceof Function?e:()=>e;function c2({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:o,nodeComponent:i=l2,onClick:l}){const a=ue(a2,Ne),c=Ml(t),u=Ml(e),p=Ml(n),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:a.map(d=>s.jsx(d2,{id:d,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:p,nodeBorderRadius:r,nodeStrokeWidth:o,NodeComponent:i,onClick:l,shapeRendering:h},d))})}function u2({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:o,nodeStrokeWidth:i,shapeRendering:l,NodeComponent:a,onClick:c}){const{node:u,x:p,y:h,width:d,height:v}=ue(y=>{const{internals:x}=y.nodeLookup.get(e),b=x.userNode,{x:f,y:m}=x.positionAbsolute,{width:g,height:N}=Qt(b);return{node:b,x:f,y:m,width:g,height:N}},Ne);return!u||u.hidden||!b0(u)?null:s.jsx(a,{x:p,y:h,width:d,height:v,style:u.style,selected:!!u.selected,className:r(u),color:t(u),borderRadius:o,strokeColor:n(u),strokeWidth:i,shapeRendering:l,onClick:c,id:u.id})}const d2=w.memo(u2);var f2=w.memo(c2);const h2=200,p2=150,g2=e=>!e.hidden,x2=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?w0(Bs(e.nodeLookup,{filter:g2}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},m2="react-flow__minimap-desc";function kg({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:o="",nodeBorderRadius:i=5,nodeStrokeWidth:l,nodeComponent:a,bgColor:c,maskColor:u,maskStrokeColor:p,maskStrokeWidth:h,position:d="bottom-right",onClick:v,onNodeClick:y,pannable:x=!1,zoomable:b=!1,ariaLabel:f,inversePan:m,zoomStep:g=1,offsetScale:N=5}){const S=ye(),j=w.useRef(null),{boundingRect:k,viewBB:C,rfId:P,panZoom:z,translateExtent:L,flowWidth:A,flowHeight:R,ariaLabelConfig:_}=ue(x2,Ne),$=(e==null?void 0:e.width)??h2,T=(e==null?void 0:e.height)??p2,D=k.width/$,M=k.height/T,I=Math.max(D,M),E=I*$,F=I*T,O=N*I,X=k.x-(E-k.width)/2-O,Y=k.y-(F-k.height)/2-O,V=E+O*2,Q=F+O*2,H=`${m2}-${P}`,B=w.useRef(0),J=w.useRef();B.current=I,w.useEffect(()=>{if(j.current&&z)return J.current=mN({domNode:j.current,panZoom:z,getTransform:()=>S.getState().transform,getViewScale:()=>B.current}),()=>{var q;(q=J.current)==null||q.destroy()}},[z]),w.useEffect(()=>{var q;(q=J.current)==null||q.update({translateExtent:L,width:A,height:R,inversePan:m,pannable:x,zoomStep:g,zoomable:b})},[x,b,m,g,L,A,R]);const W=v?q=>{var ie;const[se,le]=((ie=J.current)==null?void 0:ie.pointer(q))||[0,0];v(q,{x:se,y:le})}:void 0,U=y?w.useCallback((q,se)=>{const le=S.getState().nodeLookup.get(se).internals.userNode;y(q,le)},[]):void 0,Z=f??_["minimap.ariaLabel"];return s.jsx(Er,{position:d,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof p=="string"?p:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*I:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof l=="number"?l:void 0},className:_e(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:$,height:T,viewBox:`${X} ${Y} ${V} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":H,ref:j,onClick:W,children:[Z&&s.jsx("title",{id:H,children:Z}),s.jsx(f2,{onClick:U,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:o,nodeStrokeWidth:l,nodeComponent:a}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${X-O},${Y-O}h${V+O*2}v${Q+O*2}h${-V-O*2}z
        M${C.x},${C.y}h${C.width}v${C.height}h${-C.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}kg.displayName="MiniMap";const y2=w.memo(kg),v2=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,w2={[Cr.Line]:"right",[Cr.Handle]:"bottom-right"};function b2({nodeId:e,position:t,variant:n=Cr.Handle,className:r,style:o=void 0,children:i,color:l,minWidth:a=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:p=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:d,autoScale:v=!0,shouldResize:y,onResizeStart:x,onResize:b,onResizeEnd:f}){const m=ng(),g=typeof e=="string"?e:m,N=ye(),S=w.useRef(null),j=n===Cr.Handle,k=ue(w.useCallback(v2(j&&v),[j,v]),Ne),C=w.useRef(null),P=t??w2[n];w.useEffect(()=>{if(!(!S.current||!g))return C.current||(C.current=PN({domNode:S.current,nodeId:g,getStoreItems:()=>{const{nodeLookup:L,transform:A,snapGrid:R,snapToGrid:_,nodeOrigin:$,domNode:T}=N.getState();return{nodeLookup:L,transform:A,snapGrid:R,snapToGrid:_,nodeOrigin:$,paneDomNode:T}},onChange:(L,A)=>{const{triggerNodeChanges:R,nodeLookup:_,parentLookup:$,nodeOrigin:T}=N.getState(),D=[],M={x:L.x,y:L.y},I=_.get(g);if(I&&I.expandParent&&I.parentId){const E=I.origin??T,F=L.width??I.measured.width??0,O=L.height??I.measured.height??0,X={id:I.id,parentId:I.parentId,rect:{width:F,height:O,...N0({x:L.x??I.position.x,y:L.y??I.position.y},{width:F,height:O},I.parentId,_,E)}},Y=Kc([X],_,$,T);D.push(...Y),M.x=L.x?Math.max(E[0]*F,L.x):void 0,M.y=L.y?Math.max(E[1]*O,L.y):void 0}if(M.x!==void 0&&M.y!==void 0){const E={id:g,type:"position",position:{...M}};D.push(E)}if(L.width!==void 0&&L.height!==void 0){const F={id:g,type:"dimensions",resizing:!0,setAttributes:d?d==="horizontal"?"width":"height":!0,dimensions:{width:L.width,height:L.height}};D.push(F)}for(const E of A){const F={...E,type:"position"};D.push(F)}R(D)},onEnd:({width:L,height:A})=>{const R={id:g,type:"dimensions",resizing:!1,dimensions:{width:L,height:A}};N.getState().triggerNodeChanges([R])}})),C.current.update({controlPosition:P,boundaries:{minWidth:a,minHeight:c,maxWidth:u,maxHeight:p},keepAspectRatio:h,resizeDirection:d,onResizeStart:x,onResize:b,onResizeEnd:f,shouldResize:y}),()=>{var L;(L=C.current)==null||L.destroy()}},[P,a,c,u,p,h,x,b,f,y]);const z=P.split("-");return s.jsx("div",{className:_e(["react-flow__resize-control","nodrag",...z,n,r]),ref:S,style:{...o,scale:k,...l&&{[j?"backgroundColor":"borderColor"]:l}},children:i})}w.memo(b2);const N2={},{VITE_API_BASE_URL:j2,VITE_WS_BASE_URL:S2}=N2,ce=j2||"",Gt=S2||(ce?ce.replace("http://","ws://").replace("https://","wss://"):`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`),wn={cameras:`${ce}/api/cameras/`,workflows:`${ce}/api/workflow-builder/`,workflowById:e=>`${ce}/api/workflow-builder/${e}`,workflowDeploy:e=>`${ce}/api/workflow-builder/${e}/deploy`,workflowPreview:e=>`${ce}/api/workflow-builder/${e}/preview`,workflowExecute:e=>`${ce}/api/workflow-builder/${e}/execute`,workflowStop:e=>`${ce}/api/workflow-builder/${e}/stop`,workflowExecuteRealtime:`${ce}/api/workflow-builder/execute`,workflowStopAll:`${ce}/api/workflow-builder/stop-all`,workflowStatus:`${ce}/api/workflow-builder/status`,workflowComponents:{models:`${ce}/api/workflow-components/models`,actions:`${ce}/api/workflow-components/actions`,filters:`${ce}/api/workflow-components/filters`,classes:`${ce}/api/workflow-components/classes`},componentStatus:{status:`${ce}/api/component-status/status`,badges:`${ce}/api/component-status/badges`},templates:`${ce}/api/workflow-templates/`,templateById:e=>`${ce}/api/workflow-templates/${e}`,config:{sites:`${ce}/api/config/sites`,models:`${ce}/api/config/models`,cameras:`${ce}/api/config/cameras`},websocket:`${Gt}/ws/workflow`},k2=({nodeId:e,workflowId:t})=>{const[n,r]=w.useState("idle"),[o,i]=w.useState(null),[l,a]=w.useState(0),[c,u]=w.useState(!1),[p,h]=w.useState(!1);w.useEffect(()=>{let y=null;try{y=new WebSocket(`${Gt}/api/ws`),y.onopen=()=>{console.log(`NodeStatusIndicator ${e}: Connected`)},y.onmessage=x=>{var b,f;try{const m=JSON.parse(x.data);if(m.node_id!==e)return;switch(m.event_type||m.type){case"node_started":r("running"),u(!0);break;case"node_completed":r("idle"),u(!1);break;case"node_error":r("error"),i(((b=m.data)==null?void 0:b.error_message)||"Unknown error"),a(N=>N+1),u(!1);break;case"node_processing":u(!0);break;case"status_update":const g=((f=m.data)==null?void 0:f.status)||"idle";r(g);break;default:break}}catch(m){console.error("Error processing status message:",m)}},y.onerror=()=>{console.error(`NodeStatusIndicator ${e}: WebSocket error`)},y.onclose=()=>{console.log(`NodeStatusIndicator ${e}: Disconnected`)}}catch(x){console.error("Error creating WebSocket:",x)}return()=>{if(y)try{y.close()}catch(x){console.error("Error closing WebSocket:",x)}}},[e]);const d=()=>{switch(n){case"running":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";case"idle":default:return"bg-gray-500"}},v=()=>{switch(n){case"running":return"Running";case"error":return`Error (${l})`;case"warning":return"Warning";case"idle":default:return"Idle"}};return s.jsxs("div",{className:"relative inline-block",children:[s.jsxs("div",{className:"relative cursor-help",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${d()} ${c?"animate-pulse":""}`}),l>0&&s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-[8px] text-white font-bold",children:l>9?"9+":l})})]}),p&&s.jsx("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 z-50 pointer-events-none",children:s.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded-lg shadow-lg px-3 py-2 whitespace-nowrap border border-gray-700",children:[s.jsx("div",{className:"font-semibold mb-1",children:v()}),o&&s.jsx("div",{className:"text-red-400 text-[10px] max-w-xs",children:o}),s.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-px",children:s.jsx("div",{className:"border-4 border-transparent border-t-gray-900"})})]})})]})},C2=w.memo(k2),_2=({children:e,nodeId:t,className:n=""})=>{const[r,o]=w.useState(!1),[i,l]=w.useState(!1),[a,c]=w.useState(!1);w.useEffect(()=>{let p=null,h=null;try{p=new WebSocket(`${Gt}/api/ws`),p.onmessage=d=>{var v,y;try{const x=JSON.parse(d.data);if(x.node_id!==t)return;(x.event_type==="node_error"||x.type==="node_error")&&(o(!0),c(!0),h=setTimeout(()=>{c(!1)},2e3)),x.event_type==="node_completed"&&((v=x.data)!=null&&v.passed)&&(o(!1),l(!1)),x.event_type==="node_completed"&&((y=x.data)==null?void 0:y.passed)===!1&&l(!0)}catch(x){console.error("Error processing node status:",x)}}}catch(d){console.error("Error creating WebSocket for node wrapper:",d)}return()=>{if(h&&clearTimeout(h),p)try{p.close()}catch{}}},[t]);const u=()=>r?a?"border-red-500 shadow-red-500/50 shadow-lg animate-pulse":"border-red-500":i?"border-yellow-500":"";return s.jsxs("div",{className:`relative ${n}`,children:[s.jsx("div",{className:"absolute -top-1 -right-1 z-10",children:s.jsx(C2,{nodeId:t})}),(r||i)&&s.jsx("div",{className:`absolute inset-0 pointer-events-none rounded-lg border-2 ${u()}`,style:{margin:"-2px"}}),e]})},Se=w.memo(_2),E2=w.memo(({data:e,id:t})=>{var A;const[n,r]=w.useState(!0),[o,i]=w.useState(!1),[l,a]=w.useState(!1),[c,u]=w.useState(!1),[p,h]=w.useState(null),[d,v]=w.useState(null),[y,x]=w.useState(!1),[b,f]=w.useState(e.fps||10),[m,g]=w.useState(e.skipSimilar||!1),[N,S]=w.useState(e.streamQuality||"medium"),[j,k]=w.useState(e.enableRecording||!1),[C,P]=w.useState(e.preBuffer||5);w.useEffect(()=>{e.onChange&&e.onChange({fps:b,skipSimilar:m,streamQuality:N,enableRecording:j,preBuffer:C})},[b,m,N,j,C]),w.useEffect(()=>{if(!e.cameraId)return;const R=async()=>{try{const $=await fetch(`${ce}/api/cameras/${e.cameraId}`);if($.ok){const T=await $.json();if(v(T),T.status.last_frame){const D=new Date(T.status.last_frame),I=(new Date-D)/1e3;x(I>30)}else x(!0)}}catch($){console.error(`Camera ${e.cameraId}: Status check failed`,$),x(!0)}};R();const _=setInterval(R,5e3);return()=>clearInterval(_)},[e.cameraId]),w.useEffect(()=>{if(!c||!n||!e.cameraId)return;const R=()=>{const $=Date.now(),T=`${ce}/api/video/${e.cameraId}/snapshot?t=${$}`;h(T)};R();const _=setInterval(R,2e3);return()=>clearInterval(_)},[c,n,e.cameraId]);const z=e.cameraId?`${ce}/api/video/${e.cameraId}/mjpeg`:null,L=()=>{if(c){const R=Date.now();h(`${ce}/api/video/${e.cameraId}/snapshot?t=${R}`)}else a(!1),u(!1)};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-blue-500 bg-gray-900 min-w-[240px] max-w-[300px]",children:[n&&s.jsxs("div",{className:"relative bg-black rounded-t-lg overflow-hidden",style:{height:"135px"},children:[y&&s.jsxs("div",{className:"absolute top-0 left-0 right-0 bg-red-600/90 text-white text-xs px-2 py-1 z-10 flex items-center justify-center space-x-1",children:[s.jsx("span",{children:"⚠️"}),s.jsx("span",{children:"Camera Disconnected"})]}),!c&&z?s.jsx("img",{src:z,alt:e.cameraName,className:"w-full h-full object-contain",onError:()=>{console.error(`Camera ${e.cameraId}: MJPEG failed, switching to snapshots`),u(!0)}}):p?s.jsx("img",{src:p,alt:e.cameraName,className:"w-full h-full object-contain",onError:()=>a(!0)},p):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:"No preview available"}),s.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-black/70 rounded text-xs text-white flex items-center space-x-1",children:y?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"}),s.jsx("span",{children:"OFFLINE"})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{children:"LIVE"})]})}),s.jsxs("div",{className:"absolute bottom-2 left-2 px-1 py-0.5 bg-black/70 rounded text-[10px] text-gray-400",children:[c?"Snapshot":"MJPEG",d&&` | ${((A=d.status.fps)==null?void 0:A.toFixed(1))||"0"} FPS`]})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"📹"}),s.jsx("div",{className:"font-bold text-sm",children:e.label||e.cameraName})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:L,className:"text-xs px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-white",title:"Refresh now",children:"🔄"}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs text-gray-400 hover:text-white",title:"Toggle preview",children:n?"👁️":"👁️‍🗨️"}),s.jsx("button",{onClick:()=>i(!o),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),s.jsx("div",{className:"text-xs text-gray-400",children:s.jsxs("div",{children:["ID: ",e.cameraId]})}),o&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Processing FPS: ",b]}),s.jsx("input",{type:"range",min:"1",max:"30",value:b,onChange:R=>f(parseInt(R.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"1 fps"}),s.jsx("span",{children:"30 fps"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Stream Quality"}),s.jsxs("select",{value:N,onChange:R=>S(R.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"high",children:"High (1080p+)"}),s.jsx("option",{value:"medium",children:"Medium (720p)"}),s.jsx("option",{value:"low",children:"Low (480p)"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"Lower quality = less bandwidth"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:R=>g(R.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Skip similar frames"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 ml-5",children:"Reduce processing of static scenes"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-700",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer mb-2",children:[s.jsx("input",{type:"checkbox",checked:j,onChange:R=>k(R.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Enable pre-event buffer"})]}),j&&s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Pre-buffer: ",C,"s"]}),s.jsx("input",{type:"range",min:"0",max:"60",step:"5",value:C,onChange:R=>P(parseInt(R.target.value)),className:"w-full"}),s.jsxs("div",{className:"text-[10px] text-gray-600",children:["Keep last ",C,"s in memory for recordings"]})]})]}),s.jsx("div",{className:"pt-2 border-t border-gray-700",children:s.jsxs("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[s.jsxs("div",{children:["⚡ ",b," fps @ ",N]}),s.jsxs("div",{children:["💾 Buffer: ",j?`${C}s`:"Off"]}),s.jsxs("div",{children:["🎞️ Skip similar: ",m?"On":"Off"]})]})})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-blue-500",id:"video-output"})]})})}),M2=w.memo(({data:e,id:t})=>{const{setNodes:n}=$t(),[r,o]=w.useState(!0),[i,l]=w.useState(!1),[a,c]=w.useState(!1),[u,p]=w.useState(null),[h,d]=w.useState(null),[v,y]=w.useState(null),[x,b]=w.useState(!1),[f,m]=w.useState(e.loop!==!1),[g,N]=w.useState(e.fps||30),[S,j]=w.useState(e.playbackSpeed||1),[k,C]=w.useState(0),[P,z]=w.useState(0),[L,A]=w.useState(e.skipSimilar||!1),[R,_]=w.useState(e.resolutionScale||100),[$,T]=w.useState(!1),[D,M]=w.useState(null),[I,E]=w.useState(!1),[F,O]=w.useState([]),[X,Y]=w.useState(!1),V=w.useRef(null),Q=w.useRef(null);w.useEffect(()=>{const ee=new WebSocket("ws://localhost:8000/api/ws");return ee.onmessage=ne=>{try{const fe=JSON.parse(ne.data);fe.type==="workflow_started"||fe.event_type==="workflow_started"?E(!0):(fe.type==="workflow_stopped"||fe.event_type==="workflow_stopped")&&E(!1)}catch{}},()=>ee.close()},[]),w.useEffect(()=>{V.current&&u&&v==="video"&&(I&&!x?(V.current.play(),b(!0)):!I&&x&&(V.current.pause(),b(!1)))},[I,u,v]),w.useEffect(()=>{h&&n(ee=>ee.map(ne=>ne.id===t?{...ne,data:{...ne.data,videoPath:h,fps:g,loop:f,playbackSpeed:S,skipSimilar:L,resolutionScale:R}}:ne))},[h,g,f,S,L,R,t,n]);const H=async ee=>{const ne=ee.target.files[0];if(!ne)return;const fe=URL.createObjectURL(ne),Ge=ne.type.startsWith("video/")?"video":"image";p(fe),y(Ge),b(!1),C(0),T(!0),M(null);try{const te=new FormData;te.append("file",ne);const ut=await fetch("http://localhost:8000/api/uploads/video",{method:"POST",body:te});if(!ut.ok)throw new Error(`Upload failed: ${ut.statusText}`);const Dt=await ut.json();d(Dt.path)}catch(te){console.error("Upload error:",te),M(te.message)}finally{T(!1)}},B=()=>{V.current&&(x?V.current.pause():V.current.play(),b(!x))},J=()=>{V.current&&C(V.current.currentTime)},W=async()=>{Y(!0);try{const ne=await(await fetch("http://localhost:8000/api/uploads/list")).json();ne.status==="success"&&O(ne.files)}catch(ee){console.error("Failed to load server files:",ee)}finally{Y(!1)}};w.useEffect(()=>{a&&F.length===0&&W()},[a]);const U=ee=>{d(ee.path);const ne=`http://localhost:8000/uploads/${ee.filename}`;p(ne),y(ee.filename.match(/\.(mp4|mov|avi|webm)$/i)?"video":"image"),c(!1),b(!1),C(0)},Z=async ee=>{if(confirm(`Delete ${ee}?`))try{(await fetch(`http://localhost:8000/api/uploads/video/${ee}`,{method:"DELETE"})).ok&&await W()}catch(ne){console.error("Failed to delete file:",ne)}},q=ee=>{if(ee===0)return"0 Bytes";const ne=1024,fe=["Bytes","KB","MB","GB"],Ge=Math.floor(Math.log(ee)/Math.log(ne));return Math.round(ee/Math.pow(ne,Ge)*100)/100+" "+fe[Ge]},se=ee=>new Date(ee*1e3).toLocaleString();w.useEffect(()=>{V.current&&(V.current.playbackRate=S)},[S]);const le=()=>{V.current&&(z(V.current.duration),V.current.playbackRate=S)};w.useEffect(()=>{V.current&&(V.current.playbackRate=S)},[S]);const ie=ee=>{const ne=Math.floor(ee/60),fe=Math.floor(ee%60);return`${ne}:${fe.toString().padStart(2,"0")}`};return w.useEffect(()=>()=>{u&&URL.revokeObjectURL(u)},[u]),s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500",id:"video-output"}),s.jsx("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🎬"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"Video Input"}),I&&x&&s.jsxs("div",{className:"flex items-center space-x-1 text-xs",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-green-400",children:"Playing"})]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>o(!r),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle preview",children:"👁️"}),s.jsx("button",{onClick:()=>l(!i),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]})}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"mb-3 flex gap-2",children:[s.jsx("input",{ref:Q,type:"file",accept:"video/*,image/*",onChange:H,className:"hidden",disabled:$}),s.jsx("button",{onClick:()=>{var ee;return(ee=Q.current)==null?void 0:ee.click()},disabled:$,className:"flex-1 px-3 py-2 bg-purple-600 hover:bg-purple-700 rounded text-sm font-medium transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed",children:$?"⏳ Uploading...":"📤 Upload"}),s.jsx("button",{onClick:()=>c(!a),className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm font-medium transition-colors",title:"Browse server files",children:"📁"})]}),a&&s.jsxs("div",{className:"mb-3 p-3 bg-gray-950 rounded border border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-xs font-semibold text-gray-300",children:"Server Files"}),s.jsx("button",{onClick:W,disabled:X,className:"text-xs px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded",children:X?"⏳":"🔄"})]}),s.jsx("div",{className:"max-h-48 overflow-y-auto space-y-1",children:F.length===0?s.jsx("div",{className:"text-xs text-gray-500 text-center py-4",children:"No files uploaded yet"}):F.map(ee=>s.jsx("div",{className:"p-2 bg-gray-900 rounded hover:bg-gray-800 cursor-pointer group",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>U(ee),children:[s.jsx("div",{className:"text-xs font-medium text-gray-200 truncate",children:ee.filename}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[q(ee.size)," • ",se(ee.modified)]})]}),s.jsx("button",{onClick:ne=>{ne.stopPropagation(),Z(ee.filename)},className:"ml-2 text-red-400 hover:text-red-300 opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete file",children:"🗑️"})]})},ee.filename))})]}),D&&s.jsxs("div",{className:"mb-3 p-2 bg-red-900 border border-red-700 rounded text-xs text-red-200",children:["❌ ",D]}),h&&!D&&s.jsxs("div",{className:"mb-3 p-2 bg-green-900 border border-green-700 rounded text-xs text-green-200",children:["✅ Ready: ",h.split("/").pop()]}),u&&s.jsxs("div",{className:"mb-3 p-2 bg-gray-950 rounded border border-gray-800",children:[s.jsxs("div",{className:"text-xs text-gray-400 flex justify-between items-center",children:[s.jsxs("span",{children:["Type: ",v==="video"?"🎥 Video":"🖼️ Image"]}),v==="video"&&s.jsxs("span",{className:"text-purple-400",children:[S,"x speed"]})]}),v==="video"&&P>0&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Duration: ",ie(P)]})]}),r&&u&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"relative bg-black rounded overflow-hidden border border-gray-800",children:v==="video"?s.jsx("video",{ref:V,src:u,className:"w-full h-auto",loop:f,onTimeUpdate:J,onLoadedMetadata:le,onEnded:()=>b(!1)}):s.jsx("img",{src:u,alt:"Uploaded",className:"w-full h-auto"})}),v==="video"&&s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("div",{className:"relative h-1 bg-gray-800 rounded overflow-hidden cursor-pointer",onClick:ee=>{if(V.current&&P>0){const ne=ee.currentTarget.getBoundingClientRect(),Ge=(ee.clientX-ne.left)/ne.width;V.current.currentTime=Ge*P}},children:s.jsx("div",{className:"absolute h-full bg-purple-500 transition-all",style:{width:`${k/P*100}%`}})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:B,className:"px-3 py-1 bg-gray-800 hover:bg-gray-700 rounded text-xs",children:x?"⏸️ Pause":"▶️ Play"}),s.jsx("button",{onClick:()=>m(!f),className:`px-2 py-1 rounded text-xs ${f?"bg-purple-600 text-white":"bg-gray-800 text-gray-400"}`,title:"Loop video",children:"🔁"})]}),s.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:[ie(k)," / ",ie(P)]})]})]})]}),i&&u&&v==="video"&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Processing FPS: ",g]}),s.jsx("input",{type:"range",min:"1",max:"60",value:g,onChange:ee=>N(parseInt(ee.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"1 fps"}),s.jsx("span",{children:"60 fps"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Playback Speed: ",S,"x"]}),s.jsxs("select",{value:S,onChange:ee=>j(parseFloat(ee.target.value)),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"0.25",children:"0.25x (Slow)"}),s.jsx("option",{value:"0.5",children:"0.5x"}),s.jsx("option",{value:"0.75",children:"0.75x"}),s.jsx("option",{value:"1.0",children:"1.0x (Normal)"}),s.jsx("option",{value:"1.25",children:"1.25x"}),s.jsx("option",{value:"1.5",children:"1.5x"}),s.jsx("option",{value:"2.0",children:"2.0x (Fast)"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Resolution Scale: ",R,"%"]}),s.jsx("input",{type:"range",min:"25",max:"100",step:"25",value:R,onChange:ee=>_(parseInt(ee.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"25% (Fast)"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"75%"}),s.jsx("span",{children:"100% (Full)"})]}),s.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"⚡ Lower resolution = faster processing, smaller frames"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:L,onChange:ee=>A(ee.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Skip similar frames"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 ml-5",children:"Skip processing when scene doesn't change"})]})]}),!u&&s.jsxs("div",{className:"text-center py-6 text-gray-600",children:[s.jsx("div",{className:"text-3xl mb-2",children:"📁"}),s.jsx("div",{className:"text-xs",children:"Upload a video or image"}),s.jsx("div",{className:"text-[10px] text-gray-700 mt-2",children:"For testing AI models"})]}),u&&s.jsx("div",{className:"mt-3 p-2 bg-green-900/20 border border-green-500/30 rounded",children:s.jsxs("div",{className:"text-xs text-green-400 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"✓"}),s.jsx("span",{children:"Ready to process"})]})})]})]})})}),mf=[{value:"best",label:"Best (Auto)",description:"Highest available quality"},{value:"1080p",label:"1080p (Full HD)",description:"1920x1080"},{value:"720p",label:"720p (HD)",description:"1280x720"},{value:"480p",label:"480p (SD)",description:"854x480"},{value:"360p",label:"360p",description:"640x360"},{value:"worst",label:"Lowest",description:"Lowest quality (fastest)"}],I2=w.memo(({data:e,id:t})=>{var f;const[n,r]=w.useState(e.youtubeUrl||""),[o,i]=w.useState(e.quality||"best"),[l,a]=w.useState(e.fps||10),[c,u]=w.useState(e.extractAudio||!1),[p,h]=w.useState(!1),[d,v]=w.useState(!1),[y,x]=w.useState("");w.useEffect(()=>{e.onChange&&e.onChange({youtubeUrl:n,quality:o,fps:l,extractAudio:c})},[n,o,l,c]),w.useEffect(()=>{if(!n){v(!1),x("");return}try{const m=new URL(n);let g="";m.hostname.includes("youtube.com")?g=m.searchParams.get("v"):m.hostname.includes("youtu.be")&&(g=m.pathname.slice(1)),x(g),v(!!g)}catch{v(!1),x("")}},[n]);const b=()=>y?`https://img.youtube.com/vi/${y}/mqdefault.jpg`:null;return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-red-500 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-red-500",id:"video-output"}),d&&y&&s.jsxs("div",{className:"relative bg-black rounded-t-lg overflow-hidden",style:{height:"135px"},children:[s.jsx("img",{src:b(),alt:"YouTube Thumbnail",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:s.jsx("div",{className:"text-6xl text-white/90",children:"▶️"})}),s.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 bg-red-600 rounded text-xs text-white font-bold",children:"LIVE"})]}),s.jsx("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"▶️"}),s.jsx("div",{className:"font-bold text-sm text-red-400",children:"YouTube Stream"})]}),s.jsx("button",{onClick:()=>h(!p),className:"text-gray-400 hover:text-white",children:"⚙️"})]})}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"YouTube URL"}),s.jsx("input",{type:"url",value:n,onChange:m=>r(m.target.value),placeholder:"https://youtube.com/watch?v=...",className:`w-full px-2 py-1.5 bg-gray-800 border rounded text-xs text-white font-mono ${n&&!d?"border-red-500":"border-gray-700"}`}),n&&!d&&s.jsx("div",{className:"text-[10px] text-red-400 mt-1",children:"Invalid YouTube URL"}),d&&s.jsx("div",{className:"text-[10px] text-green-400 mt-1",children:"✓ Valid URL"})]}),p&&s.jsxs("div",{className:"space-y-3 pt-3 border-t border-gray-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Video Quality"}),s.jsx("select",{value:o,onChange:m=>i(m.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:mf.map(m=>s.jsx("option",{value:m.value,children:m.label},m.value))}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:(f=mf.find(m=>m.value===o))==null?void 0:f.description})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Processing FPS: ",l]}),s.jsx("input",{type:"range",min:"1",max:"30",value:l,onChange:m=>a(parseInt(m.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"1 fps"}),s.jsx("span",{children:"30 fps"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:m=>u(m.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Also extract audio"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 ml-5",children:"Enable for audio AI analysis"})]}),s.jsx("div",{className:"pt-2 border-t border-gray-700",children:s.jsxs("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[s.jsxs("div",{children:["🎬 Quality: ",o]}),s.jsxs("div",{children:["⚡ Processing: ",l," fps"]}),s.jsxs("div",{children:["🎵 Audio: ",c?"Yes":"No"]})]})})]}),!n&&s.jsxs("div",{className:"text-center py-4 text-gray-600",children:[s.jsx("div",{className:"text-2xl mb-2",children:"▶️"}),s.jsx("div",{className:"text-xs",children:"Enter a YouTube URL"}),s.jsx("div",{className:"text-[10px] text-gray-700 mt-1",children:"Supports live streams & videos"})]}),d&&s.jsx("div",{className:"mt-3 p-2 bg-green-900/20 border border-green-500/30 rounded",children:s.jsxs("div",{className:"text-xs text-green-400 flex items-center",children:[s.jsx("span",{className:"mr-2",children:"✓"}),s.jsx("span",{children:"Ready to stream"})]})})]})]})})}),yf=[{id:0,name:"person",category:"People"},{id:1,name:"bicycle",category:"Vehicles"},{id:2,name:"car",category:"Vehicles"},{id:3,name:"motorcycle",category:"Vehicles"},{id:4,name:"airplane",category:"Vehicles"},{id:5,name:"bus",category:"Vehicles"},{id:6,name:"train",category:"Vehicles"},{id:7,name:"truck",category:"Vehicles"},{id:8,name:"boat",category:"Vehicles"},{id:9,name:"traffic light",category:"Outdoor"},{id:10,name:"fire hydrant",category:"Outdoor"},{id:11,name:"stop sign",category:"Outdoor"},{id:12,name:"parking meter",category:"Outdoor"},{id:13,name:"bench",category:"Outdoor"},{id:14,name:"bird",category:"Animals"},{id:15,name:"cat",category:"Animals"},{id:16,name:"dog",category:"Animals"},{id:17,name:"horse",category:"Animals"},{id:18,name:"sheep",category:"Animals"},{id:19,name:"cow",category:"Animals"},{id:20,name:"elephant",category:"Animals"},{id:21,name:"bear",category:"Animals"},{id:22,name:"zebra",category:"Animals"},{id:23,name:"giraffe",category:"Animals"},{id:24,name:"backpack",category:"Accessories"},{id:25,name:"umbrella",category:"Accessories"},{id:26,name:"handbag",category:"Accessories"},{id:27,name:"tie",category:"Accessories"},{id:28,name:"suitcase",category:"Accessories"},{id:39,name:"bottle",category:"Kitchen"},{id:40,name:"wine glass",category:"Kitchen"},{id:41,name:"cup",category:"Kitchen"},{id:42,name:"fork",category:"Kitchen"},{id:43,name:"knife",category:"Kitchen"},{id:44,name:"spoon",category:"Kitchen"},{id:56,name:"chair",category:"Furniture"},{id:57,name:"couch",category:"Furniture"},{id:58,name:"potted plant",category:"Furniture"},{id:59,name:"bed",category:"Furniture"},{id:60,name:"dining table",category:"Furniture"},{id:61,name:"toilet",category:"Furniture"},{id:62,name:"tv",category:"Electronics"},{id:63,name:"laptop",category:"Electronics"},{id:64,name:"mouse",category:"Electronics"},{id:65,name:"remote",category:"Electronics"},{id:66,name:"keyboard",category:"Electronics"},{id:67,name:"cell phone",category:"Electronics"}],vf={people:{label:"👥 People Only",classes:[0]},vehicles:{label:"🚗 All Vehicles",classes:[2,3,5,6,7,8]},"people-vehicles":{label:"🚶🚗 People & Vehicles",classes:[0,1,2,3,5,7]},animals:{label:"🐕 Animals",classes:[14,15,16,17,18,19,20,21,22,23]},bags:{label:"🎒 Bags & Luggage",classes:[24,26,28]},all:{label:"🌐 All Classes",classes:[]}},P2=w.memo(({data:e,id:t})=>{const{setNodes:n}=$t(),[r,o]=w.useState(e.confidence||.7),[i,l]=w.useState(e.classes||[]),[a,c]=w.useState(!1),[u,p]=w.useState(!1),[h,d]=w.useState(!1),[v,y]=w.useState(0),[x,b]=w.useState(null),[f,m]=w.useState(e.fps||10),[g,N]=w.useState(e.batchSize||1),[S,j]=w.useState(e.iou||.45),[k,C]=w.useState(""),[P,z]=w.useState(e.enableXRay||!1),[L,A]=w.useState(e.xrayMode||"boxes"),[R,_]=w.useState(e.schematicMode||!1),[$,T]=w.useState(e.colorScheme||"default"),[D,M]=w.useState(e.xrayMaxFps||30),[I,E]=w.useState(!1);w.useEffect(()=>{n(H=>H.map(B=>B.id===t?{...B,data:{...B.data,confidence:r,classes:i,fps:f,batchSize:g,iou:S,enableXRay:P,xrayMode:L,schematicMode:R,colorScheme:$,xrayMaxFps:D}}:B))},[r,i,f,g,S,P,L,R,$,D,t,n]);const F={fast:"bg-green-500/20 text-green-400",medium:"bg-yellow-500/20 text-yellow-400",slow:"bg-red-500/20 text-red-400"},O=H=>{l(B=>B.includes(H)?B.filter(J=>J!==H):[...B,H])},X=H=>{const B=vf[H];l(B.classes)},V=yf.filter(H=>H.name.toLowerCase().includes(k.toLowerCase())||H.category.toLowerCase().includes(k.toLowerCase())).reduce((H,B)=>(H[B.category]||(H[B.category]=[]),H[B.category].push(B),H),{}),Q=()=>i.length===0?"All classes":i.length>3?`${i.length} classes selected`:i.map(H=>{var B;return((B=yf.find(J=>J.id===H))==null?void 0:B.name)||H}).join(", ");return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-green-500 bg-gray-900 min-w-[240px] max-w-[300px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-green-500",id:"video-input"}),h&&s.jsxs("div",{className:"bg-gray-950 border-b border-gray-800 p-3",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Live Detections"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm font-mono text-green-400",children:[v," detected"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["conf: ",(r*100).toFixed(0),"%+"]})]}),x&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Last: ",x]})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🤖"}),s.jsx("div",{className:"font-bold text-sm",children:e.label||e.modelName})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>d(!h),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle detection preview",children:"📊"}),s.jsx("button",{onClick:()=>c(!a),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[s.jsx("span",{className:"text-gray-500",children:e.modelId}),e.speed&&s.jsx("span",{className:`px-2 py-0.5 rounded ${F[e.speed]}`,children:e.speed})]}),a&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Confidence Threshold: ",(r*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:r,onChange:H=>o(parseFloat(H.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"Low (0%)"}),s.jsx("span",{children:"High (100%)"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Detect Classes"}),s.jsx("button",{onClick:()=>p(!u),className:"text-[10px] px-2 py-0.5 bg-blue-600 hover:bg-blue-700 rounded text-white",children:u?"Close":"Select"})]}),s.jsx("div",{className:"text-xs text-gray-300 bg-gray-800 px-2 py-1.5 rounded border border-gray-700",children:Q()}),u&&s.jsxs("div",{className:"mt-2 p-2 bg-gray-800 rounded border border-gray-700 max-h-[300px] overflow-y-auto",children:[s.jsxs("div",{className:"mb-2 pb-2 border-b border-gray-700",children:[s.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:"Quick Presets:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(vf).map(([H,B])=>s.jsx("button",{onClick:()=>X(H),className:"text-[10px] px-2 py-0.5 bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:B.label},H))})]}),s.jsx("input",{type:"text",placeholder:"Search classes...",value:k,onChange:H=>C(H.target.value),className:"w-full px-2 py-1 mb-2 bg-gray-900 border border-gray-700 rounded text-xs text-white"}),s.jsx("div",{className:"space-y-2",children:Object.entries(V).map(([H,B])=>s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] text-gray-500 font-semibold mb-1",children:H}),s.jsx("div",{className:"space-y-0.5",children:B.map(J=>s.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer hover:bg-gray-700 px-1 py-0.5 rounded",children:[s.jsx("input",{type:"checkbox",checked:i.includes(J.id),onChange:()=>O(J.id),className:"w-3 h-3"}),s.jsx("span",{className:"text-gray-300",children:J.name}),s.jsxs("span",{className:"text-gray-600 text-[10px]",children:["#",J.id]})]},J.id))})]},H))}),s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700 text-[10px] text-gray-400",children:i.length===0?"All classes enabled":`${i.length} class${i.length!==1?"es":""} selected`})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Processing FPS: ",f]}),s.jsx("input",{type:"range",min:"1",max:"30",value:f,onChange:H=>m(parseInt(H.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[s.jsx("span",{children:"1 fps"}),s.jsx("span",{children:"30 fps"})]})]}),s.jsxs("div",{className:"p-3 bg-purple-900/20 border border-purple-700 rounded",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs text-purple-300 font-semibold flex items-center gap-1",children:"🔍 X-RAY Mode"}),s.jsx("button",{onClick:()=>z(!P),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${P?"bg-purple-600 text-white":"bg-gray-700 text-gray-400"}`,children:P?"ON":"OFF"})]}),P&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>E(!I),className:"w-full text-xs px-2 py-1 bg-purple-800 hover:bg-purple-700 rounded text-white",children:I?"Hide Settings":"Show Settings"}),I&&s.jsxs("div",{className:"space-y-2 pt-2 border-t border-purple-800",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Visualization Mode"}),s.jsxs("select",{value:L,onChange:H=>A(H.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",children:[s.jsx("option",{value:"boxes",children:"📦 Bounding Boxes"}),s.jsx("option",{value:"schematic",children:"📐 Schematic (No Image)"}),s.jsx("option",{value:"heatmap",children:"🔥 Heatmap"}),s.jsx("option",{value:"both",children:"📦🔥 Boxes + Heatmap"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Color Scheme"}),s.jsxs("select",{value:$,onChange:H=>T(H.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",children:[s.jsx("option",{value:"default",children:"🎨 Default"}),s.jsx("option",{value:"confidence",children:"📊 Confidence Gradient"}),s.jsx("option",{value:"class_specific",children:"🏷️ Class-Specific"}),s.jsx("option",{value:"thermal",children:"🌡️ Thermal"}),s.jsx("option",{value:"neon",children:"💡 Neon"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-[10px] text-gray-400 block mb-1",children:["Max X-RAY FPS: ",D]}),s.jsx("input",{type:"range",min:"10",max:"60",step:"5",value:D,onChange:H=>M(parseInt(H.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[9px] text-gray-600",children:[s.jsx("span",{children:"10 (CPU)"}),s.jsx("span",{children:"30 (Balanced)"}),s.jsx("span",{children:"60 (GPU)"})]}),s.jsx("div",{className:"text-[9px] text-gray-500 mt-1",children:"⚡ Higher FPS needs GPU for smooth performance"})]}),s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded",children:[s.jsx("label",{className:"text-[10px] text-gray-300",children:"Schematic Mode"}),s.jsx("button",{onClick:()=>_(!R),className:`px-2 py-0.5 rounded text-[10px] ${R?"bg-purple-600 text-white":"bg-gray-700 text-gray-400"}`,children:R?"ON":"OFF"})]}),s.jsx("div",{className:"text-[9px] text-gray-500 p-2 bg-gray-800 rounded",children:"💡 Connect an X-RAY View node to see live annotated frames"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Batch Size: ",g]}),s.jsxs("select",{value:g,onChange:H=>N(parseInt(H.target.value)),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"1",children:"1 (Real-time)"}),s.jsx("option",{value:"2",children:"2"}),s.jsx("option",{value:"4",children:"4"}),s.jsx("option",{value:"8",children:"8"}),s.jsx("option",{value:"16",children:"16 (Batch)"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"Higher batch = better throughput, more latency"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["IOU Threshold: ",S.toFixed(2)]}),s.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:S,onChange:H=>j(parseFloat(H.target.value)),className:"w-full"}),s.jsx("div",{className:"text-[10px] text-gray-600",children:"Non-max suppression overlap threshold"})]}),s.jsxs("details",{className:"text-xs",children:[s.jsx("summary",{className:"text-gray-400 cursor-pointer hover:text-gray-300",children:"Advanced Options"}),s.jsxs("div",{className:"mt-2 space-y-2 pl-2 border-l-2 border-gray-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-400 block mb-1",children:"Max Detections"}),s.jsx("input",{type:"number",min:"1",max:"1000",defaultValue:e.maxDetections||300,onChange:H=>{e.onChange&&e.onChange({maxDetections:parseInt(H.target.value)})},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",defaultChecked:e.agnostic!==!1,onChange:H=>{e.onChange&&e.onChange({agnostic:H.target.checked})},className:"w-3 h-3"}),s.jsx("span",{className:"text-[10px] text-gray-300",children:"Class-agnostic NMS"})]})}),s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",defaultChecked:e.half||!1,onChange:H=>{e.onChange&&e.onChange({half:H.target.checked})},className:"w-3 h-3"}),s.jsx("span",{className:"text-[10px] text-gray-300",children:"Half precision (FP16)"})]}),s.jsx("div",{className:"text-[9px] text-gray-600 ml-5",children:"Faster inference, slightly lower accuracy"})]})]})]}),s.jsx("div",{className:"pt-2 border-t border-gray-700",children:s.jsxs("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[s.jsxs("div",{children:["🎯 Confidence: ",(r*100).toFixed(0),"%"]}),s.jsxs("div",{children:["📊 Classes: ",i.length===0?"All (80)":i.length]}),s.jsxs("div",{children:["⚡ Speed: ",f," fps × batch ",g]})]})})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-green-500",id:"detections-output"}),s.jsx(oe,{type:"source",position:G.Bottom,className:"w-3 h-3 bg-gray-500",id:"data-output",style:{background:"#6b7280"}})]})})}),wf=[{value:"polygon",label:"Polygon Zone",icon:"📐",description:"Multi-point area"},{value:"rectangle",label:"Rectangle",icon:"▭",description:"Simple rectangle"},{value:"line",label:"Line Crossing",icon:"↔️",description:"Directional line"}],bf=[{value:"include",label:"Include",description:"Only detections inside zone"},{value:"exclude",label:"Exclude",description:"Only detections outside zone"}],T2=w.memo(({data:e,id:t})=>{var N,S;const[n,r]=w.useState(!1),[o,i]=w.useState(!1),[l,a]=w.useState(e.polygon||"[[100,100],[300,100],[300,300],[100,300]]"),[c,u]=w.useState(e.label||"Zone 1"),[p,h]=w.useState(e.zoneType||"polygon"),[d,v]=w.useState(e.filterType||"include"),[y,x]=w.useState(e.cooldown||0),[b,f]=w.useState(e.minDwellTime||0);w.useEffect(()=>{e.onChange&&e.onChange({polygon:p==="polygon"?l:void 0,zoneType:p,label:c,filterType:d,cooldown:y,minDwellTime:b})},[l,p,c,d,y,b]);const m={polygon:"📐",rectangle:"▭",line:"↔️"},g=()=>{try{const j=JSON.parse(l);if(!Array.isArray(j)||j.length<3)return null;const k=Math.max(...j.map($=>$[0])),C=Math.max(...j.map($=>$[1])),P=Math.min(...j.map($=>$[0])),z=Math.min(...j.map($=>$[1])),L=k-P,A=C-z,R=Math.min(120/L,90/A),_=j.map($=>`${($[0]-P)*R},${($[1]-z)*R}`).join(" ");return s.jsxs("svg",{width:"140",height:"100",className:"bg-gray-950 rounded border border-gray-700",children:[s.jsx("polygon",{points:_,fill:d==="include"?"rgba(34, 197, 94, 0.2)":"rgba(239, 68, 68, 0.2)",stroke:d==="include"?"#22c55e":"#ef4444",strokeWidth:"2"}),j.map(($,T)=>s.jsx("circle",{cx:($[0]-P)*R,cy:($[1]-z)*R,r:"3",fill:"#eab308"},T))]})}catch{return s.jsx("div",{className:"text-xs text-red-400",children:"Invalid polygon format"})}};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-yellow-500 bg-gray-900 min-w-[260px] max-w-[320px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-yellow-500",id:"detections-input"}),o&&p==="polygon"&&s.jsx("div",{className:"p-3 border-b border-gray-800 flex justify-center bg-gray-950",children:g()}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:m[p]||"📐"}),s.jsx("div",{className:"font-bold text-sm text-yellow-400",children:"Zone Filter"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[p==="polygon"&&s.jsx("button",{onClick:()=>i(!o),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle zone preview",children:"👁️"}),s.jsx("button",{onClick:()=>r(!n),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[c," (",d,")"]}),n&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Zone Label"}),s.jsx("input",{type:"text",value:c,onChange:j=>u(j.target.value),placeholder:"Entry Zone",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Zone Type"}),s.jsx("select",{value:p,onChange:j=>h(j.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:wf.map(j=>s.jsxs("option",{value:j.value,children:[j.icon," ",j.label]},j.value))}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:(N=wf.find(j=>j.value===p))==null?void 0:N.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Filter Type"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:bf.map(j=>s.jsx("button",{onClick:()=>v(j.value),className:`px-3 py-2 rounded text-xs ${d===j.value?"bg-yellow-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:j.label},j.value))}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:(S=bf.find(j=>j.value===d))==null?void 0:S.description})]}),p==="polygon"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Polygon Points"}),s.jsx("textarea",{value:l,onChange:j=>a(j.target.value),placeholder:"[[x1,y1],[x2,y2],[x3,y3],...]",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white font-mono h-20 resize-none"}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"Format: [[x,y],[x,y],...] Min 3 points"}),s.jsxs("div",{className:"mt-2 flex gap-1",children:[s.jsx("button",{onClick:()=>a("[[100,100],[300,100],[300,300],[100,300]]"),className:"text-[10px] px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:"Rectangle"}),s.jsx("button",{onClick:()=>a("[[200,50],[350,200],[200,350],[50,200]]"),className:"text-[10px] px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:"Diamond"}),s.jsx("button",{onClick:()=>a("[[200,50],[300,150],[250,300],[150,300],[100,150]]"),className:"text-[10px] px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded text-gray-300",children:"Pentagon"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Cooldown: ",y,"s"]}),s.jsx("input",{type:"range",min:"0",max:"300",step:"5",value:y,onChange:j=>x(parseInt(j.target.value)),className:"w-full"}),s.jsx("div",{className:"text-[10px] text-gray-600",children:"Minimum time between triggers"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Min Dwell Time: ",b,"s"]}),s.jsx("input",{type:"range",min:"0",max:"60",value:b,onChange:j=>f(parseInt(j.target.value)),className:"w-full"}),s.jsx("div",{className:"text-[10px] text-gray-600",children:"Object must stay in zone this long"})]}),s.jsx("div",{className:"pt-2 border-t border-gray-700",children:s.jsxs("div",{className:"text-[10px] text-gray-500 space-y-0.5",children:[s.jsxs("div",{children:["🏷️ ",c]}),s.jsxs("div",{children:["📍 Type: ",p]}),s.jsxs("div",{children:["🔁 ",d==="include"?"Inside only":"Outside only"]}),y>0&&s.jsxs("div",{children:["⏱️ Cooldown: ",y,"s"]}),b>0&&s.jsxs("div",{children:["⏲️ Dwell: ",b,"s"]})]})})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-yellow-500",id:"filtered-output"})]})})}),Il=[{value:"email",label:"Email",icon:"📧",color:"purple"},{value:"webhook",label:"Webhook",icon:"🔗",color:"blue"},{value:"record",label:"Record Video",icon:"🎥",color:"red"},{value:"snapshot",label:"Snapshot",icon:"📸",color:"pink"},{value:"alert",label:"Alert",icon:"🚨",color:"red"},{value:"sms",label:"SMS",icon:"📱",color:"green"},{value:"pagerduty",label:"PagerDuty",icon:"📟",color:"orange"}],$2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState(!1),[l,a]=w.useState(0),[c,u]=w.useState(e.to||""),[p,h]=w.useState(e.cc||""),[d,v]=w.useState(e.subject||"Detection Alert"),[y,x]=w.useState(e.includeSnapshot!==!1),[b,f]=w.useState(e.includeDetections!==!1),[m,g]=w.useState(e.url||""),[N,S]=w.useState(e.method||"POST"),[j,k]=w.useState(e.timeout||10),[C,P]=w.useState(e.retries||3),[z,L]=w.useState(e.duration||30),[A,R]=w.useState(e.preBuffer||5),[_,$]=w.useState(e.postBuffer||5),[T,D]=w.useState(e.format||"mp4"),[M,I]=w.useState(e.quality||"medium"),[E,F]=w.useState(e.drawBoxes!==!1),[O,X]=w.useState(e.drawZones||!1),[Y,V]=w.useState(e.snapshotFormat||"jpg"),[Q,H]=w.useState(e.snapshotQuality||90),[B,J]=w.useState(e.severity||"warning"),[W,U]=w.useState(e.message||""),[Z,q]=w.useState(e.notify||[]),[se,le]=w.useState(e.smsTo||""),[ie,ee]=w.useState(e.smsMessage||""),ne=e.actionType||"alert",fe=Il.find(te=>te.value===ne)||Il[4];w.useEffect(()=>{if(e.onChange){const te={actionType:ne};ne==="email"?Object.assign(te,{to:c,cc:p,subject:d,includeSnapshot:y,includeDetections:b}):ne==="webhook"?Object.assign(te,{url:m,method:N,timeout:j,retries:C}):ne==="record"?Object.assign(te,{duration:z,preBuffer:A,postBuffer:_,format:T,quality:M}):ne==="snapshot"?Object.assign(te,{drawBoxes:E,drawZones:O,format:Y,quality:Q}):ne==="alert"?Object.assign(te,{severity:B,message:W,notify:Z}):ne==="sms"&&Object.assign(te,{to:se,message:ie}),e.onChange(te)}},[c,p,d,y,b,m,N,j,C,z,A,_,T,M,E,O,Y,Q,B,W,Z,se,ie]);const Ge=`border-${fe.color}-500`;return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:`shadow-lg rounded-lg border-2 ${Ge} bg-gray-900 min-w-[240px] max-w-[320px]`,children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500",id:"trigger-input"}),o&&s.jsxs("div",{className:"bg-gray-950 border-b border-gray-800 px-4 py-2",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Triggers"}),s.jsxs("div",{className:"text-sm font-mono text-purple-400",children:[l," times"]})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:fe.icon}),s.jsx("div",{className:"font-bold text-sm",children:fe.label})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>i(!o),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle activity monitor",children:"📊"}),s.jsx("button",{onClick:()=>r(!n),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),n&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Action Type"}),s.jsx("select",{value:ne,onChange:te=>{e.onChange&&e.onChange({actionType:te.target.value})},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:Il.map(te=>s.jsxs("option",{value:te.value,children:[te.icon," ",te.label]},te.value))})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-700 space-y-3",children:[ne==="email"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"To (Required)"}),s.jsx("input",{type:"email",value:c,onChange:te=>u(te.target.value),placeholder:"security@company.com",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"CC (Optional)"}),s.jsx("input",{type:"text",value:p,onChange:te=>h(te.target.value),placeholder:"manager@company.com",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Subject"}),s.jsx("input",{type:"text",value:d,onChange:te=>v(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:te=>x(te.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Include snapshot"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:b,onChange:te=>f(te.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Include detections"})]})]})]}),ne==="webhook"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"URL (Required)"}),s.jsx("input",{type:"url",value:m,onChange:te=>g(te.target.value),placeholder:"https://api.example.com/webhook",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white font-mono"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Method"}),s.jsxs("select",{value:N,onChange:te=>S(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"POST",children:"POST"}),s.jsx("option",{value:"PUT",children:"PUT"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Timeout (s)"}),s.jsx("input",{type:"number",value:j,onChange:te=>k(parseInt(te.target.value)),min:"1",max:"60",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Retries: ",C]}),s.jsx("input",{type:"range",min:"0",max:"5",value:C,onChange:te=>P(parseInt(te.target.value)),className:"w-full"})]})]}),ne==="record"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Duration: ",z,"s"]}),s.jsx("input",{type:"range",min:"10",max:"300",step:"10",value:z,onChange:te=>L(parseInt(te.target.value)),className:"w-full"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Pre-buffer: ",A,"s"]}),s.jsx("input",{type:"range",min:"0",max:"60",step:"5",value:A,onChange:te=>R(parseInt(te.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Post-buffer: ",_,"s"]}),s.jsx("input",{type:"range",min:"0",max:"60",step:"5",value:_,onChange:te=>$(parseInt(te.target.value)),className:"w-full"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Format"}),s.jsxs("select",{value:T,onChange:te=>D(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"mp4",children:"MP4"}),s.jsx("option",{value:"mkv",children:"MKV"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Quality"}),s.jsxs("select",{value:M,onChange:te=>I(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})]}),s.jsxs("div",{className:"text-[10px] text-gray-600 bg-gray-800/50 p-2 rounded",children:["Total: ",A+z+_,"s clip"]})]}),ne==="snapshot"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:te=>F(te.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Draw bounding boxes"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:O,onChange:te=>X(te.target.checked),className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300",children:"Draw zones"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Format"}),s.jsxs("select",{value:Y,onChange:te=>V(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"jpg",children:"JPEG"}),s.jsx("option",{value:"png",children:"PNG"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Quality: ",Q]}),s.jsx("input",{type:"range",min:"50",max:"100",value:Q,onChange:te=>H(parseInt(te.target.value)),className:"w-full"})]})]})]}),ne==="alert"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Severity"}),s.jsxs("select",{value:B,onChange:te=>J(te.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"info",children:"ℹ️ Info"}),s.jsx("option",{value:"warning",children:"⚠️ Warning"}),s.jsx("option",{value:"critical",children:"🚨 Critical"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Message"}),s.jsx("textarea",{value:W,onChange:te=>U(te.target.value),placeholder:"Alert message...",rows:"2",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Notify via:"}),s.jsx("div",{className:"space-y-1",children:["email","sms","pagerduty","webhook"].map(te=>s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Z.includes(te),onChange:ut=>{ut.target.checked?q([...Z,te]):q(Z.filter(Dt=>Dt!==te))},className:"w-3 h-3"}),s.jsx("span",{className:"text-xs text-gray-300 capitalize",children:te})]},te))})]})]}),ne==="sms"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Phone Number"}),s.jsx("input",{type:"tel",value:se,onChange:te=>le(te.target.value),placeholder:"+1234567890",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white font-mono"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Message (160 chars)"}),s.jsx("textarea",{value:ie,onChange:te=>ee(te.target.value),placeholder:"Detection alert...",maxLength:"160",rows:"3",className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white resize-none"}),s.jsxs("div",{className:"text-[10px] text-gray-600 text-right",children:[ie.length,"/160"]})]})]})]})]}),!n&&s.jsxs("div",{className:"text-xs text-gray-500",children:[ne==="email"&&c&&`To: ${c}`,ne==="webhook"&&m&&`URL: ${m.substring(0,30)}...`,ne==="record"&&`${z}s recording`,ne==="alert"&&B&&`${B.toUpperCase()} alert`,ne==="sms"&&se&&`To: ${se}`]})]})]})})}),D2=w.memo(({data:e,id:t})=>{var v;const[n,r]=w.useState(null),[o,i]=w.useState(!0),[l,a]=w.useState({total:0,fps:0}),{getEdges:c}=$t(),u=()=>c().some(x=>x.target===t),p=()=>c().filter(x=>x.target===t).map(x=>x.source),h=()=>{var x;const y=c().filter(b=>b.target===t);return y.length===0?null:{nodeId:y[0].source,type:((x=y[0].data)==null?void 0:x.type)||"unknown"}},d=y=>p().includes(y.node_id);return w.useEffect(()=>{if(!u()){r(null);return}const y=`${Gt}/api/ws`;console.log(`DataPreviewNode ${t}: Attempting WebSocket connection to ${y}`);const x=new WebSocket(y);return x.onopen=()=>{console.log(`DataPreviewNode ${t}: WebSocket connected`)},x.onmessage=b=>{var f,m,g,N,S,j;try{const k=JSON.parse(b.data);if(console.log(`DataPreviewNode ${t}: Received WebSocket message`,k),(k.type==="detection_data"||k.type==="node_completed")&&(d(k)||k.node_id===t)){console.log(`DataPreviewNode ${t}: Processing detection data`,k);const P=k.detections||((f=k.data)==null?void 0:f.detections)||[],z=k.count||((m=k.data)==null?void 0:m.detections_count)||P.length||0;r({timestamp:k.timestamp||new Date().toISOString(),source:k.node_id||((g=h())==null?void 0:g.nodeId)||"unknown",frame_id:k.frame_id||((N=k.data)==null?void 0:N.frame_id)||0,resolution:k.resolution||((S=k.data)==null?void 0:S.frame_shape)||{width:1920,height:1080},detections:P,count:z,processing_time_ms:k.processing_time_ms||((j=k.data)==null?void 0:j.processing_time_ms)||0,zone_violations:k.zone_violations||0}),a(L=>({total:L.total+z,fps:k.fps||L.fps}))}else console.log(`DataPreviewNode ${t}: Skipping message - type: ${k.type}, node_id: ${k.node_id}`)}catch(k){console.error("Error parsing WebSocket message:",k)}},x.onerror=b=>{console.error(`DataPreviewNode ${t}: WebSocket error`,b)},x.onclose=()=>{console.log(`DataPreviewNode ${t}: WebSocket disconnected`)},()=>{console.log(`DataPreviewNode ${t}: Cleaning up WebSocket`),x.close()}},[t]),s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-indigo-500 bg-gray-900 min-w-[320px] max-w-[450px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-indigo-500"}),s.jsxs("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"📊"}),s.jsx("div",{className:"font-bold text-sm text-indigo-400",children:"Detection Data"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[u()&&l.fps>0&&s.jsxs("div",{className:"text-xs bg-green-900/50 text-green-300 px-2 py-1 rounded font-mono",children:[l.fps," fps"]}),s.jsx("button",{onClick:()=>i(!o),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",children:o?"▼":"▶"})]})]}),u()&&l.total>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Total detected: ",l.total]})]}),s.jsx("div",{className:"px-4 py-3 max-h-[500px] overflow-y-auto",children:u()?n?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gray-950 rounded p-3 border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["Frame #",n.frame_id]}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(n.timestamp).toLocaleTimeString()})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Objects:"}),s.jsx("span",{className:"text-white ml-2 font-bold",children:n.count})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Process:"}),s.jsxs("span",{className:"text-green-400 ml-2",children:[n.processing_time_ms,"ms"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Resolution:"}),s.jsxs("span",{className:"text-gray-400 ml-2",children:[n.resolution.width,"x",n.resolution.height]})]}),n.zone_violations>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Violations:"}),s.jsx("span",{className:"text-red-400 ml-2 font-bold",children:n.zone_violations})]})]})]}),o&&n.detections.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-xs text-gray-400 font-semibold",children:"Detected Objects:"}),n.detections.map((y,x)=>s.jsxs("div",{className:"bg-gray-950 rounded p-2 border border-gray-800",children:[s.jsxs("div",{className:"flex justify-between items-start mb-1",children:[s.jsx("div",{className:"text-sm font-semibold text-indigo-400",children:y.class}),s.jsxs("div",{className:"text-xs bg-green-900/50 text-green-300 px-2 py-0.5 rounded",children:[(y.confidence*100).toFixed(1),"%"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 space-y-0.5 font-mono",children:[s.jsxs("div",{children:["BBox: [",y.bbox.x,", ",y.bbox.y,", ",y.bbox.width,", ",y.bbox.height,"]"]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Track ID: ",y.track_id]}),y.speed&&s.jsxs("span",{className:"text-yellow-500",children:["Speed: ",y.speed," km/h"]})]})]})]},x))]}),o&&n.detections.length===0&&s.jsx("div",{className:"text-xs text-gray-600 text-center py-2",children:"No objects detected in this frame"}),o&&s.jsxs("details",{className:"text-xs",children:[s.jsx("summary",{className:"text-gray-500 cursor-pointer hover:text-gray-400 mb-2",children:"View Raw JSON"}),s.jsx("pre",{className:"bg-black rounded p-2 text-indigo-400 font-mono text-[10px] overflow-x-auto border border-gray-800",children:JSON.stringify(n,null,2)})]})]}):s.jsxs("div",{className:"text-xs text-gray-600 text-center py-4",children:[s.jsx("div",{className:"animate-pulse",children:"Waiting for detections..."}),s.jsxs("div",{className:"text-[10px] text-gray-700 mt-1",children:["Connected to ",(v=h())==null?void 0:v.nodeId]})]}):s.jsxs("div",{className:"text-gray-600 text-center py-8",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🔌"}),s.jsx("div",{className:"text-xs",children:"Connect a detection node"}),s.jsx("div",{className:"text-[10px] text-gray-700 mt-2",children:"Wire a model or filter output here"})]})})]})})}),A2=w.memo(({data:e,id:t})=>{const{getEdges:n}=$t(),[r,o]=w.useState(null),[i,l]=w.useState({fps:0,detections:0,latency:0}),[a,c]=w.useState(!0),u=w.useRef(null),[p,h]=w.useState(!1),d=()=>n().some(y=>y.target===t);return w.useEffect(()=>{h(d())},[n()]),w.useEffect(()=>{if(!p){o(null);return}const v=new WebSocket(`${Gt}/api/ws`);return v.onopen=()=>{console.log(`VideoPreview ${t}: WebSocket connected`)},v.onmessage=y=>{var x,b;try{const f=JSON.parse(y.data);f.type==="xray_frame"&&(console.log(`🔍 X-RAY View ${t}: Received xray_frame message`),console.log(`   Target node_id: ${f.node_id}, My id: ${t}`),console.log(`   Match: ${f.node_id===t}`),console.log(`   Has frame_data: ${!!f.frame_data}`),console.log(`   Frame size: ${f.frame_data?(f.frame_data.length/1024).toFixed(1):0} KB`),console.log(`   Detections: ${f.detections_count}`)),f.type==="xray_frame"&&f.node_id===t&&f.frame_data?(console.log(`✅ X-RAY View ${t}: Processing X-RAY frame!`),console.log(`   Resolution: ${(x=f.resolution)==null?void 0:x.width}x${(b=f.resolution)==null?void 0:b.height}`),console.log(`   Detections: ${f.detections_count}`),o(f.frame_data),l({fps:f.fps||0,detections:f.detections_count||0,latency:f.processing_time_ms||0}),console.log(`✅ X-RAY View ${t}: Frame state updated`)):f.type==="xray_frame"&&f.node_id!==t?console.log(`⏭️  X-RAY View ${t}: Skipping frame meant for ${f.node_id}`):f.type==="xray_frame"&&!f.frame_data&&console.warn(`⚠️  X-RAY View ${t}: Received xray_frame but no frame_data!`)}catch(f){console.error(`❌ X-RAY View ${t}: Error parsing frame data:`,f)}},v.onerror=y=>{console.error(`X-RAY View ${t}: WebSocket error`,y)},v.onclose=()=>{console.log(`X-RAY View ${t}: WebSocket closed`)},()=>{console.log(`X-RAY View ${t}: Cleaning up WebSocket`),v.close()}},[t,p]),w.useEffect(()=>{if(!r||!u.current){r||console.log(`X-RAY View ${t}: No frame to draw`),u.current||console.log(`X-RAY View ${t}: No canvas ref`);return}console.log(`🎨 X-RAY View ${t}: Drawing frame to canvas`);const v=u.current,y=v.getContext("2d"),x=new Image;x.onload=()=>{v.width=x.width,v.height=x.height,y.drawImage(x,0,0),console.log(`✅ X-RAY View ${t}: Frame drawn! Canvas: ${x.width}x${x.height}`)},x.onerror=b=>{console.error(`❌ X-RAY View ${t}: Error loading image:`,b)},x.src=`data:image/jpeg;base64,${r}`},[r,t]),s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[320px] max-w-[640px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500"}),s.jsx("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🔍"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"X-RAY View"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[i.fps>0&&s.jsxs("div",{className:"text-xs bg-green-900/50 text-green-300 px-2 py-1 rounded font-mono",children:[i.fps," fps"]}),s.jsx("button",{onClick:()=>c(!a),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle stats",children:"📊"})]})]})}),s.jsxs("div",{className:"relative bg-black",children:[p?r?s.jsx("canvas",{ref:u,className:"w-full h-auto"}):s.jsx("div",{className:"text-xs text-gray-600 text-center py-16",children:s.jsx("div",{className:"animate-pulse",children:"Waiting for frames..."})}):s.jsxs("div",{className:"text-gray-600 text-center py-16",children:[s.jsx("div",{className:"text-3xl mb-3",children:"🔍"}),s.jsx("div",{className:"text-sm",children:"Connect an AI model"}),s.jsx("div",{className:"text-xs text-gray-700 mt-2",children:"Enable X-RAY mode in model settings"})]}),a&&r&&s.jsx("div",{className:"absolute bottom-2 left-2 right-2 bg-black/70 rounded p-2",children:s.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"FPS"}),s.jsx("div",{className:"text-green-400 font-mono",children:i.fps})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Detections"}),s.jsx("div",{className:"text-cyan-400 font-mono",children:i.detections})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-gray-400",children:"Latency"}),s.jsxs("div",{className:"text-yellow-400 font-mono",children:[i.latency,"ms"]})]})]})})]})]})})}),R2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(!0),[o,i]=w.useState([]),[l,a]=w.useState(0),[c,u]=w.useState(10),[p,h]=w.useState("connected"),[d,v]=w.useState(!1),{getEdges:y,getNodes:x}=$t(),b=()=>y().some(j=>j.target===t),f=()=>y().filter(j=>j.target===t).map(j=>j.source),m=S=>p==="all"?!0:f().includes(S.node_id),g=S=>["node_started","node_completed","node_processing","status_update","metrics_update"].includes(S);w.useEffect(()=>{console.log(`DebugNode ${t}: Setting up WebSocket connection...`);const S=y();S.some(C=>C.target===t),console.log(`DebugNode ${t}: Found ${S.filter(C=>C.target===t).length} incoming connections`);const j=`${Gt}/api/ws`;console.log(`DebugNode ${t}: Attempting WebSocket connection to ${j}`);const k=new WebSocket(j);return k.onopen=()=>{console.log(`DebugNode ${t}: WebSocket connected`)},k.onmessage=C=>{try{const P=JSON.parse(C.data);if(console.log(`🔔 DebugNode ${t}: RAW WebSocket message received:`,C.data),console.log(`🔔 DebugNode ${t}: Parsed data:`,P),console.log(`🔔 DebugNode ${t}: Message type: ${P.type}, Node ID: ${P.node_id}, My ID: ${t}`),console.log(`🔔 DebugNode ${t}: Match check: type=${P.type==="debug_message"}, nodeId=${P.node_id===t}`),P.type==="debug_message"||P.type==="detection_data"||P.type==="node_error"||P.type==="status_update"){console.log(`✅ DebugNode ${t}: PROCESSING message!`,P);const z={timestamp:P.timestamp,source:P.workflow_id||"workflow",type:P.type,message:P.message||JSON.stringify(P,null,2),detections:P.detections||[],node_id:P.node_id,raw:P};i(L=>{const A=[z,...L].slice(0,c);return console.log(`✅ DebugNode ${t}: Updated messages array, new count: ${A.length}`),A}),a(L=>L+1)}else console.log(`⏭️ DebugNode ${t}: Skipping message - type: ${P.type}`)}catch(P){console.error("❌ Error parsing WebSocket message:",P,C.data)}},k.onerror=C=>{console.error(`DebugNode ${t}: WebSocket error`,C)},k.onclose=()=>{console.log(`DebugNode ${t}: WebSocket disconnected`)},()=>{console.log(`DebugNode ${t}: Cleaning up WebSocket connection`),k.close()}},[c,t]);const N=()=>{i([]),a(0)};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-cyan-500 bg-gray-900 min-w-[300px] max-w-[400px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-cyan-500",style:{top:"50%"}}),s.jsxs("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🐛"}),s.jsx("div",{className:"font-bold text-sm text-cyan-400",children:"Debug Console"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:"text-xs bg-cyan-900/50 text-cyan-300 px-2 py-1 rounded",children:[l," msgs"]}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle debug view",children:n?"👁️":"👁️‍🗨️"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:N,className:"text-xs px-2 py-1 bg-red-900/50 text-red-300 rounded hover:bg-red-900/70",children:"Clear"}),s.jsxs("select",{value:c,onChange:S=>u(parseInt(S.target.value)),className:"text-xs px-2 py-1 bg-gray-800 border border-gray-700 rounded",children:[s.jsx("option",{value:"5",children:"5 msgs"}),s.jsx("option",{value:"10",children:"10 msgs"}),s.jsx("option",{value:"20",children:"20 msgs"}),s.jsx("option",{value:"50",children:"50 msgs"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>h(p==="connected"?"all":"connected"),className:`text-[10px] px-2 py-1 rounded transition-colors ${p==="connected"?"bg-cyan-900/50 text-cyan-300 border border-cyan-700":"bg-gray-800 text-gray-400 border border-gray-700"}`,title:p==="connected"?"Showing connected nodes only":"Showing all nodes",children:p==="connected"?"🔗 Connected Only":"🌐 All Nodes"}),s.jsx("button",{onClick:()=>v(!d),className:`text-[10px] px-2 py-1 rounded transition-colors ${d?"bg-purple-900/50 text-purple-300 border border-purple-700":"bg-gray-800 text-gray-400 border border-gray-700"}`,title:d?"Showing system messages":"Hiding system messages",children:d?"⚙️ System: ON":"⚙️ System: OFF"})]})]})]}),n&&s.jsx("div",{className:"p-3 bg-black font-mono text-xs max-h-[400px] overflow-y-auto",children:b()?(()=>{const S=o.filter(j=>!(!m(j)||!d&&g(j.type)));return S.length===0?s.jsxs("div",{className:"text-gray-600 text-center py-4",children:[s.jsx("div",{className:"text-xs",children:"Waiting for data..."}),s.jsx("div",{className:"text-[10px] text-gray-700 mt-1",children:p==="connected"?"Filtered: Connected nodes only":"Listening to all nodes"}),s.jsx("div",{className:"text-[10px] text-gray-700",children:!d&&"(System messages hidden)"}),s.jsxs("div",{className:"text-[10px] text-cyan-600 mt-2",children:["Total msgs: ",o.length," | Filtered: ",S.length]})]}):s.jsx("div",{className:"space-y-2",children:S.map((j,k)=>{var P;const C=g(j.type);return s.jsxs("div",{className:`border-l-2 pl-2 pb-2 ${C?"border-purple-500":"border-cyan-500"}`,children:[s.jsxs("div",{className:"text-gray-500 text-[10px] mb-1 flex justify-between items-center",children:[s.jsx("span",{children:new Date(j.timestamp).toLocaleTimeString()}),s.jsxs("div",{className:"flex items-center space-x-2",children:[C&&s.jsx("span",{className:"text-purple-500 text-[9px]",children:"⚙️"}),s.jsxs("span",{className:C?"text-purple-600":"text-cyan-600",children:["← ",((P=j.node_id)==null?void 0:P.substring(0,12))||j.source]})]})]}),s.jsx("div",{className:`text-[11px] whitespace-pre-wrap break-words ${C?"text-purple-400":"text-cyan-400"}`,children:j.message}),j.detections&&j.detections.length>0&&s.jsxs("div",{className:"mt-1 text-[10px] text-gray-500",children:["Detections: ",j.detections.length]})]},k)})})})():s.jsxs("div",{className:"text-gray-600 text-center py-8",children:[s.jsx("div",{className:"text-2xl mb-2",children:"🔌"}),s.jsx("div",{className:"text-xs",children:"Connect a node to start debugging"}),s.jsx("div",{className:"text-[10px] text-gray-700 mt-2",children:"Wire any node's output to this debug console"})]})}),!n&&s.jsx("div",{className:"px-4 py-2 text-xs text-gray-500 text-center",children:"Click 👁️ to view debug output"})]})})}),L2=w.memo(({data:e,id:t})=>s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[180px]",children:[s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:"📥"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"Link In"})]}),s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:e.linkName||"Unnamed Link"}),e.description&&s.jsx("div",{className:"text-xs text-gray-500 italic",children:e.description})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500",id:"link-output"})]})),F2=w.memo(({data:e,id:t})=>s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[180px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500",id:"link-input"}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:"📤"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"Link Out"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:e.linkName||"Unnamed Link"})]})]})),z2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(!1);return s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[200px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500",id:"call-input"}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🔗"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"Link Call"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-gray-400 hover:text-white text-xs",children:"⚙️"})]}),s.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["→ ",e.linkName||"Select Link"]}),n&&e.parameters&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Parameters:"}),s.jsxs("div",{className:"text-xs text-gray-400 font-mono",children:[Object.keys(e.parameters).length," defined"]})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500",id:"call-output"})]})}),O2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(!1);return s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-red-500 bg-gray-900 min-w-[200px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-red-500",id:"error-input"}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🚨"}),s.jsx("div",{className:"font-bold text-sm text-red-400",children:"Catch Error"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-gray-400 hover:text-white text-xs",children:"⚙️"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:e.scope==="specific"?"Specific Nodes":"All Errors"}),n&&e.scope==="specific"&&e.nodeIds&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Watching:"}),s.jsxs("div",{className:"text-xs text-gray-400",children:[e.nodeIds.length," node(s)"]})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-red-500",id:"handled-output"})]})}),V2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState(e.config||{}),[l,a]=w.useState(e.configName||"Untitled Config"),[c,u]=w.useState(!0),[p,h]=w.useState(""),d=f=>{const m=f.target.value;try{const g=JSON.parse(m);i(g),u(!0),h(""),e.config=g}catch(g){u(!1),h(g.message)}},v=f=>{i(f),e.config=f,u(!0),h("")},y={"YOLOv8 - Person Detection":{confidence:.7,classes:[0],iou:.45,maxDetections:100},"YOLOv8 - Vehicle Detection":{confidence:.6,classes:[2,3,5,7],iou:.5,maxDetections:50},"YOLOv8 - High Accuracy":{confidence:.85,classes:[0,1,2,15,16],iou:.4,maxDetections:200,agnostic:!1},"Webhook - Standard POST":{method:"POST",timeout:10,retries:3,headers:{"Content-Type":"application/json"}},"Recording - Standard":{duration:30,preBuffer:5,postBuffer:5,format:"mp4",quality:"medium"},"Email - Alert Template":{includeSnapshot:!0,includeDetections:!0,subject:"Detection Alert - {{camera_name}}"}},x={model:"AI Model Config",webhook:"Webhook Config",record:"Recording Config",email:"Email Config",generic:"Generic Config"},b=e.configType||"generic";return s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-yellow-500 bg-gray-900 min-w-[280px] max-w-[400px]",children:[s.jsxs("div",{className:"px-4 py-3 bg-yellow-950/30 border-b border-yellow-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"⚙️"}),s.jsx("div",{className:"font-bold text-sm text-yellow-400",children:"Config Node"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",children:n?"📝":"👁️"})]}),s.jsx("input",{type:"text",value:l,onChange:f=>{a(f.target.value),e.configName=f.target.value},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",placeholder:"Configuration name..."}),s.jsx("div",{className:"mt-2 text-[10px] text-yellow-600",children:x[b]})]}),n&&s.jsxs("div",{className:"p-3 border-b border-gray-800",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Load Template:"}),s.jsxs("select",{onChange:f=>{f.target.value&&v(y[f.target.value])},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",children:[s.jsx("option",{value:"",children:"-- Select Template --"}),Object.keys(y).map(f=>s.jsx("option",{value:f,children:f},f))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Configuration JSON:"}),s.jsx("textarea",{defaultValue:JSON.stringify(o,null,2),onChange:d,className:`w-full px-2 py-2 bg-black border ${c?"border-gray-700":"border-red-500"} rounded text-xs font-mono text-gray-200`,rows:12,spellCheck:!1}),!c&&s.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["❌ ",p]})]}),s.jsxs("div",{className:"mt-2 flex space-x-2",children:[s.jsx("button",{onClick:()=>{const f=JSON.stringify(o,null,2);navigator.clipboard.writeText(f),alert("Config copied to clipboard!")},className:"text-xs px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded",children:"📋 Copy"}),s.jsx("button",{onClick:()=>{i({}),e.config={}},className:"text-xs px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded",children:"🗑️ Clear"})]})]}),s.jsxs("div",{className:"px-3 py-2 bg-gray-950",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Active Config:"}),s.jsxs("div",{className:"text-xs font-mono text-yellow-400",children:[Object.keys(o).length," parameter(s)"]}),s.jsxs("div",{className:"text-[10px] text-gray-600 mt-1",children:[Object.keys(o).slice(0,3).join(", "),Object.keys(o).length>3&&"..."]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-yellow-500",id:"config-output"})]})}),B2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState(e.sampleRate||16e3),[o,i]=w.useState(e.channels||1),[l,a]=w.useState(e.format||"wav"),[c,u]=w.useState(e.bufferDuration||5),p=(v,y)=>{e[v]=y},h=[8e3,16e3,22050,44100,48e3],d=["wav","mp3","flac","pcm"];return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-pink-500 bg-gray-900 min-w-[280px]",children:[s.jsxs("div",{className:"px-4 py-3 bg-pink-950/30 border-b border-pink-800",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:"🎵"}),s.jsx("div",{className:"font-bold text-sm text-pink-400",children:"Audio Extractor"})]}),s.jsx("div",{className:"text-[10px] text-pink-600",children:"Extract audio from video streams"})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Sample Rate"}),s.jsx("select",{value:n,onChange:v=>{const y=parseInt(v.target.value);r(y),p("sampleRate",y)},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:h.map(v=>s.jsxs("option",{value:v,children:[v," Hz"]},v))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Channels"}),s.jsxs("select",{value:o,onChange:v=>{const y=parseInt(v.target.value);i(y),p("channels",y)},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:1,children:"Mono"}),s.jsx("option",{value:2,children:"Stereo"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Audio Format"}),s.jsx("select",{value:l,onChange:v=>{a(v.target.value),p("format",v.target.value)},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:d.map(v=>s.jsx("option",{value:v,children:v.toUpperCase()},v))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Buffer Duration (seconds)"}),s.jsx("input",{type:"number",min:"1",max:"60",value:c,onChange:v=>{const y=parseInt(v.target.value);u(y),p("bufferDuration",y)},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white"}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"Audio chunk size for processing"})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-800 text-xs text-gray-500",children:["Output: ",n,"Hz, ",o,"ch, ",l]})]}),s.jsx(oe,{type:"target",position:G.Left,id:"video-input",className:"w-3 h-3 bg-blue-500",style:{top:"25%"}}),s.jsx(oe,{type:"source",position:G.Right,id:"audio-output",className:"w-3 h-3 bg-pink-500"})]})})}),H2=w.memo(({data:e,id:t})=>{const[n,r]=w.useState([]),[o,i]=w.useState(e.modelId||""),[l,a]=w.useState(e.modelName||""),[c,u]=w.useState(e.modelType||"transcription"),[p,h]=w.useState(e.language||"auto"),[d,v]=w.useState(e.confidence||.7),[y,x]=w.useState(e.detectKeywords||[]),[b,f]=w.useState("");w.useEffect(()=>{m()},[]);const m=async()=>{try{const C=await fetch(`${ce}/api/workflow-components/audio-models`);if(C.ok){const P=await C.json();r(P.models||g())}else r(g())}catch(C){console.error("Failed to load audio models:",C),r(g())}},g=()=>[{id:"whisper-tiny",name:"Whisper Tiny",type:"transcription",speed:"very fast"},{id:"whisper-base",name:"Whisper Base",type:"transcription",speed:"fast"},{id:"whisper-small",name:"Whisper Small",type:"transcription",speed:"medium"},{id:"whisper-medium",name:"Whisper Medium",type:"transcription",speed:"slow"},{id:"whisper-large",name:"Whisper Large",type:"transcription",speed:"very slow"},{id:"yamnet",name:"YAMNet",type:"sound_classification",speed:"fast"},{id:"audio-spectrogram-transformer",name:"AST",type:"sound_classification",speed:"medium"},{id:"panns-cnn14",name:"PANNs CNN14",type:"sound_classification",speed:"medium"}],N=C=>{const P=n.find(z=>z.id===C);P&&(i(C),a(P.name),u(P.type),e.modelId=C,e.modelName=P.name,e.modelType=P.type)},S=()=>{if(b.trim()){const C=[...y,b.trim()];x(C),e.detectKeywords=C,f("")}},j=C=>{const P=y.filter((z,L)=>L!==C);x(P),e.detectKeywords=P},k=[{code:"auto",name:"Auto Detect"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"}];return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-pink-500 bg-gray-900 min-w-[300px] max-w-[340px]",children:[s.jsxs("div",{className:"px-4 py-3 bg-pink-950/30 border-b border-pink-800",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-xl",children:"🎤"}),s.jsx("div",{className:"font-bold text-sm text-pink-400",children:"Audio AI"})]}),s.jsx("div",{className:"text-[10px] text-pink-600",children:c==="transcription"?"Speech-to-text transcription":"Sound classification & detection"})]}),s.jsxs("div",{className:"p-4 space-y-3 max-h-[500px] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"AI Model *"}),s.jsxs("select",{value:o,onChange:C=>N(C.target.value),className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:[s.jsx("option",{value:"",children:"Select Model..."}),s.jsx("optgroup",{label:"🎙️ Transcription (Whisper)",children:n.filter(C=>C.type==="transcription").map(C=>s.jsxs("option",{value:C.id,children:[C.name," (",C.speed,")"]},C.id))}),s.jsx("optgroup",{label:"🔊 Sound Classification",children:n.filter(C=>C.type==="sound_classification").map(C=>s.jsxs("option",{value:C.id,children:[C.name," (",C.speed,")"]},C.id))})]})]}),c==="transcription"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Language"}),s.jsx("select",{value:p,onChange:C=>{h(C.target.value),e.language=C.target.value},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white",children:k.map(C=>s.jsx("option",{value:C.code,children:C.name},C.code))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Trigger Keywords (optional)"}),s.jsxs("div",{className:"flex space-x-1 mb-2",children:[s.jsx("input",{type:"text",value:b,onChange:C=>f(C.target.value),onKeyPress:C=>C.key==="Enter"&&(C.preventDefault(),S()),placeholder:"help, emergency, gun...",className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-white"}),s.jsx("button",{onClick:S,className:"px-2 py-1 bg-pink-600 hover:bg-pink-700 rounded text-xs text-white",children:"+"})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:y.map((C,P)=>s.jsxs("span",{className:"inline-flex items-center space-x-1 px-2 py-1 bg-pink-900/30 border border-pink-700/50 rounded text-xs text-pink-300",children:[s.jsx("span",{children:C}),s.jsx("button",{onClick:()=>j(P),className:"text-pink-500 hover:text-pink-300",children:"×"})]},P))}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1",children:"Alert when these words are detected in speech"})]})]}),c==="sound_classification"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Detection Confidence"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:d,onChange:C=>{const P=parseFloat(C.target.value);v(P),e.confidence=P},className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"0%"}),s.jsxs("span",{className:"text-pink-400 font-medium",children:[(d*100).toFixed(0),"%"]}),s.jsx("span",{children:"100%"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Detect Sounds"}),s.jsxs("div",{className:"text-[10px] text-gray-600 space-y-0.5",children:[s.jsx("div",{children:"🔫 Gunshots"}),s.jsx("div",{children:"💥 Explosions"}),s.jsx("div",{children:"🚨 Alarms"}),s.jsx("div",{children:"🔨 Glass Breaking"}),s.jsx("div",{children:"😱 Screaming"}),s.jsx("div",{children:"🐕 Dog Barking"}),s.jsx("div",{children:"🚗 Vehicle Engine"}),s.jsx("div",{children:"🔊 Loud Noise"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Buffer Duration (seconds)"}),s.jsx("input",{type:"number",min:"1",max:"60",value:bufferDuration,onChange:C=>{const P=parseInt(C.target.value);setBufferDuration(P),updateData("bufferDuration",P)},className:"w-full px-2 py-1.5 bg-gray-800 border border-gray-700 rounded text-xs text-white"}),s.jsxs("div",{className:"text-[10px] text-gray-600 mt-1",children:["Process audio in ",bufferDuration,"s chunks"]})]})]}),s.jsx("div",{className:"px-4 py-2 bg-gray-950 border-t border-gray-800 text-xs text-gray-500",children:o?s.jsx("span",{className:"text-pink-400",children:c==="transcription"?"🎙️ Transcribing...":"🔊 Classifying..."}):s.jsx("span",{children:"Select a model to begin"})}),s.jsx(oe,{type:"target",position:G.Left,id:"audio-input",className:"w-3 h-3 bg-pink-500",style:{top:"50%"}}),s.jsx(oe,{type:"source",position:G.Right,id:"transcript-output",className:"w-3 h-3 bg-purple-500"})]})})}),W2=w.memo(({data:e,id:t})=>{var Y;const[n,r]=w.useState(e.displayMode||"vu_meter"),[o,i]=w.useState(e.sensitivity||.5),[l,a]=w.useState(e.frequencyBands||8),[c,u]=w.useState(e.peakHold!==!1),[p,h]=w.useState(e.colorScheme||"gradient"),[d,v]=w.useState(e.enableThreshold||!1),[y,x]=w.useState(e.thresholdLevel||75),[b,f]=w.useState(e.thresholdMode||"continuous"),[m,g]=w.useState(e.hysteresis||5),[N,S]=w.useState(!1),[j,k]=w.useState(!1),[C,P]=w.useState(0),[z,L]=w.useState([]),[A,R]=w.useState(!1),[_,$]=w.useState(!1),[T,D]=w.useState("demo");w.useEffect(()=>{if(!j)return;const V="ws://localhost:8000/ws";let Q=null,H=null;try{Q=new WebSocket(V),Q.onopen=()=>{console.log("AudioVU WebSocket connected"),D("connecting...")},Q.onmessage=B=>{try{const J=JSON.parse(B.data);J.type==="audioVU_update"&&J.node_id===t&&(P(J.data.level_db),L(J.data.spectrum),R(J.data.triggered),$(!0),D("live"))}catch(J){console.error("Error parsing WebSocket message:",J)}},Q.onerror=()=>{console.log("WebSocket error, falling back to demo mode"),$(!1),D("demo (backend not running)")},Q.onclose=()=>{$(!1),D("demo (backend not running)")}}catch(B){console.log("Failed to connect WebSocket:",B),$(!1),D("demo (backend not running)")}return setTimeout(()=>{(!Q||Q.readyState!==WebSocket.OPEN)&&(H=setInterval(()=>{const B=Math.random()*100;P(B),d&&(B>=y?R(!0):B<y-m&&R(!1));const J=Array.from({length:l},()=>Math.random()*100);L(J)},100))},1e3),()=>{Q&&Q.close(),H&&clearInterval(H)}},[j,t,l,d,y,m]);const M=(V,Q)=>{e.onChange&&e.onChange(t,{...e,[V]:Q})},I=[{value:"vu_meter",label:"VU Meter",icon:"📊"},{value:"spectrum",label:"Frequency Spectrum",icon:"📈"},{value:"waveform",label:"Waveform",icon:"〰️"},{value:"spectrogram",label:"Spectrogram",icon:"🎨"},{value:"vu_and_spectrum",label:"VU + Spectrum",icon:"📊📈"}],E=[{value:"gradient",label:"Green → Yellow → Red"},{value:"blue",label:"Blue Gradient"},{value:"purple",label:"Purple Gradient"},{value:"rainbow",label:"Rainbow"},{value:"monochrome",label:"Monochrome"}],F=V=>V<33?"bg-green-500":V<66?"bg-yellow-500":"bg-red-500",O=()=>s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Level"}),s.jsxs("span",{children:[C.toFixed(0)," dB"]}),d&&A&&s.jsx("span",{className:"text-red-400 font-bold animate-pulse",children:"TRIGGERED"})]}),s.jsxs("div",{className:"relative h-3 bg-gray-800 rounded overflow-hidden",children:[s.jsx("div",{className:`h-full transition-all duration-100 ${F(C)}`,style:{width:`${C}%`}}),d&&s.jsxs("div",{className:"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10",style:{left:`${y}%`},title:`Threshold: ${y}dB`,children:[s.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 bg-red-500 rounded-full"}),s.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]}),X=()=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"Frequency Spectrum"}),s.jsx("div",{className:"flex items-end justify-between space-x-0.5 h-12",children:z.map((V,Q)=>s.jsx("div",{className:`flex-1 ${F(V)} transition-all duration-100 rounded-t`,style:{height:`${V}%`}},Q))})]});return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-purple-500 bg-gray-900 min-w-[280px] max-w-[320px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500",id:"audio-input"}),j&&s.jsxs("div",{className:"bg-gray-950 border-b border-gray-800 p-3",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("div",{className:`text-xs px-2 py-1 rounded ${_?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:_?"🟢 Live Data":"🟡 Demo Mode"}),s.jsx("div",{className:"text-xs text-gray-500",children:T})]}),n==="vu_meter"&&O(),n==="spectrum"&&X(),n==="vu_and_spectrum"&&s.jsxs(s.Fragment,{children:[O(),s.jsx("div",{className:"mt-2",children:X()})]}),(n==="waveform"||n==="spectrogram")&&s.jsxs("div",{className:"text-xs text-center text-gray-500 py-4",children:[n==="waveform"?"〰️ Waveform":"🎨 Spectrogram"," visualization"]})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"📻"}),s.jsx("div",{className:"font-bold text-sm",children:"Audio VU/Frequency"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>k(!j),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle live preview",children:j?"👁️":"👁️‍🗨️"}),s.jsx("button",{onClick:()=>S(!N),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),N&&s.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t border-gray-800",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Display Mode"}),s.jsx("select",{value:n,onChange:V=>{r(V.target.value),M("displayMode",V.target.value)},className:"w-full bg-gray-800 text-sm px-2 py-1 rounded border border-gray-700 focus:border-purple-500 focus:outline-none",children:I.map(V=>s.jsxs("option",{value:V.value,children:[V.icon," ",V.label]},V.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Sensitivity: ",(o*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:o,onChange:V=>{const Q=parseFloat(V.target.value);i(Q),M("sensitivity",Q)},className:"w-full"})]}),(n==="spectrum"||n==="vu_and_spectrum"||n==="spectrogram")&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Frequency Bands: ",l]}),s.jsx("input",{type:"range",min:"4",max:"32",step:"1",value:l,onChange:V=>{const Q=parseInt(V.target.value);a(Q),M("frequencyBands",Q)},className:"w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Color Scheme"}),s.jsx("select",{value:p,onChange:V=>{h(V.target.value),M("colorScheme",V.target.value)},className:"w-full bg-gray-800 text-sm px-2 py-1 rounded border border-gray-700 focus:border-purple-500 focus:outline-none",children:E.map(V=>s.jsx("option",{value:V.value,children:V.label},V.value))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Peak Hold"}),s.jsx("input",{type:"checkbox",checked:c,onChange:V=>{u(V.target.checked),M("peakHold",V.target.checked)},className:"rounded"})]}),s.jsxs("div",{className:"pt-3 border-t border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-xs text-gray-400 font-bold",children:"Threshold Trigger"}),s.jsx("input",{type:"checkbox",checked:d,onChange:V=>{v(V.target.checked),M("enableThreshold",V.target.checked)},className:"rounded"})]}),d&&s.jsxs("div",{className:"space-y-3 mt-2",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Threshold Level: ",y," dB"]}),s.jsx("input",{type:"range",min:"10",max:"100",step:"1",value:y,onChange:V=>{const Q=parseInt(V.target.value);x(Q),M("thresholdLevel",Q)},className:"w-full"}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Trigger when level exceeds ",y," dB"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Trigger Mode"}),s.jsxs("select",{value:b,onChange:V=>{f(V.target.value),M("thresholdMode",V.target.value)},className:"w-full bg-gray-800 text-sm px-2 py-1 rounded border border-gray-700 focus:border-purple-500 focus:outline-none",children:[s.jsx("option",{value:"continuous",children:"Continuous (while above threshold)"}),s.jsx("option",{value:"edge",children:"Edge Trigger (once on crossing)"}),s.jsx("option",{value:"pulse",children:"Pulse (brief trigger on crossing)"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Hysteresis: ",m," dB"]}),s.jsx("input",{type:"range",min:"0",max:"20",step:"1",value:m,onChange:V=>{const Q=parseInt(V.target.value);g(Q),M("hysteresis",Q)},className:"w-full"}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Prevents rapid on/off triggering. Trigger off at ",y-m," dB"]})]}),j&&s.jsx("div",{className:`text-xs p-2 rounded ${A?"bg-red-500/20 text-red-400":"bg-gray-800 text-gray-500"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Trigger Output:"}),s.jsx("span",{className:"font-bold",children:A?"🔴 ACTIVE":"⚪ Inactive"})]})})]})]}),s.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-gray-800",children:[s.jsx("div",{className:"font-bold text-green-400 mb-1",children:"✅ Ready for Live Audio"}),s.jsx("div",{className:"mb-2",children:"Will automatically switch to live mode when:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-gray-600",children:[s.jsx("li",{children:"Workflow is running (click Execute)"}),s.jsx("li",{children:"Backend is processing audio"}),s.jsx("li",{children:"WebSocket connection established"})]}),s.jsxs("div",{className:"mt-2",children:["Shows ",s.jsx("span",{className:"text-yellow-400",children:"demo data"})," when backend is not running."]}),d&&s.jsx("div",{className:"mt-2 text-purple-400",children:"⚡ Trigger output activates downstream nodes when threshold is exceeded."})]})]}),!N&&s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("div",{className:"text-gray-500",children:["Mode: ",(Y=I.find(V=>V.value===n))==null?void 0:Y.label]}),(n==="spectrum"||n==="vu_and_spectrum"||n==="spectrogram")&&s.jsxs("div",{className:"text-gray-500",children:["Bands: ",l]}),s.jsxs("div",{className:"text-gray-500",children:["Sensitivity: ",(o*100).toFixed(0),"%"]}),d&&s.jsxs("div",{className:"text-purple-400 font-bold",children:["⚡ Threshold: ",y," dB (",b,")"]}),s.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Click 👁️ to toggle live preview"})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500",id:"output"}),d&&s.jsx(oe,{type:"source",position:G.Right,className:`w-3 h-3 transition-all ${A?"bg-red-500 animate-pulse":"bg-red-500/50"}`,id:"trigger-output",style:{top:"75%"},title:"Threshold Trigger Output"})]})})}),U2=w.memo(({data:e,id:t})=>{var $;const[n,r]=w.useState(e.detectionMode||"all"),[o,i]=w.useState(e.sensitivity||.5),[l,a]=w.useState(e.irThreshold||.7),[c,u]=w.useState(e.brightnessThreshold||.3),[p,h]=w.useState(e.checkInterval||5),[d,v]=w.useState(e.enableActions!==!1),[y,x]=w.useState(!1),[b,f]=w.useState(!1),[m,g]=w.useState("day"),[N,S]=w.useState(.8),[j,k]=w.useState(!1),[C,P]=w.useState(!1);w.useEffect(()=>{if(!b)return;const T=`${Gt}/api/ws`;let D=null,M=null;console.log(`DayNight node ${t}: Connecting to WebSocket: ${T}`);try{D=new WebSocket(T),D.onopen=()=>{console.log(`DayNight node ${t}: WebSocket connected`),P(!0)},D.onmessage=I=>{try{const E=JSON.parse(I.data);console.log(`DayNight node ${t}: Received message:`,E.type,E.node_id),E.type==="dayNight_update"&&E.node_id===t&&(console.log(`DayNight node ${t}: Processing update:`,E.data),g(E.data.state),S(E.data.brightness),k(E.data.is_ir),P(!0))}catch(E){console.error(`DayNight node ${t}: Error parsing WebSocket message:`,E)}},D.onerror=I=>{console.log(`DayNight node ${t}: WebSocket error, falling back to demo mode`,I),P(!1)},D.onclose=()=>{console.log(`DayNight node ${t}: WebSocket closed`),P(!1)}}catch(I){console.log(`DayNight node ${t}: Failed to connect WebSocket:`,I),P(!1)}return setTimeout(()=>{(!D||D.readyState!==WebSocket.OPEN)&&(M=setInterval(()=>{const I=new Date().getHours(),E=Math.max(0,Math.min(1,(Math.sin((I-6)*Math.PI/12)+1)/2));S(E),E<c?(g("night"),k(Math.random()>.3)):E<.5?(g("dusk"),k(Math.random()>.7)):(g("day"),k(!1))},2e3))},1e3),()=>{D&&D.close(),M&&clearInterval(M)}},[b,t,c]);const z=(T,D)=>{e.onChange&&e.onChange(t,{...e,[T]:D})},L=[{value:"all",label:"Day/Night/IR Detection",icon:"☀️🌙"},{value:"brightness",label:"Brightness Only",icon:"💡"},{value:"ir",label:"IR Mode Only",icon:"🔦"},{value:"time_based",label:"Time-Based (Sunset/Sunrise)",icon:"⏰"}],A=()=>{if(j)return"text-purple-400";switch(m){case"day":return"text-yellow-400";case"dusk":return"text-orange-400";case"night":return"text-blue-400";default:return"text-gray-400"}},R=()=>{if(j)return"🔦";switch(m){case"day":return"☀️";case"dusk":return"🌅";case"night":return"🌙";default:return"❓"}},_=()=>{if(j)return"IR Mode";switch(m){case"day":return"Daytime";case"dusk":return"Dusk/Dawn";case"night":return"Nighttime";default:return"Unknown"}};return s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-yellow-500 bg-gray-900 min-w-[280px] max-w-[320px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-yellow-500",id:"video-input"}),b&&s.jsxs("div",{className:"bg-gray-950 border-b border-gray-800 p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Current Detection"}),s.jsx("div",{className:`text-xs px-2 py-1 rounded ${C?"bg-green-500/20 text-green-400":"bg-yellow-500/20 text-yellow-400"}`,children:C?"🟢 Live":"🟡 Demo"})]}),s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsxs("div",{className:`flex items-center space-x-2 text-lg font-bold ${A()}`,children:[s.jsx("span",{children:R()}),s.jsx("span",{children:_()})]})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Brightness"}),s.jsxs("span",{children:[(N*100).toFixed(0),"%"]})]}),s.jsx("div",{className:"h-2 bg-gray-800 rounded overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 via-yellow-500 to-orange-500 transition-all duration-300",style:{width:`${N*100}%`}})})]}),j&&s.jsxs("div",{className:"mt-2 flex items-center space-x-2 text-xs text-purple-400",children:[s.jsx("span",{className:"w-2 h-2 bg-purple-400 rounded-full animate-pulse"}),s.jsx("span",{children:"Infrared Mode Active"})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2 text-xs",children:[s.jsx("div",{className:`text-center py-1 rounded ${m==="day"?"bg-yellow-500/20 text-yellow-400":"bg-gray-800 text-gray-600"}`,children:"☀️ Day"}),s.jsx("div",{className:`text-center py-1 rounded ${m==="dusk"?"bg-orange-500/20 text-orange-400":"bg-gray-800 text-gray-600"}`,children:"🌅 Dusk"}),s.jsx("div",{className:`text-center py-1 rounded ${m==="night"?"bg-blue-500/20 text-blue-400":"bg-gray-800 text-gray-600"}`,children:"🌙 Night"})]})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🌓"}),s.jsx("div",{className:"font-bold text-sm",children:"Day/Night/IR Detector"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>f(!b),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",title:"Toggle live preview",children:b?"👁️":"👁️‍🗨️"}),s.jsx("button",{onClick:()=>x(!y),className:"text-gray-400 hover:text-white",children:"⚙️"})]})]}),y&&s.jsxs("div",{className:"space-y-3 mt-3 pt-3 border-t border-gray-800",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Detection Mode"}),s.jsx("select",{value:n,onChange:T=>{r(T.target.value),z("detectionMode",T.target.value)},className:"w-full bg-gray-800 text-sm px-2 py-1 rounded border border-gray-700 focus:border-yellow-500 focus:outline-none",children:L.map(T=>s.jsxs("option",{value:T.value,children:[T.icon," ",T.label]},T.value))})]}),(n==="all"||n==="brightness")&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Day/Night Threshold: ",(c*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0.1",max:"0.9",step:"0.05",value:c,onChange:T=>{const D=parseFloat(T.target.value);u(D),z("brightnessThreshold",D)},className:"w-full"}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Below ",(c*100).toFixed(0),"% = Night"]})]}),(n==="all"||n==="ir")&&s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["IR Detection Sensitivity: ",(l*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0.1",max:"0.95",step:"0.05",value:l,onChange:T=>{const D=parseFloat(T.target.value);a(D),z("irThreshold",D)},className:"w-full"}),s.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Detects low color saturation (monochrome IR images)"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Check Interval: ",p,"s"]}),s.jsx("input",{type:"range",min:"1",max:"60",step:"1",value:p,onChange:T=>{const D=parseInt(T.target.value);h(D),z("checkInterval",D)},className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs text-gray-400 mb-1",children:["Overall Sensitivity: ",(o*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.05",value:o,onChange:T=>{const D=parseFloat(T.target.value);i(D),z("sensitivity",D)},className:"w-full"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Trigger Actions on Change"}),s.jsx("input",{type:"checkbox",checked:d,onChange:T=>{v(T.target.checked),z("enableActions",T.target.checked)},className:"rounded"})]}),s.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t border-gray-800",children:[s.jsx("div",{className:"font-bold mb-1",children:"Detection Methods:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Brightness: Analyzes average luminance"}),s.jsx("li",{children:"IR Mode: Detects low color saturation"}),s.jsx("li",{children:"Time-based: Uses sunset/sunrise times"})]}),s.jsx("div",{className:"mt-2",children:"Outputs: state (day/dusk/night), brightness (0-1), is_ir (bool)"})]})]}),!y&&s.jsxs("div",{className:"text-xs space-y-1",children:[s.jsxs("div",{className:"text-gray-500",children:["Mode: ",($=L.find(T=>T.value===n))==null?void 0:$.label]}),s.jsxs("div",{className:"text-gray-500",children:["Check every: ",p,"s"]}),s.jsxs("div",{className:"text-gray-500",children:["Actions: ",d?"Enabled":"Disabled"]}),s.jsx("div",{className:"text-gray-400 text-xs mt-2",children:"Click 👁️ to toggle live preview"})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-yellow-500",id:"output"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500",id:"ir-output",style:{top:"60%"}}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-blue-500",id:"night-output",style:{top:"80%"}})]})}),Y2=({data:e,id:t})=>{var b,f,m,g,N;const[n,r]=w.useState([]),[o,i]=w.useState(e.receiver_id||""),[l,a]=w.useState(0),[c,u]=w.useState(null),[p,h]=w.useState(!1),[d,v]=w.useState(!1);w.useEffect(()=>{const S=async()=>{try{const k=await fetch(`${ce}/api/drone-components/receivers`);if(!k.ok)throw new Error(`HTTP ${k.status}`);const C=await k.json();r(Array.isArray(C)?C:[])}catch(k){console.error("Error fetching receivers:",k),r([])}};S();const j=setInterval(S,1e4);return()=>clearInterval(j)},[]),w.useEffect(()=>{let S=null;try{S=new WebSocket(`${Gt}/api/ws`),S.onopen=()=>{h(!0);try{S.send(JSON.stringify({type:"subscribe",topics:["drone_detection","drone_detections"]}))}catch(j){console.error("Error sending subscribe message:",j)}},S.onmessage=j=>{var k;try{const C=JSON.parse(j.data);C.type==="drone_detection"&&(!o||((k=C.data)==null?void 0:k.receiver_id)===o)&&(a(P=>P+1),u(new Date))}catch(C){console.error("Error processing drone detection:",C)}},S.onerror=j=>{console.error("WebSocket error:",j),h(!1)},S.onclose=()=>{h(!1)}}catch(j){console.error("Error creating WebSocket:",j),h(!1)}return()=>{if(S)try{(S.readyState===WebSocket.OPEN||S.readyState===WebSocket.CONNECTING)&&S.close()}catch(j){console.error("Error closing WebSocket:",j)}}},[o]);const y=S=>{try{const j=S.target.value;i(j),e.onChange&&e.onChange({config:{...e.config||{},receiver_id:j}})}catch(j){console.error("Error changing receiver:",j)}},x=Array.isArray(n)?n.find(S=>(S==null?void 0:S.id)===o):null;return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"bg-gray-800 border-2 border-orange-500 rounded-lg shadow-lg min-w-[280px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-orange-600 to-orange-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🛸"}),s.jsx("span",{className:"font-semibold text-white",children:"Drone Input"})]}),s.jsx("button",{onClick:()=>v(!d),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Receiver"}),s.jsxs("select",{value:o,onChange:y,className:"w-full bg-gray-700 text-white px-2 py-1 rounded text-sm border border-gray-600 focus:border-orange-500 focus:outline-none",children:[s.jsx("option",{value:"",children:"All Receivers"}),Array.isArray(n)&&n.map(S=>s.jsxs("option",{value:S.id,children:[S.name," ",S.connected?"🟢":"🔴"]},S.id))]})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Status:"}),s.jsx("span",{className:p?"text-green-400":"text-red-400",children:p?"Connected":"Disconnected"})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Detections:"}),s.jsx("span",{className:"text-white font-mono",children:l})]}),c&&s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Last Update:"}),s.jsx("span",{className:"text-white text-xs",children:c.toLocaleTimeString()})]})]}),x&&s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold mb-1",children:"Receiver Info"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Port:"}),s.jsx("span",{className:"text-white",children:x.port})]}),x.location&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Lat:"}),s.jsx("span",{className:"text-white font-mono",children:(b=x.location.latitude)==null?void 0:b.toFixed(6)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Lon:"}),s.jsx("span",{className:"text-white font-mono",children:(f=x.location.longitude)==null?void 0:f.toFixed(6)})]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Total:"}),s.jsx("span",{className:"text-white",children:((m=x.stats)==null?void 0:m.detection_count)||0})]})]}),d&&s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-2 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Configuration"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Min RSSI (dBm)"}),s.jsx("input",{type:"number",defaultValue:((g=e.config||e)==null?void 0:g.min_rssi)??-100,onChange:S=>{var j;try{const k=parseInt(S.target.value);isNaN(k)||(j=e.onChange)==null||j.call(e,{config:{...e.config||{},min_rssi:k}})}catch(k){console.error("Error updating min_rssi:",k)}},className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"-120",max:"-20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Update Rate (Hz)"}),s.jsx("input",{type:"number",defaultValue:((N=e.config||e)==null?void 0:N.update_rate)??1,onChange:S=>{var j;try{const k=parseFloat(S.target.value);isNaN(k)||(j=e.onChange)==null||j.call(e,{config:{...e.config||{},update_rate:k}})}catch(k){console.error("Error updating update_rate:",k)}},className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0.1",max:"10",step:"0.1"})]})]})]}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-orange-500 border-2 border-white"})]})})},X2=w.memo(Y2),Q2=({data:e,id:t})=>{const[n,r]=w.useState([]),[o,i]=w.useState(!1),[l,a]=w.useState(0),[c,u]=w.useState(0);w.useEffect(()=>{(async()=>{try{const g=await(await fetch("/api/drone-components/geofences")).json();r(g.geofences||[])}catch(m){console.error("Error fetching geofences:",m)}})()},[]);const p=e.config||e||{},h=p.altitude_min??0,d=p.altitude_max??1e4,v=p.speed_min??0,y=p.speed_max??300,x=p.geofence_ids||[],b=(f,m)=>{e.onChange&&e.onChange({config:{...p,[f]:m}})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"bg-gray-800 border-2 border-yellow-500 rounded-lg shadow-lg min-w-[280px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"📐"}),s.jsx("span",{className:"font-semibold text-white",children:"Drone Filter"})]}),s.jsx("button",{onClick:()=>i(!o),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold mb-1",children:"Active Filters"}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Altitude:"}),s.jsxs("span",{className:"text-white font-mono",children:[h,"-",d,"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Speed:"}),s.jsxs("span",{className:"text-white font-mono",children:[v,"-",y," m/s"]})]}),x.length>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Geofences:"}),s.jsxs("span",{className:"text-white",children:[x.length," selected"]})]})]}),s.jsx("div",{className:"bg-gray-700 rounded p-2",children:s.jsxs("div",{className:"text-xs text-center",children:[s.jsx("span",{className:"text-green-400 font-bold text-lg",children:l}),s.jsx("span",{className:"text-gray-400",children:" of "}),s.jsx("span",{className:"text-gray-300",children:c}),s.jsx("div",{className:"text-gray-400 mt-1",children:"drones match filters"})]})}),o&&s.jsxs("div",{className:"bg-gray-700 rounded p-3 space-y-3 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Filter Configuration"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Altitude Range (m)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"Min",value:h,onChange:f=>b("altitude_min",parseFloat(f.target.value)),className:"w-1/2 bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0",max:"10000"}),s.jsx("input",{type:"number",placeholder:"Max",value:d,onChange:f=>b("altitude_max",parseFloat(f.target.value)),className:"w-1/2 bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0",max:"10000"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Speed Range (m/s)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"Min",value:v,onChange:f=>b("speed_min",parseFloat(f.target.value)),className:"w-1/2 bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0",max:"300"}),s.jsx("input",{type:"number",placeholder:"Max",value:y,onChange:f=>b("speed_max",parseFloat(f.target.value)),className:"w-1/2 bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0",max:"300"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Geofence Zones"}),s.jsx("select",{multiple:!0,value:x,onChange:f=>{const m=Array.from(f.target.selectedOptions,g=>g.value);b("geofence_ids",m)},className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",size:"4",children:n.map(f=>s.jsxs("option",{value:f.id,children:[f.name," (",f.restriction_type,")"]},f.id))}),s.jsx("div",{className:"text-gray-500 text-xs mt-1",children:"Hold Ctrl/Cmd to select multiple"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Filter Mode"}),s.jsxs("select",{value:p.filter_mode||"pass_matching",onChange:f=>b("filter_mode",f.target.value),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",children:[s.jsx("option",{value:"pass_matching",children:"Pass Matching Criteria"}),s.jsx("option",{value:"pass_violations",children:"Pass Violations Only"})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Min RSSI (dBm)"}),s.jsx("input",{type:"number",value:p.rssi_min||-100,onChange:f=>b("rssi_min",parseInt(f.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"-120",max:"-20"})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-gray-400",children:"Max Operator Distance (m)"}),s.jsx("input",{type:"number",value:p.operator_distance_max||"",onChange:f=>b("operator_distance_max",parseFloat(f.target.value)),placeholder:"No limit",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0"})]})]})]}),s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-yellow-500 border-2 border-white"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-yellow-500 border-2 border-white"})]})})},G2=w.memo(Q2),K2=({data:e,id:t})=>{const[n,r]=w.useState({}),[o,i]=w.useState(!1),[l,a]=w.useState(!1),c=e.config||e||{},u=c.center_lat??37.422,p=c.center_lon??-122.084,h=c.initial_zoom??13,d=c.show_geofences!==!1,v=c.show_operators!==!1;w.useEffect(()=>{let b=null;try{b=new WebSocket(`${Gt}/api/ws`),b.onopen=()=>{b.send(JSON.stringify({type:"subscribe",topics:["drone_detection","drone_detections"]}))},b.onmessage=f=>{try{const m=JSON.parse(f.data);if(m.type==="drone_detection"){const g=m.data,N=g==null?void 0:g.remote_id;N&&r(S=>{const j={...S};return j[N]={...g,timestamp:new Date(m.timestamp)},j})}}catch(m){console.error("Error processing drone message:",m)}},b.onerror=f=>{console.error("WebSocket error:",f)},b.onclose=()=>{console.log("WebSocket connection closed")}}catch(f){console.error("Error creating WebSocket:",f)}return()=>{b&&b.readyState===WebSocket.OPEN&&b.close()}},[]),w.useEffect(()=>{const b=setInterval(()=>{const f=new Date;r(m=>{const g={...m};return Object.keys(g).forEach(N=>{const S=g[N];S!=null&&S.timestamp?f-S.timestamp>3e5&&delete g[N]:delete g[N]}),g})},6e4);return()=>clearInterval(b)},[]);const y=b=>{var f,m;return((f=b.geofence_violations)==null?void 0:f.length)>0?"text-red-500":((m=b.position)==null?void 0:m.altitude)>120?"text-yellow-500":"text-green-500"},x=l?"w-[600px] h-[400px]":"w-full h-[200px]";return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:`bg-gray-800 border-2 border-blue-500 rounded-lg shadow-lg ${l?"min-w-[620px]":"min-w-[320px]"}`,children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🗺️"}),s.jsx("span",{className:"font-semibold text-white",children:"Drone Map"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>a(!l),className:"text-white hover:text-gray-200 transition-colors",title:l?"Collapse":"Expand",children:l?"⬇️":"⬆️"}),s.jsx("button",{onClick:()=>i(!o),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]})]}),s.jsxs("div",{className:`${x} bg-gray-700 relative flex items-center justify-center`,children:[s.jsxs("div",{className:"text-center text-gray-400",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🗺️"}),s.jsx("div",{className:"text-sm",children:"Map Visualization"}),s.jsxs("div",{className:"text-xs mt-1",children:["Center: ",u.toFixed(4),", ",p.toFixed(4)]}),s.jsxs("div",{className:"text-xs",children:["Zoom: ",h]})]}),s.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs",children:["🛸 ",Object.keys(n).length," active"]})]}),s.jsxs("div",{className:"p-3 bg-gray-700 max-h-32 overflow-y-auto",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1 font-semibold",children:"Active Drones:"}),Object.keys(n).length===0?s.jsx("div",{className:"text-xs text-gray-500 text-center py-2",children:"No drones detected"}):s.jsx("div",{className:"space-y-1",children:Object.entries(n).map(([b,f])=>{var m,g,N,S;return s.jsxs("div",{className:"bg-gray-600 rounded px-2 py-1 text-xs flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`${y(f)} font-bold`,children:"●"}),s.jsx("span",{className:"text-white font-mono",children:b.substring(0,12)})]}),s.jsxs("div",{className:"text-gray-300",children:[(g=(m=f.position)==null?void 0:m.altitude)==null?void 0:g.toFixed(0),"m @ ",(S=(N=f.velocity)==null?void 0:N.speed)==null?void 0:S.toFixed(1),"m/s"]})]},b)})})]}),o&&s.jsxs("div",{className:"p-3 bg-gray-700 border-t border-gray-600 space-y-2 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Map Configuration"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Center Lat"}),s.jsx("input",{type:"number",value:u,onChange:b=>{var f;return(f=e.onChange)==null?void 0:f.call(e,{config:{...c,center_lat:parseFloat(b.target.value)}})},className:"w-full bg-gray-600 text-white px-2 py-1 rounded text-xs",step:"0.001"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Center Lon"}),s.jsx("input",{type:"number",value:p,onChange:b=>{var f;return(f=e.onChange)==null?void 0:f.call(e,{config:{...c,center_lon:parseFloat(b.target.value)}})},className:"w-full bg-gray-600 text-white px-2 py-1 rounded text-xs",step:"0.001"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Zoom Level"}),s.jsx("input",{type:"number",value:h,onChange:b=>{var f;return(f=e.onChange)==null?void 0:f.call(e,{config:{...c,initial_zoom:parseInt(b.target.value)}})},className:"w-full bg-gray-600 text-white px-2 py-1 rounded text-xs",min:"1",max:"20"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("label",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:d,onChange:b=>{var f;return(f=e.onChange)==null?void 0:f.call(e,{config:{...c,show_geofences:b.target.checked}})}}),s.jsx("span",{className:"text-gray-300",children:"Show Geofences"})]}),s.jsxs("label",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"checkbox",checked:v,onChange:b=>{var f;return(f=e.onChange)==null?void 0:f.call(e,{config:{...c,show_operators:b.target.checked}})}}),s.jsx("span",{className:"text-gray-300",children:"Show Operators"})]})]}),s.jsx("div",{className:"text-xs text-gray-500 italic mt-2",children:"Note: Full map visualization with Leaflet will be enabled when backend is running"})]}),s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-blue-500 border-2 border-white"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-blue-500 border-2 border-white"})]})})},Z2=w.memo(K2),Pl=[{value:"alarm",label:"Create Alarm",icon:"🚨"},{value:"notify_authorities",label:"Notify Authorities",icon:"📞"},{value:"camera_slew",label:"Camera Slew",icon:"📹"},{value:"log_flight",label:"Log Flight",icon:"📝"},{value:"geofence_alert",label:"Geofence Alert",icon:"⚠️"},{value:"operator_notification",label:"Operator Notification",icon:"📧"}],q2=({data:e,id:t})=>{var v,y,x;const[n,r]=w.useState(!1),[o,i]=w.useState(0),[l,a]=w.useState(null),c=e.config||e||{},u=c.action_type||"alarm",p=Pl.find(b=>b.value===u)||Pl[0],h=(b,f)=>{e.onChange&&e.onChange({config:{...c,[b]:f}})},d=(b,f,m)=>{const g=c[b]||{};e.onChange&&e.onChange({config:{...c,[b]:{...g,[f]:m}}})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"bg-gray-800 border-2 border-red-500 rounded-lg shadow-lg min-w-[280px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-orange-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:p.icon}),s.jsx("span",{className:"font-semibold text-white",children:"Drone Action"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Action Type"}),s.jsx("select",{value:u,onChange:b=>h("action_type",b.target.value),className:"w-full bg-gray-700 text-white px-2 py-1 rounded text-sm border border-gray-600 focus:border-red-500 focus:outline-none",children:Pl.map(b=>s.jsxs("option",{value:b.value,children:[b.icon," ",b.label]},b.value))})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Triggers:"}),s.jsx("span",{className:"text-white font-mono",children:o})]}),l&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Last:"}),s.jsx("span",{className:"text-white text-xs",children:l.toLocaleTimeString()})]})]}),n&&s.jsxs("div",{className:"bg-gray-700 rounded p-3 space-y-3 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Action Configuration"}),u==="alarm"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Severity"}),s.jsxs("select",{value:c.alarm_severity||"high",onChange:b=>h("alarm_severity",b.target.value),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",children:[s.jsx("option",{value:"low",children:"Low"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"critical",children:"Critical"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Alarm Title"}),s.jsx("input",{type:"text",value:c.alarm_title||"Drone Detection Alert",onChange:b=>h("alarm_title",b.target.value),placeholder:"Use {remote_id}, {altitude}, {speed}",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500"}),s.jsxs("div",{className:"text-gray-500 mt-1",children:["Variables: ","{remote_id}",", ","{altitude}",", ","{speed}"]})]})]}),u==="notify_authorities"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Agency"}),s.jsx("input",{type:"text",value:((v=c.authority_contact)==null?void 0:v.agency)||"",onChange:b=>d("authority_contact","agency",b.target.value),placeholder:"FAA, Law Enforcement, etc.",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:((y=c.authority_contact)==null?void 0:y.email)||"",onChange:b=>d("authority_contact","email",b.target.value),placeholder:"authority@example.com",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:((x=c.authority_contact)==null?void 0:x.phone)||"",onChange:b=>d("authority_contact","phone",b.target.value),placeholder:"+1-555-0100",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500"})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:c.include_flight_path!==!1,onChange:b=>h("include_flight_path",b.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Include Flight Path"})]})})]}),u==="camera_slew"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Camera ID"}),s.jsx("input",{type:"text",value:c.camera_id||"",onChange:b=>h("camera_id",b.target.value),placeholder:"ptz-camera-01",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500"}),s.jsx("div",{className:"text-gray-500 mt-1",children:"PTZ camera to slew to drone coordinates"})]}),u==="log_flight"&&s.jsx("div",{children:s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:c.include_flight_path!==!1,onChange:b=>h("include_flight_path",b.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Include Complete Flight Path"})]})}),u==="geofence_alert"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Enforcement Level"}),s.jsxs("select",{value:c.enforcement_level||"warning",onChange:b=>h("enforcement_level",b.target.value),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",children:[s.jsx("option",{value:"log_only",children:"Log Only"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"critical",children:"Critical"})]})]}),u==="operator_notification"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Notification Template"}),s.jsx("textarea",{value:c.notification_template||"",onChange:b=>h("notification_template",b.target.value),placeholder:"Message template...",className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",rows:"3"}),s.jsx("div",{className:"text-gray-500 mt-1",children:"Attempt contact via Remote ID broadcast"})]})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 text-xs text-gray-300",children:[u==="alarm"&&"🚨 Creates high-priority alarm in alarm management system",u==="notify_authorities"&&"📞 Sends automated report to configured authorities",u==="camera_slew"&&"📹 Commands PTZ camera to track drone position",u==="log_flight"&&"📝 Records complete flight path to database",u==="geofence_alert"&&"⚠️ Triggers specific alert for airspace violations",u==="operator_notification"&&"📧 Attempts to contact drone operator"]})]}),s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-red-500 border-2 border-white"})]})})},J2=w.memo(q2),ek=({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState({totalDrones:0,uniqueDrones:0,violations:0,complianceRate:100,avgAltitude:0,avgSpeed:0}),l=e.config||e||{},a=l.time_window??3600,c=l.enable_hotspot_detection!==!1,u=l.enable_pattern_analysis!==!1,p=l.enable_compliance_scoring!==!1,h=l.enable_temporal_analysis!==!1;w.useEffect(()=>{const v=setInterval(()=>{i(y=>({...y,totalDrones:y.totalDrones+Math.floor(Math.random()*2),uniqueDrones:Math.floor(y.totalDrones*.7),violations:y.violations+(Math.random()>.9?1:0),complianceRate:((y.totalDrones-y.violations)/Math.max(y.totalDrones,1)*100).toFixed(1),avgAltitude:(Math.random()*200+50).toFixed(1),avgSpeed:(Math.random()*15+5).toFixed(1)}))},5e3);return()=>clearInterval(v)},[]);const d=(v,y)=>{e.onChange&&e.onChange({config:{...l,[v]:y}})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"bg-gray-800 border-2 border-purple-500 rounded-lg shadow-lg min-w-[300px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-purple-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"📊"}),s.jsx("span",{className:"font-semibold text-white",children:"Drone Analytics"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"bg-gray-700 rounded p-2 text-center",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Analysis Window"}),s.jsx("div",{className:"text-white font-bold",children:a>=3600?`${(a/3600).toFixed(1)}h`:`${a/60}m`})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Total Detections"}),s.jsx("div",{className:"text-xl font-bold text-white",children:o.totalDrones})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Unique Drones"}),s.jsx("div",{className:"text-xl font-bold text-white",children:o.uniqueDrones})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Violations"}),s.jsx("div",{className:"text-xl font-bold text-red-400",children:o.violations})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Compliance"}),s.jsxs("div",{className:"text-xl font-bold text-green-400",children:[o.complianceRate,"%"]})]})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Avg Altitude:"}),s.jsxs("span",{className:"text-white font-mono",children:[o.avgAltitude,"m"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Avg Speed:"}),s.jsxs("span",{className:"text-white font-mono",children:[o.avgSpeed," m/s"]})]})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold mb-1",children:"Active Analysis"}),c&&s.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[s.jsx("span",{children:"✓"}),s.jsx("span",{children:"Hotspot Detection"})]}),u&&s.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[s.jsx("span",{children:"✓"}),s.jsx("span",{children:"Pattern Analysis"})]}),p&&s.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[s.jsx("span",{children:"✓"}),s.jsx("span",{children:"Compliance Scoring"})]}),h&&s.jsxs("div",{className:"flex items-center gap-1 text-green-400",children:[s.jsx("span",{children:"✓"}),s.jsx("span",{children:"Temporal Analysis"})]})]}),n&&s.jsxs("div",{className:"bg-gray-700 rounded p-3 space-y-3 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Analytics Configuration"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Time Window (seconds)"}),s.jsx("input",{type:"number",value:a,onChange:v=>d("time_window",parseInt(v.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"60",max:"604800"}),s.jsx("div",{className:"text-gray-500 mt-1",children:a>=3600?`${(a/3600).toFixed(1)} hours`:`${a/60} minutes`})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Aggregation Interval (seconds)"}),s.jsx("input",{type:"number",value:l.aggregation_interval||300,onChange:v=>d("aggregation_interval",parseInt(v.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"60",max:"86400"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Analysis Features"}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:v=>d("enable_hotspot_detection",v.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Hotspot Detection"})]}),c&&s.jsxs("div",{className:"ml-6",children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Hotspot Radius (m)"}),s.jsx("input",{type:"number",value:l.hotspot_radius||100,onChange:v=>d("hotspot_radius",parseFloat(v.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded",min:"10",max:"10000"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:u,onChange:v=>d("enable_pattern_analysis",v.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Pattern Analysis"})]}),u&&s.jsxs("div",{className:"ml-6",children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Min Detections for Pattern"}),s.jsx("input",{type:"number",value:l.min_detections_for_pattern||5,onChange:v=>d("min_detections_for_pattern",parseInt(v.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded",min:"3",max:"100"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:v=>d("enable_compliance_scoring",v.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Compliance Scoring"})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:h,onChange:v=>d("enable_temporal_analysis",v.target.checked)}),s.jsx("span",{className:"text-gray-300",children:"Temporal Analysis"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Violation Rate Threshold"}),s.jsx("input",{type:"number",value:l.violation_threshold||.1,onChange:v=>d("violation_threshold",parseFloat(v.target.value)),className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500",min:"0",max:"1",step:"0.01"}),s.jsxs("div",{className:"text-gray-500 mt-1",children:["Alert if violations exceed ",((l.violation_threshold||.1)*100).toFixed(0),"%"]})]})]})]}),s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-purple-500 border-2 border-white"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-purple-500 border-2 border-white"})]})})},tk=w.memo(ek),nk=({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState(!1),[l,a]=w.useState([]),[c,u]=w.useState(e.dwellTime||30),[p,h]=w.useState(e.restrictionType||"double_yellow"),[d,v]=w.useState(e.checkPlates!==!1),[y,x]=w.useState(e.timeRestricted||!1),[b,f]=w.useState(e.startHour||8),[m,g]=w.useState(e.endHour||18),[N,S]=w.useState(e.parkingZones||[]),[j,k]=w.useState(0),[C,P]=w.useState(null),[z,L]=w.useState(!1),[A,R]=w.useState([]),[_,$]=w.useState(null),T=w.useRef(null),{getEdges:D,getNodes:M}=$t(),I=e.config||e||{},E=[{value:"double_yellow",label:"Double Yellow Lines",icon:"🟡",color:"yellow"},{value:"no_parking",label:"No Parking Zone",icon:"🚫",color:"red"},{value:"restricted_zone",label:"Restricted Zone",icon:"⚠️",color:"orange"},{value:"loading_only",label:"Loading Bay Only",icon:"📦",color:"blue"},{value:"disabled_only",label:"Disabled Parking Only",icon:"♿",color:"blue"},{value:"time_restricted",label:"Time Restricted",icon:"⏰",color:"purple"}];E.find(W=>W.value===p)||E[0];const F=()=>{const W=D(),U=M(),Z=(q,se=new Set)=>{var ee;if(se.has(q))return null;se.add(q);const le=U.find(ne=>ne.id===q);if(!le)return null;if(le.type==="camera")return(ee=le.data)==null?void 0:ee.cameraId;const ie=W.filter(ne=>ne.target===q);for(const ne of ie){const fe=Z(ne.source,se);if(fe)return fe}return null};return Z(t)},O=async()=>{const W=F();if(!W){console.log("No camera connected");return}try{const U=await fetch(`${ce}/api/snapshots/${W}/latest`);if(U.ok){const Z=await U.blob(),q=URL.createObjectURL(Z);P(q)}else{const Z=`${ce}/api/video/${W}/mjpeg`;P(Z)}}catch(U){console.error("Error fetching camera frame:",U)}};w.useEffect(()=>{o&&!C&&O()},[o]),w.useEffect(()=>{if(!T.current||!C)return;const W=T.current,U=W.getContext("2d"),Z=new Image;Z.onload=()=>{W.width=Z.width,W.height=Z.height,U.drawImage(Z,0,0),N.forEach((q,se)=>{X(U,q,se===_)}),A.length>0&&(U.strokeStyle="#fbbf24",U.lineWidth=3,U.beginPath(),U.moveTo(A[0].x,A[0].y),A.forEach(q=>{U.lineTo(q.x,q.y)}),U.stroke(),A.forEach(q=>{U.fillStyle="#fbbf24",U.beginPath(),U.arc(q.x,q.y,5,0,Math.PI*2),U.fill()}))},Z.src=C},[C,N,A,_]);const X=(W,U,Z)=>{const se={double_yellow:"#eab308",no_parking:"#ef4444",restricted_zone:"#f97316",loading_only:"#3b82f6",disabled_only:"#3b82f6",time_restricted:"#a855f7"}[U.type]||"#eab308";W.strokeStyle=Z?"#ffffff":se,W.fillStyle=Z?`${se}40`:`${se}20`,W.lineWidth=Z?4:2,W.beginPath(),W.moveTo(U.polygon[0].x,U.polygon[0].y),U.polygon.forEach(ee=>{W.lineTo(ee.x,ee.y)}),W.closePath(),W.fill(),W.stroke();const le=U.polygon.reduce((ee,ne)=>ee+ne.x,0)/U.polygon.length,ie=U.polygon.reduce((ee,ne)=>ee+ne.y,0)/U.polygon.length;W.fillStyle="#ffffff",W.font="12px sans-serif",W.fillText(U.name||U.type,le-30,ie)},Y=W=>{if(!T.current)return;const U=T.current,Z=U.getBoundingClientRect(),q=U.width/Z.width,se=U.height/Z.height,le=W.clientX-Z.left,ie=W.clientY-Z.top,ee=le*q,ne=ie*se;console.log("Click:",{displayX:le,displayY:ie,x:ee,y:ne,scaleX:q,scaleY:se,canvasSize:[U.width,U.height],displaySize:[Z.width,Z.height]}),R(fe=>[...fe,{x:ee,y:ne}])},V=()=>{if(A.length<3){alert("Need at least 3 points to create a zone");return}const W={id:`zone_${Date.now()}`,name:`Zone ${N.length+1}`,type:p,polygon:A,dwellTime:c,timeRestricted:y,startHour:b,endHour:m},U=[...N,W];S(U),R([]),e.onChange&&e.onChange({config:{...I,parkingZones:U}})},Q=()=>{R([])},H=W=>{const U=N.filter((Z,q)=>q!==W);S(U),$(null),e.onChange&&e.onChange({config:{...I,parkingZones:U}})},B=(W,U)=>{e.onChange&&e.onChange({config:{...I,[W]:U}})},J=()=>{if(!y)return!0;const U=new Date().getHours();return U>=b&&U<m};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"bg-gray-800 border-2 border-amber-500 rounded-lg shadow-lg min-w-[300px] max-w-[800px]",children:[s.jsxs("div",{className:"bg-gradient-to-r from-amber-600 to-orange-500 px-4 py-2 rounded-t-lg flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"🚗"}),s.jsx("span",{className:"font-semibold text-white",children:"Parking Violation"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i(!o),className:`px-3 py-1 rounded text-sm font-medium transition-colors ${o?"bg-white text-amber-600":"bg-amber-700 text-white hover:bg-amber-800"}`,title:"Zone Editor",children:["📐 Zones (",N.length,")"]}),s.jsx("button",{onClick:()=>r(!n),className:"text-white hover:text-gray-200 transition-colors",children:"⚙️"})]})]}),o&&s.jsxs("div",{className:"p-4 bg-gray-900 border-b border-gray-700",children:[s.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-white",children:"Zone Editor"}),s.jsx("button",{onClick:O,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs text-white",children:"🔄 Refresh Frame"})]}),C?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"relative bg-black rounded border border-gray-700 overflow-auto max-h-[400px]",children:[s.jsx("canvas",{ref:T,onClick:Y,className:"cursor-crosshair max-w-full",style:{maxWidth:"100%",height:"auto"}}),A.length>0&&A.length<3&&s.jsxs("div",{className:"absolute top-2 left-2 bg-black/80 text-yellow-400 px-3 py-2 rounded text-xs",children:["Click ",3-A.length," more point(s) to create zone"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:V,disabled:A.length<3,className:`flex-1 px-3 py-2 rounded text-sm font-medium ${A.length>=3?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:["✓ Finish Zone (",A.length," pts)"]}),s.jsx("button",{onClick:Q,disabled:A.length===0,className:`px-3 py-2 rounded text-sm ${A.length>0?"bg-red-600 hover:bg-red-700 text-white":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,children:"✕ Clear"})]}),A.length>0&&s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Zone Type"}),s.jsx("select",{value:p,onChange:W=>h(W.target.value),className:"w-full bg-gray-600 text-white px-2 py-1 rounded text-sm",children:E.map(W=>s.jsxs("option",{value:W.value,children:[W.icon," ",W.label]},W.value))})]}),N.length>0&&s.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[s.jsxs("div",{className:"text-xs text-gray-400 font-semibold mb-2",children:["Defined Zones (",N.length,")"]}),s.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:N.map((W,U)=>{var Z;return s.jsxs("div",{className:`flex items-center justify-between p-2 rounded text-xs cursor-pointer ${_===U?"bg-amber-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-750"}`,onClick:()=>$(U===_?null:U),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:(Z=E.find(q=>q.value===W.type))==null?void 0:Z.icon}),s.jsx("span",{className:"font-medium",children:W.name}),s.jsxs("span",{className:"text-gray-500",children:["(",W.polygon.length," pts)"]})]}),s.jsx("button",{onClick:q=>{q.stopPropagation(),H(U)},className:"px-2 py-1 bg-red-600 hover:bg-red-700 rounded text-white",children:"🗑️"})]},W.id)})})]})]}):s.jsxs("div",{className:"bg-gray-700 rounded p-4 text-center",children:[s.jsx("div",{className:"text-gray-400 mb-2",children:"📷 No camera frame available"}),s.jsx("div",{className:"text-xs text-gray-500 mb-3",children:F()?"Click refresh to load camera frame":"Connect a camera node to draw zones"}),!F()&&s.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/20 rounded p-2",children:"⚠️ No camera connected to this node"})]})]}),s.jsxs("div",{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Defined Zones:"}),s.jsx("span",{className:"text-white font-bold",children:N.length})]}),N.length===0&&s.jsx("div",{className:"text-xs text-yellow-400 mt-2",children:'⚠️ Click "Zones" to define restricted areas'})]}),s.jsxs("div",{className:"bg-gray-700 rounded p-2 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Violations Today:"}),s.jsx("span",{className:"text-red-400 font-bold",children:j})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Dwell Threshold:"}),s.jsxs("span",{className:"text-white",children:[c,"s"]})]}),y&&s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400",children:"Active Hours:"}),s.jsxs("span",{className:J()?"text-green-400":"text-gray-500",children:[b,":00 - ",m,":00",J()?" ✓":" (outside)"]})]})]}),l.length>0&&s.jsxs("div",{className:"bg-gray-700 rounded p-2",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-1",children:"Recent Violations"}),s.jsx("div",{className:"space-y-1 max-h-24 overflow-y-auto",children:l.slice(0,5).map((W,U)=>s.jsx("div",{className:"text-xs bg-red-900/20 border border-red-900/50 rounded px-2 py-1",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-red-400 font-mono",children:W.plate||"Unknown"}),s.jsxs("span",{className:"text-gray-400",children:[W.duration,"s"]})]})},U))})]}),n&&s.jsxs("div",{className:"bg-gray-700 rounded p-3 space-y-3 text-xs",children:[s.jsx("div",{className:"text-gray-400 font-semibold",children:"Detection Settings"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-gray-400 mb-1",children:["Dwell Time Threshold: ",c,"s"]}),s.jsx("input",{type:"range",value:c,onChange:W=>{const U=parseInt(W.target.value);u(U),B("dwellTime",U)},className:"w-full",min:"5",max:"300",step:"5"}),s.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:["Vehicle must be stationary for ",c,"s to trigger"]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-600",children:[s.jsx("label",{className:"text-gray-400",children:"Check License Plates"}),s.jsx("input",{type:"checkbox",checked:d,onChange:W=>{v(W.target.checked),B("checkPlates",W.target.checked)},className:"rounded"})]}),d&&s.jsx("div",{className:"text-xs text-blue-400 bg-blue-900/20 rounded p-2",children:"💡 Requires ALPR/OCR model in workflow"}),s.jsxs("div",{className:"pt-2 border-t border-gray-600",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-gray-400 font-semibold",children:"Time Restrictions"}),s.jsx("input",{type:"checkbox",checked:y,onChange:W=>{x(W.target.checked),B("timeRestricted",W.target.checked)},className:"rounded"})]}),y&&s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"Start"}),s.jsx("input",{type:"number",value:b,onChange:W=>{const U=parseInt(W.target.value);f(U),B("startHour",U)},className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500 text-sm",min:"0",max:"23"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-gray-400 mb-1",children:"End"}),s.jsx("input",{type:"number",value:m,onChange:W=>{const U=parseInt(W.target.value);g(U),B("endHour",U)},className:"w-full bg-gray-600 text-white px-2 py-1 rounded border border-gray-500 text-sm",min:"0",max:"23"})]})]})]}),s.jsxs("div",{className:"pt-2 border-t border-gray-600",children:[s.jsx("label",{className:"block text-gray-400 mb-2 font-semibold",children:"On Violation"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("label",{className:"flex items-center gap-2 text-gray-300",children:[s.jsx("input",{type:"checkbox",checked:I.createAlarm!==!1,onChange:W=>B("createAlarm",W.target.checked),className:"rounded"}),s.jsx("span",{children:"Create Alarm"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-gray-300",children:[s.jsx("input",{type:"checkbox",checked:I.captureSnapshot!==!1,onChange:W=>B("captureSnapshot",W.target.checked),className:"rounded"}),s.jsx("span",{children:"Capture Snapshot"})]}),s.jsxs("label",{className:"flex items-center gap-2 text-gray-300",children:[s.jsx("input",{type:"checkbox",checked:I.notifyAuthorities,onChange:W=>B("notifyAuthorities",W.target.checked),className:"rounded"}),s.jsx("span",{children:"Notify Authorities"})]})]})]})]}),!n&&s.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[s.jsxs("div",{children:["✓ Tracking vehicle dwell times (",c,"s)"]}),N.map((W,U)=>{var Z;return s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:(Z=E.find(q=>q.value===W.type))==null?void 0:Z.icon}),s.jsx("span",{children:W.name})]},W.id)}),d&&s.jsx("div",{children:"✓ License plate recognition enabled"}),y&&s.jsxs("div",{children:["⏰ Active ",b,":00-",m,":00",!J()&&s.jsx("span",{className:"text-gray-600",children:" (inactive)"})]})]}),!n&&!o&&N.length===0&&s.jsx("div",{className:"text-xs text-yellow-400 bg-yellow-900/20 rounded p-2",children:'💡 Click "Zones" button to draw restricted parking areas on camera view'})]}),s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-amber-500 border-2 border-white",title:"Vehicle detections input"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-red-500 border-2 border-white",title:"Violations output"})]})})},rk=w.memo(nk),sk=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush"],ok=w.memo(({data:e,id:t})=>{const{setNodes:n}=$t(),[r,o]=w.useState(!1),[i,l]=w.useState(e.filterMode||"count"),[a,c]=w.useState(e.minDetections??1),[u,p]=w.useState(e.maxDetections??999),[h,d]=w.useState(e.selectedClasses||[]),[v,y]=w.useState(e.classMode||"include"),[x,b]=w.useState(e.minConfidence??.25),[f,m]=w.useState(e.onlyWhenDetections??!0),[g,N]=w.useState({total:0,passed:0,filtered:0});w.useEffect(()=>{n(k=>k.map(C=>C.id===t?{...C,data:{...C.data,filterMode:i,minDetections:a,maxDetections:u,selectedClasses:h,classMode:v,minConfidence:x,onlyWhenDetections:f}}:C))},[i,a,u,h,v,x,f,t,n]);const S=k=>{d(C=>C.includes(k)?C.filter(P=>P!==k):[...C,k])},j=()=>{N({total:0,passed:0,filtered:0})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border-2 border-yellow-500 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsx(oe,{type:"target",position:G.Left,className:"w-3 h-3 bg-yellow-500",id:"detections-input"}),s.jsx(oe,{type:"source",position:G.Right,className:"w-3 h-3 bg-yellow-500",id:"detections-output"}),s.jsxs("div",{className:"px-4 py-3 bg-gray-950 border-b border-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🔍"}),s.jsx("div",{className:"font-bold text-sm text-yellow-400",children:"Detection Filter"})]}),s.jsx("button",{onClick:()=>o(!r),className:"text-gray-400 hover:text-white",children:"⚙️"})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("span",{className:"text-gray-400",children:["Total: ",s.jsx("span",{className:"text-cyan-400",children:g.total})]}),s.jsxs("span",{className:"text-gray-400",children:["Passed: ",s.jsx("span",{className:"text-green-400",children:g.passed})]}),s.jsxs("span",{className:"text-gray-400",children:["Blocked: ",s.jsx("span",{className:"text-red-400",children:g.filtered})]})]}),s.jsx("button",{onClick:j,className:"text-[10px] px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded",children:"Reset"})]})]}),s.jsx("div",{className:"px-4 py-3",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-950 rounded border border-gray-800",children:[s.jsx("label",{className:"text-xs text-gray-300 flex-1",children:"Only when detections found"}),s.jsx("button",{onClick:()=>m(!f),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${f?"bg-green-600 text-white":"bg-gray-700 text-gray-400"}`,children:f?"ON":"OFF"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Filter Mode"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>l("count"),className:`px-3 py-2 rounded text-xs transition-colors ${i==="count"?"bg-yellow-600 text-white border border-yellow-500":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:"📊 Count"}),s.jsx("button",{onClick:()=>l("class"),className:`px-3 py-2 rounded text-xs transition-colors ${i==="class"?"bg-yellow-600 text-white border border-yellow-500":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:"🏷️ Class"}),s.jsx("button",{onClick:()=>l("confidence"),className:`px-3 py-2 rounded text-xs transition-colors ${i==="confidence"?"bg-yellow-600 text-white border border-yellow-500":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:"💯 Confidence"}),s.jsx("button",{onClick:()=>l("advanced"),className:`px-3 py-2 rounded text-xs transition-colors ${i==="advanced"?"bg-yellow-600 text-white border border-yellow-500":"bg-gray-800 text-gray-400 border border-gray-700"}`,children:"⚡ Advanced"})]})]}),!r&&s.jsxs("div",{className:"p-2 bg-gray-950 rounded border border-gray-800 text-xs",children:[s.jsx("div",{className:"text-gray-400 mb-1",children:"Active Filters:"}),s.jsxs("div",{className:"space-y-1",children:[f&&s.jsx("div",{className:"text-green-400",children:"✓ Only when detections found"}),i==="count"&&s.jsxs("div",{className:"text-yellow-400",children:["✓ Count: ",a,"-",u]}),i==="class"&&h.length>0&&s.jsxs("div",{className:"text-yellow-400",children:["✓ Classes (",v,"): ",h.slice(0,3).join(", "),h.length>3&&` +${h.length-3} more`]}),i==="confidence"&&s.jsxs("div",{className:"text-yellow-400",children:["✓ Min confidence: ",(x*100).toFixed(0),"%"]})]})]})]})}),r&&s.jsxs("div",{className:"px-4 py-3 border-t border-gray-800 space-y-3 max-h-[400px] overflow-y-auto",children:[i==="count"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Min Detections: ",a]}),s.jsx("input",{type:"range",min:"0",max:"50",value:a,onChange:k=>c(parseInt(k.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Max Detections: ",u===999?"∞":u]}),s.jsx("input",{type:"range",min:"1",max:"50",value:u===999?50:u,onChange:k=>p(parseInt(k.target.value)===50?999:parseInt(k.target.value)),className:"w-full"})]})]}),i==="class"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>y("include"),className:`flex-1 px-3 py-2 rounded text-xs ${v==="include"?"bg-green-600 text-white":"bg-gray-800 text-gray-400"}`,children:"✓ Include Only"}),s.jsx("button",{onClick:()=>y("exclude"),className:`flex-1 px-3 py-2 rounded text-xs ${v==="exclude"?"bg-red-600 text-white":"bg-gray-800 text-gray-400"}`,children:"✗ Exclude"})]}),s.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:["Select classes (",h.length," selected):"]}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx("button",{onClick:()=>d(["person","car","truck","bus","motorcycle"]),className:"flex-1 px-2 py-1 bg-blue-900/50 text-blue-300 rounded text-[10px] hover:bg-blue-900/70",children:"Vehicles + People"}),s.jsx("button",{onClick:()=>d([]),className:"px-2 py-1 bg-gray-800 text-gray-400 rounded text-[10px] hover:bg-gray-700",children:"Clear"})]}),s.jsx("div",{className:"grid grid-cols-2 gap-1 max-h-[200px] overflow-y-auto",children:sk.slice(0,30).map(k=>s.jsxs("button",{onClick:()=>S(k),className:`px-2 py-1 rounded text-[10px] text-left transition-colors ${h.includes(k)?"bg-yellow-600 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:[h.includes(k)?"✓ ":"  ",k]},k))})]}),i==="confidence"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Minimum Confidence: ",(x*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0",max:"100",value:x*100,onChange:k=>b(parseInt(k.target.value)/100),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mt-1",children:[s.jsx("span",{children:"0%"}),s.jsx("span",{children:"50%"}),s.jsx("span",{children:"100%"})]})]}),s.jsx("div",{className:"p-2 bg-blue-900/20 border border-blue-700 rounded text-xs text-blue-300",children:"💡 Higher confidence = fewer false positives"})]}),i==="advanced"&&s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-xs text-gray-400",children:"Combine multiple filter types:"}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Min Confidence: ",(x*100).toFixed(0),"%"]}),s.jsx("input",{type:"range",min:"0",max:"100",value:x*100,onChange:k=>b(parseInt(k.target.value)/100),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-1",children:["Detection Count: ",a,"-",u===999?"∞":u]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",min:"0",max:"50",value:a,onChange:k=>c(parseInt(k.target.value)||0),className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs"}),s.jsx("input",{type:"number",min:"1",max:"999",value:u,onChange:k=>p(parseInt(k.target.value)||999),className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Quick Class Presets:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>d(["person"]),className:"px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-[10px]",children:"👤 People Only"}),s.jsx("button",{onClick:()=>d(["car","truck","bus"]),className:"px-2 py-1 bg-gray-800 hover:bg-gray-700 rounded text-[10px]",children:"🚗 Vehicles"})]})]})]})]}),s.jsx("div",{className:"px-4 py-2 bg-gray-950 border-t border-gray-800 text-center",children:s.jsx("div",{className:"text-[10px] text-gray-600",children:f?"🟢 Active filtering":"🔴 Passing all"})})]})})}),ik=({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState([]),[l,a]=w.useState(!1),c=e.config||e||{},u=c.credentialId||"",p=c.credentialName||"Select Credential",h=c.filterState||"all",d=c.filterRecording;w.useEffect(()=>{(async()=>{try{const b=await(await fetch("http://localhost:7001/api/unifi/credentials")).json();i(b.credentials||[])}catch(x){console.error("Failed to fetch UniFi credentials:",x)}})()},[]);const v=(y,x)=>{e.onChange&&e.onChange({config:{...c,[y]:x}})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border border-blue-500/50 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsx(oe,{type:"target",position:G.Left,style:{background:"#3b82f6"}}),s.jsxs("div",{className:"px-4 py-3 bg-blue-950/30 border-b border-blue-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"📡"}),s.jsx("div",{className:"font-bold text-sm text-blue-400",children:"UniFi Camera Discovery"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",children:n?"▼":"▶"})]}),s.jsx("div",{className:"text-[10px] text-gray-400",children:"Discover UniFi Protect cameras"})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"UniFi Credential"}),s.jsxs("select",{value:u,onChange:y=>{const x=o.find(b=>b.id===y.target.value);v("credentialId",y.target.value),x&&v("credentialName",x.name)},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"",children:"Select credential..."}),o.map(y=>s.jsxs("option",{value:y.id,children:[y.name," (",y.host,")"]},y.id))]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Filter State"}),s.jsxs("select",{value:h,onChange:y=>v("filterState",y.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"all",children:"All Cameras"}),s.jsx("option",{value:"connected",children:"Connected Only"}),s.jsx("option",{value:"disconnected",children:"Disconnected Only"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Filter Recording"}),s.jsxs("select",{value:d===!0?"recording":d===!1?"not-recording":"all",onChange:y=>{const x=y.target.value==="recording"?!0:y.target.value==="not-recording"?!1:null;v("filterRecording",x)},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"all",children:"All Cameras"}),s.jsx("option",{value:"recording",children:"Recording Only"}),s.jsx("option",{value:"not-recording",children:"Not Recording"})]})]})]}),s.jsxs("div",{className:"text-[10px] text-blue-400",children:["✓ ",p]})]}),s.jsx(oe,{type:"source",position:G.Right,id:"cameras-output",style:{background:"#3b82f6"}})]})})},lk=w.memo(ik),ak=[{value:"motion",label:"Motion",icon:"👋"},{value:"smart",label:"Smart Detection",icon:"🧠"},{value:"ring",label:"Doorbell Ring",icon:"🔔"}],ck=[{value:"person",label:"Person"},{value:"vehicle",label:"Vehicle"},{value:"animal",label:"Animal"}],uk=({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState([]),l=e.config||e||{},a=l.credentialId||"",c=l.credentialName||"Select Credential",u=l.eventTypes||["motion"],p=l.detectionTypes||[];l.cameraFilter;const h=l.pollInterval||10;w.useEffect(()=>{(async()=>{try{const f=await(await fetch("http://localhost:7001/api/unifi/credentials")).json();i(f.credentials||[])}catch(b){console.error("Failed to fetch UniFi credentials:",b)}})()},[]);const d=(x,b)=>{e.onChange&&e.onChange({config:{...l,[x]:b}})},v=x=>{const b=u.includes(x)?u.filter(f=>f!==x):[...u,x];d("eventTypes",b)},y=x=>{const b=p.includes(x)?p.filter(f=>f!==x):[...p,x];d("detectionTypes",b)};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border border-purple-500/50 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsxs("div",{className:"px-4 py-3 bg-purple-950/30 border-b border-purple-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"🎥"}),s.jsx("div",{className:"font-bold text-sm text-purple-400",children:"UniFi Protect Events"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",children:n?"▼":"▶"})]}),s.jsx("div",{className:"text-[10px] text-gray-400",children:"Monitor Protect events"})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"UniFi Credential"}),s.jsxs("select",{value:a,onChange:x=>{const b=o.find(f=>f.id===x.target.value);d("credentialId",x.target.value),b&&d("credentialName",b.name)},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"",children:"Select credential..."}),o.map(x=>s.jsxs("option",{value:x.id,children:[x.name," (",x.host,")"]},x.id))]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Event Types"}),s.jsx("div",{className:"space-y-1",children:ak.map(x=>s.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:u.includes(x.value),onChange:()=>v(x.value),className:"w-3 h-3"}),s.jsxs("span",{children:[x.icon," ",x.label]})]},x.value))})]}),u.includes("smart")&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Smart Detection Types"}),s.jsx("div",{className:"space-y-1",children:ck.map(x=>s.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:p.includes(x.value),onChange:()=>y(x.value),className:"w-3 h-3"}),s.jsx("span",{children:x.label})]},x.value))})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-[10px] text-gray-400 mb-1",children:["Poll Interval: ",h,"s"]}),s.jsx("input",{type:"range",min:"5",max:"60",step:"5",value:h,onChange:x=>d("pollInterval",parseInt(x.target.value)),className:"w-full"})]})]}),s.jsxs("div",{className:"text-[10px] text-purple-400",children:["✓ ",c]})]}),s.jsx(oe,{type:"source",position:G.Right,id:"events-output",style:{background:"#a855f7"}})]})})},dk=w.memo(uk),fk=({data:e,id:t})=>{const[n,r]=w.useState(!1),[o,i]=w.useState([]),l=e.config||e||{},a=l.sublocationId||"",c=l.sublocationName||"Select Sublocation",u=l.streamQuality||"medium",p=l.autoEnable!==!1;w.useEffect(()=>{(async()=>{try{const y=await(await fetch("http://localhost:7001/api/sublocations")).json();i(y.sublocations||[])}catch(v){console.error("Failed to fetch sublocations:",v)}})()},[]);const h=(d,v)=>{e.onChange&&e.onChange({config:{...l,[d]:v}})};return s.jsx(Se,{nodeId:t,children:s.jsxs("div",{className:"shadow-lg rounded-lg border border-green-500/50 bg-gray-900 min-w-[280px] max-w-[350px]",children:[s.jsx(oe,{type:"target",position:G.Left,id:"cameras-input",style:{background:"#22c55e"}}),s.jsxs("div",{className:"px-4 py-3 bg-green-950/30 border-b border-green-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-xl",children:"➕"}),s.jsx("div",{className:"font-bold text-sm text-green-400",children:"Add UniFi Cameras"})]}),s.jsx("button",{onClick:()=>r(!n),className:"text-xs px-2 py-1 bg-gray-800 rounded hover:bg-gray-700",children:n?"▼":"▶"})]}),s.jsx("div",{className:"text-[10px] text-gray-400",children:"Provision cameras to Overwatch"})]}),s.jsxs("div",{className:"p-3 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Target Sublocation"}),s.jsxs("select",{value:a,onChange:d=>{const v=o.find(y=>y.id===d.target.value);h("sublocationId",d.target.value),v&&h("sublocationName",v.name)},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"",children:"Select sublocation..."}),o.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id))]})]}),n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] text-gray-400 mb-1",children:"Stream Quality"}),s.jsxs("select",{value:u,onChange:d=>h("streamQuality",d.target.value),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs text-gray-200",children:[s.jsx("option",{value:"high",children:"High Quality"}),s.jsx("option",{value:"medium",children:"Medium Quality"}),s.jsx("option",{value:"low",children:"Low Quality"})]})]}),s.jsx("div",{children:s.jsxs("label",{className:"flex items-center space-x-2 text-xs cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:p,onChange:d=>h("autoEnable",d.target.checked),className:"w-3 h-3"}),s.jsx("span",{children:"Auto-enable cameras"})]})})]}),s.jsxs("div",{className:"text-[10px] text-green-400",children:["✓ ",c]})]}),s.jsx(oe,{type:"source",position:G.Right,id:"result-output",style:{background:"#22c55e"}})]})})},hk=w.memo(fk);function pk({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:i,targetPosition:l,style:a={},markerEnd:c,data:u}){const[p,h,d]=Uc({sourceX:t,sourceY:n,sourcePosition:i,targetX:r,targetY:o,targetPosition:l}),[v,y]=w.useState(0),[x,b]=w.useState(!1);w.useEffect(()=>{const g=setInterval(()=>{const N=Math.random()>.3;b(N),N&&y(Math.floor(Math.random()*30)+1)},2e3);return()=>clearInterval(g)},[]);const m=(u==null?void 0:u.type)==="video"?"#3b82f6":(u==null?void 0:u.type)==="detections"?"#10b981":(u==null?void 0:u.type)==="events"?"#f59e0b":(u==null?void 0:u.type)==="zones"?"#8b5cf6":"#6b7280";return s.jsxs(s.Fragment,{children:[s.jsx(Tr,{path:p,markerEnd:c,style:{...a,strokeWidth:x?3:2,stroke:x?m:"#4b5563",strokeDasharray:x?"0":"5,5",transition:"all 0.3s ease"}}),x&&s.jsxs(s.Fragment,{children:[s.jsx("path",{d:p,fill:"none",stroke:m,strokeWidth:"3",strokeOpacity:"0.4",className:"animate-pulse"}),s.jsx("circle",{r:"4",fill:m,className:"opacity-80",children:s.jsx("animateMotion",{dur:"1.5s",repeatCount:"indefinite",path:p})}),s.jsx("circle",{r:"4",fill:m,className:"opacity-60",children:s.jsx("animateMotion",{dur:"1.5s",repeatCount:"indefinite",path:p,begin:"0.5s"})}),s.jsx("circle",{r:"4",fill:m,className:"opacity-40",children:s.jsx("animateMotion",{dur:"1.5s",repeatCount:"indefinite",path:p,begin:"1s"})})]}),x&&s.jsx(Ng,{children:s.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${h}px,${d}px)`,fontSize:10,pointerEvents:"all"},className:"nodrag nopan bg-gray-900 border border-gray-700 rounded px-2 py-1 text-xs font-mono",children:s.jsxs("span",{style:{color:m},children:["⚡ ",v," fps"]})})})]})}function gk({id:e,sourceX:t,sourceY:n,targetX:r,targetY:o,sourcePosition:i,targetPosition:l,style:a={},markerEnd:c,data:u}){const[p,h,d]=Yc({sourceX:t,sourceY:n,targetX:r,targetY:o}),[v,y]=w.useState(0),[x,b]=w.useState(!1);return w.useEffect(()=>{const f=setInterval(()=>{const m=Math.random()>.5;b(m),m&&y(g=>g+1)},1500);return()=>clearInterval(f)},[]),s.jsxs(s.Fragment,{children:[s.jsx(Tr,{path:p,markerEnd:c,style:{...a,strokeWidth:2,stroke:"#6366f1",strokeDasharray:"8,4",strokeDashoffset:x?"0":"12",animation:x?"dash 1s linear infinite":"none"}}),x&&s.jsxs("circle",{r:"3",fill:"#6366f1",children:[s.jsx("animateMotion",{dur:"1s",repeatCount:"1",path:p}),s.jsx("animate",{attributeName:"opacity",values:"1;0",dur:"1s",repeatCount:"1"})]}),v>0&&s.jsx(Ng,{children:s.jsx("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${h}px,${d}px)`,fontSize:9,pointerEvents:"all"},className:"nodrag nopan bg-indigo-900/80 border border-indigo-600 rounded-full px-2 py-0.5 text-xs font-mono text-indigo-200",children:v})}),s.jsx("style",{children:`
        @keyframes dash {
          to {
            stroke-dashoffset: 0;
          }
        }
      `})]})}const Cg=()=>{const[e,t]=w.useState(null),[n,r]=w.useState(!0),[o,i]=w.useState(null);w.useEffect(()=>{const y=async()=>{try{r(!0);const b=await fetch(`${ce}/api/component-status/status`);if(!b.ok)throw new Error(`Failed to fetch component status: ${b.statusText}`);const f=await b.json();t(f),i(null)}catch(b){console.error("Error fetching component status:",b),i(b.message)}finally{r(!1)}};y();const x=setInterval(y,5*60*1e3);return()=>clearInterval(x)},[]);const l=y=>e!=null&&e.models?e.models[y]:null,a=y=>e!=null&&e.inputs?e.inputs[y]:null,c=y=>e!=null&&e.processing?e.processing[y]:null,u=y=>e!=null&&e.actions?e.actions[y]:null,p=(y,x)=>{if(!e)return null;const b=["models","inputs","processing","actions","outputs","advanced","drone"];for(const f of b){const m=e[f];if(m){if(x&&m[x])return m[x];if(m[y])return m[y]}}return null};return{status:e,loading:n,error:o,getModelStatus:l,getInputStatus:a,getProcessingStatus:c,getActionStatus:u,getNodeStatus:p,isNodeReady:(y,x)=>{const b=p(y,x);return b?b.status==="ready"&&b.dependenciesMet!==!1:!0},getBadgeConfig:y=>{const x={production:{icon:"✅",color:"green",bgColor:"bg-green-900/30",textColor:"text-green-400",borderColor:"border-green-700/50",text:"Ready"},needsConfig:{icon:"🔧",color:"yellow",bgColor:"bg-yellow-900/30",textColor:"text-yellow-400",borderColor:"border-yellow-700/50",text:"Setup Required"},beta:{icon:"🚧",color:"orange",bgColor:"bg-orange-900/30",textColor:"text-orange-400",borderColor:"border-orange-700/50",text:"Beta"},notImplemented:{icon:"📋",color:"gray",bgColor:"bg-gray-800/50",textColor:"text-gray-400",borderColor:"border-gray-600/50",text:"Coming Soon"}};return x[y]||x.production},getModelsByStatus:()=>{if(!(e!=null&&e.models))return{ready:[],needsConfig:[],beta:[],notImplemented:[]};const y={ready:[],needsConfig:[],beta:[],notImplemented:[]};return Object.entries(e.models).forEach(([x,b])=>{const f=b.status==="ready"?"ready":b.status==="needsConfig"?"needsConfig":b.status==="beta"?"beta":"notImplemented";y[f].push({id:x,...b})}),y},dependencies:(e==null?void 0:e.dependencies)||{},summary:(e==null?void 0:e.summary)||{}}},xk=({nodeType:e,nodeId:t,size:n="sm",showText:r=!1})=>{const{getNodeStatus:o,getBadgeConfig:i,loading:l}=Cg();if(l)return null;const a=o(e,t);if(!a)return null;const c=i(a.badge||"production"),u={xs:"text-xs px-1 py-0.5",sm:"text-xs px-1.5 py-0.5",md:"text-sm px-2 py-1",lg:"text-base px-3 py-1.5"};return s.jsxs("div",{className:`inline-flex items-center gap-1 rounded ${c.bgColor} ${c.textColor} ${c.borderColor} border ${u[n]} font-medium`,title:a.message,children:[s.jsx("span",{children:c.icon}),r&&s.jsx("span",{children:c.text})]})},mk=({cameras:e,models:t,actions:n,filters:r})=>{var v,y,x,b;const[o,i]=w.useState("inputs"),{getNodeStatus:l,loading:a}=Cg(),[c,u]=w.useState(!1);console.log("Sidebar received:",{cameras:e==null?void 0:e.length,models:t==null?void 0:t.length,actions:n==null?void 0:n.length,filters:r==null?void 0:r.length});const p=(f,m,g={})=>{f.dataTransfer.setData("application/reactflow",m),f.dataTransfer.setData("application/json",JSON.stringify(g)),f.dataTransfer.effectAllowed="move"},h=Ha.useMemo(()=>a?t:t.filter(f=>{const m=l("model",f.id);return m?!(m.status==="notImplemented"&&!c):!0}),[t,a,l,c]),d={inputs:{name:"Input Sources",icon:"📹",items:[{type:"camera",label:"Camera Feed",icon:"📹",description:"Live camera stream"},{type:"videoInput",label:"Video File",icon:"🎥",description:"Upload video file"},{type:"youtube",label:"YouTube",icon:"▶️",description:"YouTube video stream"}]},models:{name:"AI Models",icon:"🤖",items:h.map(f=>({type:"model",label:f.name||f.id,icon:"🤖",description:f.type||"Detection model",data:{modelId:f.id,modelName:f.name},modelId:f.id}))},processing:{name:"Processing",icon:"⚙️",items:[{type:"zone",label:"Zone Filter",icon:"📍",description:"Define detection zones"},{type:"detectionFilter",label:"Detection Filter",icon:"🔍",description:"Filter by count, class, confidence"},{type:"parkingViolation",label:"Parking Violation",icon:"🚗",description:"Detect illegal parking"},{type:"audioExtractor",label:"Audio Extractor",icon:"🎵",description:"Extract audio from video"},{type:"dayNightDetector",label:"Day/Night/IR Detector",icon:"🌓",description:"Detect lighting conditions & IR mode"}]},audio:{name:"Audio AI",icon:"🎤",items:[{type:"audioAI",label:"Whisper (Tiny)",icon:"🎙️",description:"Fast speech transcription",data:{modelId:"whisper-tiny",modelName:"Whisper Tiny",modelType:"transcription"}},{type:"audioAI",label:"Whisper (Base)",icon:"🎙️",description:"Balanced transcription",data:{modelId:"whisper-base",modelName:"Whisper Base",modelType:"transcription"}},{type:"audioAI",label:"Whisper (Small)",icon:"🎙️",description:"High quality transcription",data:{modelId:"whisper-small",modelName:"Whisper Small",modelType:"transcription"}},{type:"audioAI",label:"Sound Classifier",icon:"🔊",description:"Detect gunshots, alarms, etc.",data:{modelId:"yamnet",modelName:"YAMNet",modelType:"sound_classification"}},{type:"audioVU",label:"VU/Frequency Meter",icon:"📻",description:"Audio visualization with triggers",data:{}}]},actions:{name:"Actions",icon:"⚡",items:n.map(f=>({type:"action",label:f.name||f.id,icon:"⚡",description:f.description||"Trigger action",data:{actionId:f.id,actionType:f.type}}))},config:{name:"Configuration",icon:"⚙️",items:[{type:"config",label:"Config Node",icon:"⚙️",description:"Reusable configuration",data:{configType:"generic"}},{type:"config",label:"Model Config",icon:"🤖",description:"AI model settings",data:{configType:"model",configName:"Model Settings",config:{confidence:.7,classes:[0]}}},{type:"config",label:"Webhook Config",icon:"🔗",description:"Webhook settings",data:{configType:"webhook",configName:"Webhook",config:{method:"POST",timeout:10}}},{type:"config",label:"Recording Config",icon:"🎬",description:"Recording settings",data:{configType:"record",configName:"Recording",config:{duration:30,preBuffer:5}}}]},debug:{name:"Debug & Output",icon:"🔍",items:[{type:"dataPreview",label:"Data Preview",icon:"👁️",description:"View detection data"},{type:"videoPreview",label:"X-RAY View",icon:"🔍",description:"See what the AI sees (Coming Soon)"},{type:"debug",label:"Debug Console",icon:"🐛",description:"All workflow messages"}]},drone:{name:"Drone Detection",icon:"🛸",items:[{type:"droneInput",label:"Drone Input",icon:"🛸",description:"Meshtastic receiver input"},{type:"droneFilter",label:"Drone Filter",icon:"📐",description:"Altitude/speed/geofence filtering"},{type:"droneMap",label:"Drone Map",icon:"🗺️",description:"Real-time map visualization"},{type:"droneAction",label:"Drone Action",icon:"🚨",description:"Drone-specific response actions"},{type:"droneAnalytics",label:"Drone Analytics",icon:"📊",description:"Statistical analysis"}]},unifi:{name:"UniFi Integration",icon:"📡",items:[{type:"unifiCameraDiscovery",label:"Camera Discovery",icon:"📡",description:"Discover UniFi Protect cameras"},{type:"unifiProtectEvent",label:"Protect Events",icon:"🎥",description:"Monitor motion & smart detections"},{type:"unifiAddCamera",label:"Add Cameras",icon:"➕",description:"Auto-provision cameras to Overwatch"}]},advanced:{name:"Advanced",icon:"🔧",items:[{type:"linkIn",label:"Link In",icon:"📥",description:"Subflow entry point"},{type:"linkOut",label:"Link Out",icon:"📤",description:"Subflow exit point"},{type:"linkCall",label:"Link Call",icon:"🔗",description:"Call subflow"},{type:"catch",label:"Catch Error",icon:"🚨",description:"Error handler"}]}};return s.jsxs("div",{className:"w-80 bg-gray-900 border-r border-gray-800 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-gray-800",children:[s.jsx("h2",{className:"text-lg font-semibold text-white",children:"Components"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Drag items onto the canvas"})]}),s.jsx("div",{className:"flex overflow-x-auto border-b border-gray-800 bg-gray-900/50",children:Object.entries(d).map(([f,m])=>s.jsx("button",{onClick:()=>i(f),className:`flex-1 px-3 py-2 text-xs font-medium border-b-2 transition-colors whitespace-nowrap ${o===f?"border-blue-500 text-blue-400 bg-gray-800/50":"border-transparent text-gray-400 hover:text-gray-300 hover:bg-gray-800/30"}`,children:s.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[s.jsx("span",{className:"text-base",children:m.icon}),s.jsx("span",{children:m.name.split(" ")[0]})]})},f))}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o==="models"&&!a&&s.jsx("div",{className:"mb-3 flex items-center justify-between",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:f=>u(f.target.checked),className:"rounded"}),'Show "Coming Soon" models']})}),s.jsxs("div",{className:"space-y-2",children:[(y=(v=d[o])==null?void 0:v.items)==null?void 0:y.map((f,m)=>{const g=l(f.type,f.modelId||f.type),N=g&&!g.dependenciesMet&&g.status==="needsConfig";return s.jsx("div",{draggable:!0,onDragStart:S=>p(S,f.type,f.data),className:`bg-gray-800 hover:bg-gray-750 border rounded-lg p-3 cursor-move transition-all active:scale-95 ${N?"border-yellow-500":"border-gray-700 hover:border-gray-600"}`,title:(g==null?void 0:g.message)||f.description,children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"text-2xl",children:f.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:"font-medium text-white text-sm",children:f.label}),!a&&s.jsx(xk,{nodeType:f.type,nodeId:f.modelId||f.type,size:"xs"})]}),s.jsx("div",{className:"text-xs text-gray-400",children:f.description}),N&&s.jsx("div",{className:"mt-1 text-xs text-yellow-400",children:"⚠️ Setup required"})]})]})},m)}),(!((x=d[o])!=null&&x.items)||((b=d[o])==null?void 0:b.items.length)===0)&&s.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[s.jsx("div",{className:"text-2xl mb-2",children:"📭"}),s.jsx("div",{children:"No items available"}),s.jsx("div",{className:"text-xs mt-1",children:o==="models"&&!c?'Enable "Show Coming Soon" to see planned models':"Configure models/actions in settings"})]})]})]}),e.length>0&&o==="inputs"&&s.jsxs("div",{className:"border-t border-gray-800 p-4",children:[s.jsx("div",{className:"text-xs font-medium text-gray-400 mb-2",children:"Available Cameras"}),s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:e.map((f,m)=>s.jsxs("div",{draggable:!0,onDragStart:g=>p(g,"camera",{cameraId:f.id,cameraName:f.name}),className:"text-xs bg-gray-800/50 hover:bg-gray-700 border border-gray-700/50 rounded px-2 py-1 cursor-move transition-colors",children:[s.jsx("div",{className:"font-medium text-gray-300",children:f.name}),s.jsx("div",{className:"text-gray-500",children:f.id})]},m))})]}),s.jsx("div",{className:"p-3 border-t border-gray-800 bg-gray-900/50",children:s.jsx("div",{className:"text-xs text-gray-500 text-center",children:"💡 Drag and drop to build your workflow"})})]})},yk=({onSave:e,onClear:t,onExecute:n,nodeCount:r,edgeCount:o,isExecuting:i})=>s.jsxs("div",{className:"bg-gray-900/90 backdrop-blur-sm border border-gray-800 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Nodes:"})," ",s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-gray-400",children:"Connections:"})," ",s.jsx("span",{className:"font-medium",children:o})]}),i&&s.jsxs("div",{className:"text-sm flex items-center space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),s.jsx("span",{className:"text-green-400 font-medium",children:"Running"})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:n,disabled:r===0,className:`px-4 py-2 rounded text-sm font-medium transition-colors ${i?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white disabled:bg-gray-700 disabled:text-gray-500 disabled:cursor-not-allowed"}`,children:i?"⏹ Stop":"▶️ Execute"}),s.jsx("button",{onClick:e,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm font-medium transition-colors",children:"💾 Save"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 border border-gray-700 rounded text-sm font-medium transition-colors",children:"🗑️ Clear"})]})]});function vk({onBackgroundChange:e,currentBackground:t}){const[n,r]=w.useState(!1),[o,i]=w.useState("none"),[l,a]=w.useState(null),[c,u]=w.useState(.85),[p,h]=w.useState({lat:51.505,lng:-.09}),[d,v]=w.useState(15),[y,x]=w.useState({north:51.51,south:51.5,east:-.08,west:-.1}),[b,f]=w.useState(!1),[m,g]=w.useState(!1),[N,S]=w.useState("standard"),j=w.useRef(null),k=()=>{f(!0),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(R=>{const _=R.coords.latitude,$=R.coords.longitude;h({lat:_,lng:$}),f(!1),console.log("User location:",_,$),o==="map"&&e({type:"map",center:{lat:_,lng:$},zoom:d,bounds:y,opacity:c})},R=>{console.error("Error getting location:",R),f(!1)}):(console.error("Geolocation not supported"),f(!1))},C=R=>{const _=R.target.files[0];if(!_)return;const $=new FileReader;$.onload=T=>{const D=T.target.result;a(D),i("image"),e({type:"image",url:D,opacity:c})},$.readAsDataURL(_)},P=()=>{i("none"),a(null),e({type:"none"})},z=R=>{u(R),o==="image"&&l?e({type:"image",url:l,opacity:R}):o==="map"&&e({type:"map",center:p,zoom:d,bounds:y,opacity:R})},L=()=>{p.lat===51.505&&p.lng===-.09&&k(),i("map"),e({type:"map",center:p,zoom:d,bounds:y,opacity:c,syncWithViewport:m,style:N})},A=()=>{e({type:"map",center:p,zoom:d,bounds:y,opacity:c,syncWithViewport:m,style:N})};return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>r(!n),className:"px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg hover:border-gray-500 transition-colors text-sm flex items-center space-x-2",title:"Background Settings",children:[s.jsx("span",{children:"🗺️"}),s.jsx("span",{className:"text-gray-300",children:"Background"}),o!=="none"&&s.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})]}),n&&s.jsxs("div",{className:"absolute top-12 right-0 w-80 bg-gray-900 border border-gray-700 rounded-lg shadow-xl p-4 z-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"font-bold text-sm text-white",children:"Background Settings"}),s.jsx("button",{onClick:()=>r(!1),className:"text-gray-400 hover:text-white",children:"✕"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Background Type"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:()=>P(),className:`w-full px-3 py-2 rounded text-sm text-left ${o==="none"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"None (Grid Only)"}),s.jsx("button",{onClick:()=>{var R;return(R=j.current)==null?void 0:R.click()},className:`w-full px-3 py-2 rounded text-sm text-left ${o==="image"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"📁 Upload Floor Plan/Image"}),s.jsx("button",{onClick:L,className:`w-full px-3 py-2 rounded text-sm text-left ${o==="map"?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:"🌍 Geographic Map"})]}),s.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:C,className:"hidden"})]}),o==="image"&&l&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-950 border border-gray-800 rounded",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Preview:"}),s.jsx("img",{src:l,alt:"Background",className:"w-full h-24 object-cover rounded border border-gray-700"}),s.jsx("button",{onClick:P,className:"mt-2 w-full px-2 py-1 bg-red-900/50 text-red-300 rounded text-xs hover:bg-red-900/70",children:"Remove Image"})]}),o==="map"&&s.jsxs("div",{className:"mb-4 p-3 bg-gray-950 border border-gray-800 rounded",children:[s.jsx("div",{className:"text-xs text-gray-400 mb-3",children:"Map Settings:"}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Map Style"}),s.jsxs("select",{value:N,onChange:R=>{const _=R.target.value;S(_),e({type:"map",center:p,zoom:d,bounds:y,opacity:c,syncWithViewport:m,style:_})},className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",children:[s.jsx("option",{value:"standard",children:"🗺️ Standard"}),s.jsx("option",{value:"dark",children:"🌙 Dark Mode"}),s.jsx("option",{value:"satellite",children:"🛰️ Satellite"}),s.jsx("option",{value:"terrain",children:"⛰️ Terrain"})]})]}),s.jsxs("div",{className:"mb-3 p-2 bg-gray-900 rounded border border-gray-800",children:[s.jsxs("label",{className:"flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:m,onChange:R=>{const _=R.target.checked;g(_),e({type:"map",center:p,zoom:d,bounds:y,opacity:c,syncWithViewport:_,style:N})},className:"mr-2"}),s.jsx("span",{className:"text-xs text-gray-300",children:"🔄 Sync map with canvas pan/zoom"})]}),s.jsx("div",{className:"text-[10px] text-gray-600 mt-1 ml-6",children:"Map follows when you move the canvas"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Center (Lat, Lng)"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"number",step:"0.0001",value:p.lat,onChange:R=>{const _=parseFloat(R.target.value);h({...p,lat:_})},onBlur:()=>{e({type:"map",center:p,zoom:d,bounds:y,opacity:c})},className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"Latitude"}),s.jsx("input",{type:"number",step:"0.0001",value:p.lng,onChange:R=>{const _=parseFloat(R.target.value);h({...p,lng:_})},onBlur:()=>{e({type:"map",center:p,zoom:d,bounds:y,opacity:c})},className:"flex-1 px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"Longitude"})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"text-xs text-gray-500 block mb-1",children:["Zoom Level: ",d]}),s.jsx("input",{type:"range",min:"1",max:"20",value:d,onChange:R=>{const _=parseInt(R.target.value);v(_),e({type:"map",center:p,zoom:_,bounds:y,opacity:c,syncWithViewport:m,style:N})},className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[s.jsx("span",{children:"World"}),s.jsx("span",{children:"Street"})]})]}),s.jsxs("details",{className:"mb-2",children:[s.jsx("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-400",children:"Define Bounds (Optional)"}),s.jsxs("div",{className:"mt-2 space-y-2",children:[s.jsx("input",{type:"number",step:"0.0001",value:y.north,onChange:R=>x({...y,north:parseFloat(R.target.value)}),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"North"}),s.jsx("input",{type:"number",step:"0.0001",value:y.south,onChange:R=>x({...y,south:parseFloat(R.target.value)}),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"South"}),s.jsx("input",{type:"number",step:"0.0001",value:y.east,onChange:R=>x({...y,east:parseFloat(R.target.value)}),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"East"}),s.jsx("input",{type:"number",step:"0.0001",value:y.west,onChange:R=>x({...y,west:parseFloat(R.target.value)}),className:"w-full px-2 py-1 bg-gray-800 border border-gray-700 rounded text-xs",placeholder:"West"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{onClick:k,disabled:b,className:"w-full px-2 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700 disabled:opacity-50",children:b?"📍 Getting Location...":"📍 Use My Location"}),s.jsx("button",{onClick:A,className:"w-full px-2 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700",children:"Update Map"})]})]}),o!=="none"&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"text-xs text-gray-400 block mb-2",children:["Opacity: ",Math.round(c*100),"%"]}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:c,onChange:R=>z(parseFloat(R.target.value)),className:"w-full"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[s.jsx("span",{children:"Transparent"}),s.jsx("span",{children:"Opaque"})]})]}),s.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded",children:[s.jsx("div",{className:"text-xs text-blue-400 mb-1 font-medium",children:"💡 Tips:"}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[s.jsx("li",{children:"• Upload floor plans or site maps"}),s.jsx("li",{children:"• Use maps for outdoor locations"}),s.jsx("li",{children:"• Nodes will snap to real positions"}),s.jsx("li",{children:"• Adjust opacity for visibility"})]})]})]})]})}function wk({config:e}){const t=w.useRef(null),n=w.useRef({});return w.useEffect(()=>{var l,a;if(!e||e.type==="none")return;const r=t.current;if(!r)return;const o=r.getContext("2d"),i=r.parentElement.getBoundingClientRect();if(r.width=i.width,r.height=i.height,o.clearRect(0,0,r.width,r.height),e.type==="image"&&e.url){const c=new Image;c.onload=()=>{o.globalAlpha=e.opacity||.3;const u=Math.max(r.width/c.width,r.height/c.height),p=(r.width-c.width*u)/2,h=(r.height-c.height*u)/2;o.drawImage(c,p,h,c.width*u,c.height*u)},c.src=e.url}else if(e.type==="map"){const c=e.zoom||13,u=((l=e.center)==null?void 0:l.lat)||51.505,p=((a=e.center)==null?void 0:a.lng)||-.09,h=e.style||"standard",d=256,v=Math.pow(2,c),y=Math.floor((p+180)/360*v),x=Math.floor((1-Math.log(Math.tan(u*Math.PI/180)+1/Math.cos(u*Math.PI/180))/Math.PI)/2*v),b=Math.ceil(r.width/d)+2,f=Math.ceil(r.height/d)+2;o.globalAlpha=e.opacity||.85;const m=(S,j,k)=>{switch(h){case"dark":return`https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/${S}/${j}/${k}.png`;case"satellite":return`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/${S}/${k}/${j}`;case"terrain":return`https://tile.opentopomap.org/${S}/${j}/${k}.png`;default:return`https://tile.openstreetmap.org/${S}/${j}/${k}.png`}};for(let S=-Math.floor(b/2);S<=Math.floor(b/2);S++)for(let j=-Math.floor(f/2);j<=Math.floor(f/2);j++){const k=y+S,C=x+j;if(k<0||C<0||k>=v||C>=v)continue;const P=m(c,k,C),z=`${h}-${c}-${k}-${C}`;if(n.current[z]){const L=n.current[z];L.complete&&o.drawImage(L,r.width/2+S*d-d/2,r.height/2+j*d-d/2,d,d)}else{const L=new Image;L.crossOrigin="anonymous",L.onload=()=>{o.globalAlpha=e.opacity||.85,o.drawImage(L,r.width/2+S*d-d/2,r.height/2+j*d-d/2,d,d)},L.onerror=()=>{o.fillStyle="#1f2937",o.fillRect(r.width/2+S*d-d/2,r.height/2+j*d-d/2,d,d),o.strokeStyle="#374151",o.strokeRect(r.width/2+S*d-d/2,r.height/2+j*d-d/2,d,d)},L.src=P,n.current[z]=L}}o.globalAlpha=1;const g=r.width/2,N=r.height/2;o.fillStyle="#3b82f6",o.beginPath(),o.arc(g,N,8,0,2*Math.PI),o.fill(),o.fillStyle="#ffffff",o.beginPath(),o.arc(g,N,4,0,2*Math.PI),o.fill(),o.fillStyle="#000000",o.fillRect(5,5,250,45),o.fillStyle="#ffffff",o.font="bold 12px monospace",o.fillText(`📍 ${u.toFixed(5)}, ${p.toFixed(5)}`,10,20),o.fillText(`🔍 Zoom: ${c}`,10,40)}},[e]),!e||e.type==="none"?null:s.jsx("canvas",{ref:t,className:"absolute inset-0 pointer-events-none",style:{zIndex:0}})}function bk({onToggle:e,isDisplayMode:t}){return s.jsx("button",{onClick:e,className:`px-4 py-2 rounded-lg border transition-all ${t?"bg-blue-600 border-blue-500 text-white":"bg-gray-900 border-gray-700 text-gray-300 hover:border-gray-500"}`,title:t?"Exit Display Mode":"Enter Display Mode",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{children:t?"✏️":"📺"}),s.jsx("span",{className:"text-sm font-medium",children:t?"Edit Mode":"Display Mode"})]})})}function Nk({isOpen:e,onClose:t}){var v,y,x,b;const[n,r]=w.useState(null),[o,i]=w.useState(null),[l,a]=w.useState(!0),[c,u]=w.useState("models");w.useEffect(()=>{e&&(p(),h())},[e]);const p=async()=>{try{const m=await(await fetch(`${ce}/api/config/`)).json();r(m),a(!1)}catch(f){console.error("Failed to load config:",f),a(!1)}},h=async()=>{try{const m=await(await fetch(`${ce}/api/config/check-requirements`,{method:"POST"})).json();i(m)}catch(f){console.error("Failed to check requirements:",f)}},d=async(f,m)=>{try{(await(await fetch(`${ce}/api/config/${f}/${m}/toggle`,{method:"POST"})).json()).status==="success"&&p()}catch(g){console.error("Failed to toggle item:",g)}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-[800px] max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Workflow Configuration"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage available models and nodes"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:"✕"})]}),s.jsxs("div",{className:"px-6 pt-4 flex space-x-4 border-b border-gray-800",children:[s.jsxs("button",{onClick:()=>u("models"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${c==="models"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["🤖 AI Models (",((v=n==null?void 0:n.models)==null?void 0:v.length)||0,")"]}),s.jsxs("button",{onClick:()=>u("nodes"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${c==="nodes"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["🔧 Input Nodes (",((y=n==null?void 0:n.nodes)==null?void 0:y.length)||0,")"]}),s.jsx("button",{onClick:()=>u("settings"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${c==="settings"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"⚙️ Settings"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l?s.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading configuration..."}):s.jsxs(s.Fragment,{children:[c==="models"&&s.jsx("div",{className:"space-y-3",children:(x=n==null?void 0:n.models)==null?void 0:x.map(f=>{var g;const m=(g=o==null?void 0:o.models)==null?void 0:g[f.id];return s.jsx("div",{className:`p-4 rounded-lg border ${f.enabled?"bg-gray-800 border-gray-700":"bg-gray-900/50 border-gray-800 opacity-60"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"font-semibold text-white",children:f.id}),s.jsxs("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded",children:["v",f.version]}),m&&!m.all_met&&s.jsx("span",{className:"text-xs bg-red-900/50 text-red-300 px-2 py-0.5 rounded",children:"⚠️ Requirements missing"})]}),f.notes&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.notes}),f.requirements&&f.requirements.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Requirements:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.requirements.map((N,S)=>{var k,C;const j=(C=(k=m==null?void 0:m.requirements)==null?void 0:k[S])==null?void 0:C.installed;return s.jsxs("span",{className:`text-xs px-2 py-0.5 rounded font-mono ${j===!1?"bg-red-900/30 text-red-400":"bg-gray-700 text-gray-300"}`,children:[j===!1&&"❌ ",N]},S)})})]})]}),s.jsx("button",{onClick:()=>d("models",f.id),className:`px-4 py-2 rounded font-medium text-sm transition-colors ${f.enabled?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:f.enabled?"✓ Enabled":"Disabled"})]})},f.id)})}),c==="nodes"&&s.jsx("div",{className:"space-y-3",children:(b=n==null?void 0:n.nodes)==null?void 0:b.map(f=>{var g;const m=(g=o==null?void 0:o.nodes)==null?void 0:g[f.id];return s.jsx("div",{className:`p-4 rounded-lg border ${f.enabled?"bg-gray-800 border-gray-700":"bg-gray-900/50 border-gray-800 opacity-60"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("h3",{className:"font-semibold text-white capitalize",children:f.id}),s.jsxs("span",{className:"text-xs bg-blue-900/50 text-blue-300 px-2 py-0.5 rounded",children:["v",f.version]}),m&&!m.all_met&&s.jsx("span",{className:"text-xs bg-red-900/50 text-red-300 px-2 py-0.5 rounded",children:"⚠️ Requirements missing"})]}),f.notes&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.notes}),f.requirements&&f.requirements.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Requirements:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:f.requirements.map((N,S)=>{var k,C;const j=(C=(k=m==null?void 0:m.requirements)==null?void 0:k[S])==null?void 0:C.installed;return s.jsxs("span",{className:`text-xs px-2 py-0.5 rounded font-mono ${j===!1?"bg-red-900/30 text-red-400":"bg-gray-700 text-gray-300"}`,children:[j===!1&&"❌ ",N]},S)})})]})]}),s.jsx("button",{onClick:()=>d("nodes",f.id),className:`px-4 py-2 rounded font-medium text-sm transition-colors ${f.enabled?"bg-green-600 hover:bg-green-700 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-300"}`,children:f.enabled?"✓ Enabled":"Disabled"})]})},f.id)})}),c==="settings"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-700",children:[s.jsx("h3",{className:"font-semibold text-white mb-3",children:"Global Settings"}),(n==null?void 0:n.global_settings)&&Object.entries(n.global_settings).map(([f,m])=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-700 last:border-0",children:[s.jsx("span",{className:"text-sm text-gray-300 capitalize",children:f.replace(/_/g," ")}),s.jsx("span",{className:"text-sm text-gray-400 font-mono",children:m.toString()})]},f))]}),s.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-blue-400 mb-2",children:"💡 Coming Soon"}),s.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[s.jsx("li",{children:"• Per-user model assignments"}),s.jsx("li",{children:"• Model usage quotas"}),s.jsx("li",{children:"• Performance monitoring"}),s.jsx("li",{children:"• Auto-update settings"})]})]})]})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800 flex items-center justify-between",children:[s.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white",children:"🔄 Check Requirements"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm text-white font-medium",children:"Done"})]})]})}):null}function jk({isOpen:e,onClose:t,onApplyExample:n}){const[r,o]=w.useState([]),[i,l]=w.useState([]),[a,c]=w.useState(!0),[u,p]=w.useState("models"),[h,d]=w.useState(null);w.useEffect(()=>{e&&v()},[e]);const v=async()=>{try{const b=await(await fetch(`${ce}/api/workflow-components/examples`)).json();o(b.examples||[]),l(b.action_examples||[]),c(!1)}catch(x){console.error("Failed to load examples:",x),c(!1)}},y=x=>{const b={configType:u==="models"?"model":"action",configName:x.name,config:x.config,description:x.description};n("config",b),t()};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-gray-900 border border-gray-700 rounded-lg w-[900px] max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-800 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-white",children:"Configuration Examples"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Working configurations for AI models and actions"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white text-2xl",children:"✕"})]}),s.jsxs("div",{className:"px-6 pt-4 flex space-x-4 border-b border-gray-800",children:[s.jsxs("button",{onClick:()=>p("models"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${u==="models"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["🤖 AI Models (",r.length,")"]}),s.jsxs("button",{onClick:()=>p("actions"),className:`pb-3 px-2 text-sm font-medium border-b-2 transition-colors ${u==="actions"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:["⚡ Actions (",i.length,")"]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[s.jsx("div",{className:"w-1/2 border-r border-gray-800 overflow-y-auto p-4",children:a?s.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading examples..."}):s.jsx("div",{className:"space-y-2",children:(u==="models"?r:i).map((x,b)=>s.jsxs("div",{onClick:()=>d(x),className:`p-4 rounded-lg border cursor-pointer transition-all ${h===x?"bg-blue-900/30 border-blue-500":"bg-gray-800 border-gray-700 hover:border-gray-600"}`,children:[s.jsx("div",{className:"font-semibold text-white text-sm mb-1",children:x.name}),s.jsx("div",{className:"text-xs text-gray-400 mb-2",children:x.description}),x.modelId&&s.jsxs("div",{className:"text-xs text-blue-400 mb-1",children:["Model: ",x.modelId]}),x.useCase&&s.jsxs("div",{className:"text-xs text-gray-500",children:["💡 ",x.useCase]})]},b))})}),s.jsx("div",{className:"w-1/2 overflow-y-auto p-4 bg-gray-950",children:h?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:h.name}),s.jsx("p",{className:"text-sm text-gray-400 mb-3",children:h.description}),h.modelId&&s.jsxs("div",{className:"mb-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:"Recommended Model:"}),s.jsx("span",{className:"ml-2 text-blue-400 font-mono",children:h.modelId})]}),h.useCase&&s.jsxs("div",{className:"mb-3 p-2 bg-blue-900/20 border border-blue-800/30 rounded",children:[s.jsx("div",{className:"text-xs text-blue-400 font-medium mb-1",children:"Use Case"}),s.jsx("div",{className:"text-xs text-gray-300",children:h.useCase})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-2",children:"Configuration:"}),s.jsx("pre",{className:"bg-black border border-gray-700 rounded p-3 text-xs font-mono text-green-400 overflow-x-auto",children:JSON.stringify(h.config,null,2)})]}),s.jsx("button",{onClick:()=>y(h),className:"w-full px-4 py-3 bg-blue-600 hover:bg-blue-700 rounded text-sm text-white font-medium transition-colors",children:"🎯 Create Config Node"}),s.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:["A new ConfigNode will be added to your canvas with these settings.",s.jsx("br",{}),"Connect it to a Model or Action node to apply the configuration."]})]}):s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("div",{className:"text-4xl mb-3",children:"👈"}),s.jsx("div",{className:"text-sm",children:"Select an example to preview"})]})})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-gray-800 flex items-center justify-between bg-gray-900/50",children:[s.jsx("div",{className:"text-xs text-gray-500",children:"💡 Tip: Connect Config nodes to Model/Action nodes to apply settings"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm text-white",children:"Close"})]})]})}):null}const Sk={camera:E2,videoInput:M2,youtube:I2,model:P2,zone:T2,detectionFilter:ok,action:$2,dataPreview:D2,videoPreview:A2,debug:R2,linkIn:L2,linkOut:F2,linkCall:z2,catch:O2,config:V2,audioExtractor:B2,audioAI:H2,audioVU:W2,dayNightDetector:U2,droneInput:X2,droneFilter:G2,droneMap:Z2,droneAction:J2,droneAnalytics:tk,parkingViolation:rk,unifiCameraDiscovery:lk,unifiProtectEvent:dk,unifiAddCamera:hk},kk={animated:pk,data:gk},Ck=[{id:"welcome",type:"default",position:{x:250,y:100},data:{label:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"font-bold mb-2",children:"🎬 Overwatch Workflow Builder"}),s.jsx("div",{className:"text-xs text-gray-400",children:"Drag components from the left to build your workflow"})]})}}];function _k(){const[e,t,n]=YS(Ck),[r,o,i]=XS([]),[l,a]=w.useState([]),[c,u]=w.useState([]),[p,h]=w.useState([]),[d,v]=w.useState([]),[y,x]=w.useState(null),[b,f]=w.useState({type:"none"}),[m,g]=w.useState(!1),[N,S]=w.useState(!1),[j,k]=w.useState(!1),[C,P]=w.useState(!1),[z,L]=w.useState(null);w.useEffect(()=>{const E=async()=>{if(z)try{await fetch(wn.workflowStop(z),{method:"POST",keepalive:!0})}catch(F){console.error("Cleanup error:",F)}};return window.addEventListener("beforeunload",E),()=>{window.removeEventListener("beforeunload",E),E()}},[z]),w.useEffect(()=>{console.log("🔄 DATA LOADING USEEFFECT TRIGGERED"),fetch(wn.cameras).then(E=>{if(!E.ok)throw new Error(`HTTP ${E.status}`);return E.json()}).then(E=>{a(E.cameras||[])}).catch(E=>{console.error("Failed to load cameras:",E),a([])}),fetch(wn.workflowComponents.models).then(E=>{if(!E.ok)throw new Error(`HTTP ${E.status}`);return E.json()}).then(E=>{u(E.models||[])}).catch(E=>{console.error("Failed to load models:",E),u([])}),fetch(wn.workflowComponents.actions).then(E=>E.json()).then(E=>{h(E.actions||[])}).catch(E=>{console.error("Failed to load actions:",E),h([])}),fetch(wn.workflowComponents.filters).then(E=>E.json()).then(E=>{v(E.filters||[])}).catch(E=>{console.error("Failed to load filters:",E),v([])})},[]);const A=w.useCallback(E=>{const F=e.find(Q=>Q.id===E.source),O=e.find(Q=>Q.id===E.target);let X="animated",Y={};(F==null?void 0:F.type)==="camera"||(F==null?void 0:F.type)==="videoInput"||(F==null?void 0:F.type)==="youtube"?(X="animated",Y={type:"video"}):(F==null?void 0:F.type)==="model"?(O==null?void 0:O.type)==="dataPreview"||(O==null?void 0:O.type)==="debug"?(X="data",Y={type:"raw_data"}):(X="animated",Y={type:"detections"}):(F==null?void 0:F.type)==="zone"&&(X="animated",Y={type:"zones"}),(O==null?void 0:O.type)==="debug"&&(X="data",Y={type:"debug"}),(F==null?void 0:F.type)==="config"&&(X="data",Y={type:"config"}),(F==null?void 0:F.type)==="audioExtractor"&&(X="data",Y={type:"audio"}),(F==null?void 0:F.type)==="audioAI"&&(X="data",Y={type:"audio_data"});const V={...E,type:X,data:Y,animated:!0,style:{strokeWidth:2,stroke:Y.type==="audio"?"#ec4899":Y.type==="audio_data"?"#a855f7":void 0}};o(Q=>E0(V,Q))},[o,e]),R=w.useCallback(E=>{E.preventDefault(),E.dataTransfer.dropEffect="move"},[]),_=w.useCallback(E=>{E.preventDefault();const F=E.dataTransfer.getData("application/reactflow"),O=JSON.parse(E.dataTransfer.getData("application/json")||"{}");if(typeof F>"u"||!F)return;const X={x:E.clientX-250,y:E.clientY-40},Y={id:`${F}-${Date.now()}`,type:F,position:X,data:{...O}};t(V=>V.concat(Y))},[t]),$=w.useCallback(()=>{const E={nodes:e,edges:r,site:y,timestamp:new Date().toISOString()};console.log("Saving workflow:",E);const F=new Blob([JSON.stringify(E,null,2)],{type:"application/json"}),O=URL.createObjectURL(F),X=document.createElement("a");X.href=O,X.download=`workflow-${y||"default"}-${Date.now()}.json`,X.click()},[e,r,y]);w.useCallback(E=>{t(E.nodes||[]),o(E.edges||[]),x(E.site)},[t,o]);const T=w.useCallback(()=>{t([]),o([])},[t,o]),D=w.useCallback((E,F)=>{const O={id:`${E}-${Date.now()}`,type:E,position:{x:400,y:200},data:F};t(X=>X.concat(O))},[t]),M=w.useCallback(async()=>{if(console.log("🎬 Execute button clicked!",{isExecuting:C,nodeCount:e.length,edgeCount:r.length}),C){console.log("⏹️ Stopping workflow:",z);try{if(z){const E=wn.workflowStop(z);console.log("Calling stop endpoint:",E),await fetch(E,{method:"POST"})}P(!1),L(null),console.log("✅ Workflow stopped")}catch(E){console.error("❌ Failed to stop workflow:",E),alert(`Failed to stop workflow: ${E.message}`)}}else{const E=`workflow-${Date.now()}`;console.log("▶️ Starting workflow:",E),console.log("Nodes:",e.length,"Edges:",r.length);try{L(E);const F=wn.workflowExecuteRealtime;console.log("Calling execute endpoint:",F);const O={id:E,name:"Test Workflow",nodes:e,edges:r};console.log("Payload:",JSON.stringify(O,null,2));const X=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});console.log("Response status:",X.status);const Y=await X.text();console.log("Response body:",Y),X.ok?(P(!0),console.log("✅ Workflow execution started successfully"),alert("Workflow started! Check the Debug Console for messages.")):(console.error("❌ Failed to start workflow:",Y),alert(`Failed to start workflow: ${Y}`))}catch(F){console.error("❌ Failed to execute workflow:",F),alert(`Error executing workflow: ${F.message}

Check browser console for details.`),L(null)}}},[C,z,e,r]),I=w.useCallback((E,F)=>{b.type==="map"&&b.syncWithViewport&&f(O=>({...O}))},[b]);return s.jsxs("div",{className:"h-screen w-screen flex bg-gray-950",children:[!m&&s.jsx(mk,{cameras:l,models:c,actions:p,filters:d}),s.jsx("div",{className:"flex-1 relative",children:s.jsxs(WS,{nodes:e,edges:r,onNodesChange:n,onEdgesChange:i,onConnect:A,onDrop:_,onDragOver:R,onMove:I,nodeTypes:Sk,edgeTypes:kk,fitView:!0,className:"bg-gray-950",nodesDraggable:!m,nodesConnectable:!m,elementsSelectable:!m,children:[s.jsx(wk,{config:b}),!m&&s.jsxs(s.Fragment,{children:[s.jsx(o2,{className:"bg-gray-900 border-gray-700"}),s.jsx(y2,{className:"bg-gray-900 border-gray-700",nodeColor:"#374151",maskColor:"rgba(0, 0, 0, 0.6)"})]}),s.jsx(qS,{variant:b.type==="none"?It.Dots:It.Lines,gap:12,size:1,color:b.type==="none"?"#374151":"#1f2937",style:{opacity:b.type==="none"?1:.3}}),s.jsxs(Er,{position:"top-left",className:`${m?"bg-black/80":"bg-gray-900/50"} backdrop-blur-sm border border-gray-800 rounded-lg p-4`,children:[s.jsx("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-blue-600 bg-clip-text text-transparent",children:"OVERWATCH"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:m?"Live Monitoring":"Workflow Builder"})]}),s.jsxs(Er,{position:"top-right",className:"space-y-2",children:[s.jsxs("a",{href:"http://localhost:7002/#workflows",target:"_blank",className:"px-3 py-2 bg-gray-900 border border-blue-700 rounded-lg hover:border-blue-500 transition-colors text-sm flex items-center space-x-2 w-full",title:"View Dashboard",children:[s.jsx("span",{children:"📊"}),s.jsx("span",{className:"text-gray-300",children:"Dashboard"})]}),s.jsx(bk,{isDisplayMode:m,onToggle:()=>g(!m)}),!m&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>S(!0),className:"px-3 py-2 bg-gray-900 border border-gray-700 rounded-lg hover:border-gray-500 transition-colors text-sm flex items-center space-x-2 w-full",title:"Configuration",children:[s.jsx("span",{children:"⚙️"}),s.jsx("span",{className:"text-gray-300",children:"Configuration"})]}),s.jsxs("button",{onClick:()=>k(!0),className:"px-3 py-2 bg-gray-900 border border-yellow-700 rounded-lg hover:border-yellow-500 transition-colors text-sm flex items-center space-x-2 w-full",title:"Configuration Examples",children:[s.jsx("span",{children:"📚"}),s.jsx("span",{className:"text-gray-300",children:"Examples"})]}),s.jsx(vk,{onBackgroundChange:f,currentBackground:b}),s.jsx(yk,{onSave:$,onClear:T,onExecute:M,nodeCount:e.length,edgeCount:r.length,isExecuting:C})]})]})]})}),s.jsx(Nk,{isOpen:N,onClose:()=>S(!1)}),s.jsx(jk,{isOpen:j,onClose:()=>k(!1),onApplyExample:D})]})}Tl.createRoot(document.getElementById("root")).render(s.jsx(Ha.StrictMode,{children:s.jsx(_k,{})}));
