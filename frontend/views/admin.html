<!-- Admin Panel View -->
<!-- Manage Organizations, Sites, Sublocations, and Cameras -->

<div id="admin-view" class="view">
    <!-- Admin Header -->
    <div class="mb-6">
        <h2 class="text-2xl font-bold text-white mb-2">System Administration</h2>
        <p class="text-gray-400">Manage organizations, sites, locations, and cameras</p>
    </div>

    <!-- Admin Tabs -->
    <div class="flex space-x-2 border-b border-gray-800 mb-6">
        <button onclick="showAdminTab('organizations')" class="admin-tab active" data-tab="organizations">
            üè¢ Organizations
        </button>
        <button onclick="showAdminTab('sites')" class="admin-tab" data-tab="sites">
            üìç Sites
        </button>
        <button onclick="showAdminTab('sublocations')" class="admin-tab" data-tab="sublocations">
            üìå Sublocations
        </button>
        <button onclick="showAdminTab('cameras')" class="admin-tab" data-tab="cameras">
            üìπ Cameras
        </button>
        <button onclick="showAdminTab('unifi')" class="admin-tab" data-tab="unifi">
            üì° UniFi
        </button>
    </div>

    <!-- Organizations Tab -->
    <div id="admin-organizations" class="admin-tab-content active">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-white">Organizations</h3>
            <button onclick="showCreateOrganizationModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                + Create Organization
            </button>
        </div>
        <div id="organizations-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Organizations will be loaded here -->
        </div>
    </div>

    <!-- Sites Tab -->
    <div id="admin-sites" class="admin-tab-content">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-white">Sites</h3>
            <button onclick="showCreateSiteModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                + Create Site
            </button>
        </div>
        <div id="sites-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Sites will be loaded here -->
        </div>
    </div>

    <!-- Sublocations Tab -->
    <div id="admin-sublocations" class="admin-tab-content">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-white">Sublocations</h3>
            <button onclick="showCreateSublocationModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                + Create Sublocation
            </button>
        </div>
        <div id="sublocations-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Sublocations will be loaded here -->
        </div>
    </div>

    <!-- Cameras Tab -->
    <div id="admin-cameras" class="admin-tab-content">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-white">Cameras</h3>
            <button onclick="showCreateCameraModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                + Create Camera
            </button>
        </div>
        <div id="cameras-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- Cameras will be loaded here -->
        </div>
    </div>

    <!-- UniFi Tab -->
    <div id="admin-unifi" class="admin-tab-content">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-semibold text-white">UniFi Credentials</h3>
            <button onclick="showCreateUniFiModal()" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors">
                + Add UniFi Credential
            </button>
        </div>
        <div id="unifi-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <!-- UniFi credentials will be loaded here -->
        </div>
    </div>
</div>

<!-- Create Organization Modal -->
<div id="create-organization-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 border border-gray-700 rounded-lg w-[600px] max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">Create Organization</h3>
            <button onclick="closeModal('create-organization-modal')" class="text-gray-400 hover:text-white text-2xl">‚úï</button>
        </div>
        <form onsubmit="createOrganization(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Organization Name *</label>
                <input type="text" name="name" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Description</label>
                <textarea name="description" rows="3" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"></textarea>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Type</label>
                <select name="organization_type" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <option value="enterprise">Enterprise</option>
                    <option value="business">Business</option>
                    <option value="residential">Residential</option>
                </select>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
                <button type="button" onclick="closeModal('create-organization-modal')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium">
                    Create Organization
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Create Site Modal -->
<div id="create-site-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 border border-gray-700 rounded-lg w-[600px] max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">Create Site</h3>
            <button onclick="closeModal('create-site-modal')" class="text-gray-400 hover:text-white text-2xl">‚úï</button>
        </div>
        <form onsubmit="createSite(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Organization *</label>
                <select name="organization_id" id="site-org-select" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <!-- Organizations will be loaded here -->
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Site Name *</label>
                <input type="text" name="name" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Description</label>
                <textarea name="description" rows="3" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"></textarea>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Site Type</label>
                <select name="site_type" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <option value="headquarters">Headquarters</option>
                    <option value="branch">Branch Office</option>
                    <option value="warehouse">Warehouse</option>
                    <option value="retail">Retail Store</option>
                    <option value="datacenter">Data Center</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Location (Address)</label>
                <input type="text" name="location" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="123 Main St, City, Country">
            </div>
            <div class="flex justify-end space-x-3 pt-4">
                <button type="button" onclick="closeModal('create-site-modal')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium">
                    Create Site
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Create Sublocation Modal -->
<div id="create-sublocation-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 border border-gray-700 rounded-lg w-[600px] max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">Create Sublocation</h3>
            <button onclick="closeModal('create-sublocation-modal')" class="text-gray-400 hover:text-white text-2xl">‚úï</button>
        </div>
        <form onsubmit="createSublocation(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Site *</label>
                <select name="site_id" id="sublocation-site-select" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <!-- Sites will be loaded here -->
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Sublocation Name *</label>
                <input type="text" name="name" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="e.g., Reception, Parking Lot, Floor 2">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Description</label>
                <textarea name="description" rows="3" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500"></textarea>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Area Type</label>
                <select name="area_type" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <option value="entrance">Entrance</option>
                    <option value="exit">Exit</option>
                    <option value="parking">Parking</option>
                    <option value="lobby">Lobby</option>
                    <option value="corridor">Corridor</option>
                    <option value="room">Room</option>
                    <option value="outdoor">Outdoor</option>
                    <option value="perimeter">Perimeter</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
                <button type="button" onclick="closeModal('create-sublocation-modal')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium">
                    Create Sublocation
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Create UniFi Credential Modal -->
<div id="create-unifi-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 border border-gray-700 rounded-lg w-[600px] max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">Add UniFi Credential</h3>
            <button onclick="closeModal('create-unifi-modal')" class="text-gray-400 hover:text-white text-2xl">‚úï</button>
        </div>
        <form onsubmit="createUniFiCredential(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Credential Name *</label>
                <input type="text" name="name" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="e.g., Office UniFi Protect">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Type *</label>
                <select name="credential_type" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <option value="local">Local Controller/Protect</option>
                    <option value="cloud" disabled>UniFi Cloud (Coming Soon)</option>
                </select>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div class="col-span-2 sm:col-span-1">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Host/IP *</label>
                    <input type="text" name="host" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="192.168.1.1">
                </div>
                <div class="col-span-2 sm:col-span-1">
                    <label class="block text-sm font-medium text-gray-300 mb-2">Port *</label>
                    <input type="number" name="port" value="443" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Username *</label>
                    <input type="text" name="username" required autocomplete="off" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="admin">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">Password *</label>
                    <input type="password" name="password" required autocomplete="new-password" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">UniFi Site</label>
                <input type="text" name="unifi_site" value="default" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="default">
                <p class="text-xs text-gray-500 mt-1">Usually "default" unless you have multiple sites</p>
            </div>
            
            <div class="border-t border-gray-800 pt-4">
                <h4 class="text-sm font-medium text-gray-300 mb-3">Organization & Site Assignment (Optional)</h4>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-400 mb-1">Organization</label>
                        <select name="organization_id" id="unifi-org-select" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded text-sm text-white focus:outline-none focus:border-blue-500">
                            <option value="">None (Global)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs text-gray-400 mb-1">Site</label>
                        <select name="site_id" id="unifi-site-select" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded text-sm text-white focus:outline-none focus:border-blue-500">
                            <option value="">None</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="verify_ssl" class="rounded">
                    <span class="text-sm text-gray-300">Verify SSL certificates</span>
                </label>
                <p class="text-xs text-gray-500 mt-1 ml-6">Leave unchecked for self-signed certificates</p>
            </div>
            
            <div class="flex justify-end space-x-3 pt-4">
                <button type="button" onclick="closeModal('create-unifi-modal')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium">
                    Add Credential
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Create Camera Modal -->
<div id="create-camera-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-gray-900 border border-gray-700 rounded-lg w-[600px] max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-800 flex items-center justify-between">
            <h3 class="text-xl font-bold text-white">Create Camera</h3>
            <button onclick="closeModal('create-camera-modal')" class="text-gray-400 hover:text-white text-2xl">‚úï</button>
        </div>
        <form onsubmit="createCamera(event)" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Sublocation *</label>
                <select name="sublocation_id" id="camera-sublocation-select" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <!-- Sublocations will be loaded here -->
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Camera Name *</label>
                <input type="text" name="name" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="e.g., Front Door Camera">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">Camera Type</label>
                <select name="type" class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500">
                    <option value="unifi">UniFi Protect</option>
                    <option value="rtsp">Generic RTSP</option>
                    <option value="onvif">ONVIF</option>
                    <option value="hikvision">Hikvision</option>
                    <option value="dahua">Dahua</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-300 mb-2">RTSP URL *</label>
                <input type="text" name="rtsp_url" required class="w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:outline-none focus:border-blue-500" placeholder="rtsp://username:password@ip:port/stream">
            </div>
            <div>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="enabled" checked class="rounded">
                    <span class="text-sm text-gray-300">Enable camera</span>
                </label>
            </div>
            <div class="flex justify-end space-x-3 pt-4">
                <button type="button" onclick="closeModal('create-camera-modal')" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white">
                    Cancel
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium">
                    Create Camera
                </button>
            </div>
        </form>
    </div>
</div>

<style>
.admin-tab {
    @apply px-4 py-2 text-sm font-medium text-gray-400 border-b-2 border-transparent transition-colors;
}

.admin-tab.active {
    @apply text-blue-400 border-blue-500;
}

.admin-tab:hover:not(.active) {
    @apply text-gray-300;
}

.admin-tab-content {
    @apply hidden;
}

.admin-tab-content.active {
    @apply block;
}

.entity-card {
    @apply border border-gray-700 bg-gray-800/50 rounded-lg p-4 hover:border-gray-600 transition-colors;
}

.entity-card-header {
    @apply flex items-center justify-between mb-3;
}

.entity-card-title {
    @apply font-semibold text-white text-lg;
}

.entity-card-actions {
    @apply flex items-center space-x-2;
}
</style>


